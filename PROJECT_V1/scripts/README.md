# 自動化スクリプト集

開発工程別ツール選択システムで使用する自動化スクリプトです。

## 🎯 主要機能

- **技術スタックフィルタリング**: セクション12で選択された技術スタック（クラウドプラットフォーム、プログラミング言語）に基づいて、互換性のあるツールのみを推薦
- **インテリジェントマッチング**: 要件キーワードとツールカテゴリの70+マッピングによる自動推薦
- **統合レポート生成**: 選択済みツールの要約とカテゴリ別集計

## 📋 スクリプト一覧

| # | スクリプト名 | 説明 | 使い方 |
|---|------------|------|--------|
| 1 | `generate_tool_selection.py` | 開発工程ドキュメントからツール選択マスターを自動生成 | `python generate_tool_selection.py` |
| 2 | `extract_selected_tools.py` | チェック済みツールを抽出して一覧表示 | `python extract_selected_tools.py <input_file>` |
| 3 | `generate_summary.py` | 選択済みツールの要約を生成 | `python generate_summary.py <input_file>` |
| 4 | `validate_links.py` | ツール詳細へのリンクを検証 | `python validate_links.py <input_file>` |

---

## 🔧 技術スタックフィルタリング機能

`tool_recommender.py` は、セクション12で選択された技術スタックに基づいて、ツール推薦を自動的にフィルタリングします。

### 動作例

**セクション12でAzureを選択した場合**:
- ✅ 推薦される: `Azure Bicep`, `Terraform` (クロスプラットフォーム)
- ❌ 除外される: `AWS CloudFormation`, `AWS CodeDeploy`

**セクション12でTypeScriptを選択した場合**:
- ✅ 推薦される: `Jest`, `Cypress`, `ESLint`, `Prettier`
- ❌ 除外される: `JUnit`, `pytest`, `Mockito`

**セクション12でPostgreSQLを選択した場合**:
- ✅ 推薦される: `pgAdmin`, `ERDPlus` (クロスDB), `Flyway` (クロスDB)
- ❌ 除外される: `MySQL_Workbench`, `SQL_Developer`

### フィルタリングルール

1. **クラウドプラットフォーム**: AWS/Azure/GCP専用ツールは、対応するプラットフォームが選択されている場合のみ推薦
2. **プログラミング言語**: 言語固有のツール（テストフレームワーク、Linter等）は、対応する言語が選択されている場合のみ推薦
3. **データベース**: データベース固有のツール（MySQL_Workbench、pgAdmin等）は、対応するデータベースが選択されている場合のみ推薦
4. **クロスプラットフォームツール**: `platform: "All"`, `language: "All"`, `database: "All"` のツールは常に推薦対象

---

## 🛠️ スクリプト詳細

### 1. generate_tool_selection.py

**目的**: 開発工程ドキュメントからツール選択マスターを自動生成

**機能**:
- `docs/dev_process_開発工程_*.md` ファイルを自動検索
- ツール情報を抽出
- ツール選択マスターMarkdownを生成

**使い方**:
```bash
# デフォルト出力（ツール選択マスター_自動生成.md）
python generate_tool_selection.py

# カスタム出力ファイル指定
python generate_tool_selection.py ../カスタム出力.md
```

**出力例**:
```
🔍 開発工程ドキュメントを検索中: C:/Projects/.../docs
📝 12個の開発工程ドキュメントを検出しました
  - 処理中: dev_process_開発工程_1_企画プロセス.md
    ✅ 10個のツールを抽出
  ...
✅ ツール選択マスターを保存しました: ../ツール選択マスター_自動生成.md
```

---

### 2. extract_selected_tools.py

**目的**: チェック済み `[x]` のツールを抽出して一覧表示

**機能**:
- Markdownファイルからチェック済みツールを抽出
- 開発工程別・カテゴリ別・料金別に集計
- Markdown形式で一覧保存

**使い方**:
```bash
# プロジェクトツール選択.mdから抽出
python extract_selected_tools.py ../プロジェクトツール選択.md

# ツール選択マスター.mdから抽出
python extract_selected_tools.py ../ツール選択マスター.md
```

**出力例**:
```
🔍 チェック済みツールを抽出中: ../プロジェクトツール選択.md

================================================================================
📊 選択済みツール集計
================================================================================

✅ 総ツール数: 15

📋 開発工程別:
  - 企画プロセス: 3ツール
  - 要件定義: 2ツール
  - 実装（アプリケーション）: 5ツール
  - CI/CD構築: 2ツール
  - テスト（アプリケーション）: 3ツール

💰 料金別:
  - 🟢 無料: 12ツール
  - 🟡 一部無料: 2ツール
  - 🔴 有料: 1ツール

================================================================================

✅ 選択済みツール一覧を保存しました: ../選択済みツール一覧.md
```

---

### 3. generate_summary.py

**目的**: 選択済みツールの簡潔な要約を生成

**機能**:
- プロジェクト情報を抽出
- 選択済みツールを集計
- 工程別・料金別にグループ化
- テーブル形式の一覧を生成

**使い方**:
```bash
# デフォルト出力（<元ファイル名>_要約.md）
python generate_summary.py ../プロジェクトツール選択.md

# カスタム出力ファイル指定
python generate_summary.py ../プロジェクトツール選択.md ../要約レポート.md
```

**出力例**:
```
🔍 選択済みツールを抽出中: ../プロジェクトツール選択.md
✅ 15個のツールが選択されています
📝 要約を生成中...
✅ 要約を保存しました: ../プロジェクトツール選択_要約.md

================================================================================
📊 要約サマリー
================================================================================

プロジェクト名: マイクロサービス基盤構築
総ツール数: 15
料金別: 🟢12 / 🟡2 / 🔴1

================================================================================
```

**生成される要約の構成**:
1. プロジェクト情報
2. 選択ツールサマリー（料金別・工程別集計）
3. 選択ツール一覧（工程別、カテゴリ付き）
4. 選択ツール一覧表（テーブル形式）

---

### 4. validate_links.py

**目的**: ツール詳細へのリンクが有効かチェック

**機能**:
- Markdownファイル内のすべてのツールリンクを抽出
- リンク先ファイルの存在確認
- 有効/無効/リンクなしを分類
- 検証レポートを生成

**使い方**:
```bash
# ツール選択マスター.mdを検証
python validate_links.py ../ツール選択マスター.md

# プロジェクトツール選択.mdを検証
python validate_links.py ../プロジェクトツール選択.md
```

**出力例**:
```
🔍 ツールリンクを抽出中: ../ツール選択マスター.md
📝 85個のツールリンクを検出しました
🔗 リンクを検証中...

================================================================================
🔗 リンク検証レポート
================================================================================

📊 集計:
  - 総ツール数: 85
  - ✅ 有効なリンク: 75
  - ❌ 無効なリンク: 3
  - ⚠️ リンクなし: 7

================================================================================
❌ 無効なリンク (3件)
================================================================================

ツール名: CloudCraft
  開発工程: 基本設計（インフラ）
  リンク: ../../ツール/クラウドツール/CloudCraft.md
  行番号: 245
  エラー: ファイルが存在しません

...

✅ 検証レポートを保存しました: ../リンク検証レポート.md
```

---

## 📝 使用例シナリオ

### シナリオ1: プロジェクト開始時

```bash
# 1. ツール選択マスターから開始
cp ../ツール選択マスター.md ../プロジェクトA_ツール選択.md

# 2. エディタでツールを選択（チェックボックスに [x] を入れる）

# 3. 選択済みツールを抽出
python extract_selected_tools.py ../プロジェクトA_ツール選択.md

# 4. 要約を生成
python generate_summary.py ../プロジェクトA_ツール選択.md

# 5. リンクを検証
python validate_links.py ../プロジェクトA_ツール選択.md
```

### シナリオ2: ツール選択マスター再生成

```bash
# 開発工程ドキュメントを更新後、マスターを再生成
python generate_tool_selection.py ../ツール選択マスター_v2.md
```

### シナリオ3: 定期レビュー

```bash
# 3ヶ月ごとに選択済みツールを確認
python extract_selected_tools.py ../プロジェクトA_ツール選択.md

# 要約レポート生成
python generate_summary.py ../プロジェクトA_ツール選択.md ../レビュー_2025-12.md
```

---

## 🐍 必要なPythonバージョン

- Python 3.7以上

## 📦 依存ライブラリ

標準ライブラリのみ使用（追加インストール不要）:
- `re` - 正規表現
- `sys` - システム操作
- `pathlib` - パス操作
- `datetime` - 日時操作
- `typing` - 型ヒント

---

## 🔧 トラブルシューティング

### エラー: ファイルが見つかりません

```bash
# 相対パスを確認
python extract_selected_tools.py ../プロジェクトツール選択.md

# または絶対パスを使用
python extract_selected_tools.py "C:/Projects/.../プロジェクトツール選択.md"
```

### エラー: チェック済みツールが見つかりません

Markdownファイル内で、以下の形式でツールを選択してください：
```markdown
- [x] **ツール名** - 説明
```

`[ ]` ではなく `[x]` とする必要があります。

### エラー: 無効なリンク

`validate_links.py` で検出された無効なリンクは、`リンク検証レポート.md` を確認し、
該当するツール詳細ドキュメントを作成または修正してください。

---

## 📄 ライセンス

MIT License

---

**最終更新**: 2025-12-06
