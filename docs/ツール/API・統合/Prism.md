# Prism

## æ¦‚è¦

Prismã¯ã€OpenAPIä»•æ§˜ï¼ˆSwaggerï¼‰ã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ãŸHTTP APIãƒ¢ãƒƒã‚¯ã‚µãƒ¼ãƒãƒ¼ã§ã™ã€‚OpenAPI/Swaggerå®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰è‡ªå‹•çš„ã«ãƒ¢ãƒƒã‚¯ã‚µãƒ¼ãƒãƒ¼ã‚’ç”Ÿæˆã—ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®è‡ªå‹•ç”Ÿæˆã€ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æä¾›ã—ã¾ã™ã€‚ã‚¹ã‚­ãƒ¼ãƒé§†å‹•é–‹ç™ºï¼ˆSchema-Driven Developmentï¼‰ã‚’å¼·åŠ›ã«ã‚µãƒãƒ¼ãƒˆã—ã€APIä»•æ§˜æ›¸ã¨ãƒ¢ãƒƒã‚¯ã®ä¹–é›¢ã‚’é˜²ãã¾ã™ã€‚è»½é‡ã§Node.jsè£½ã€ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ä½¿ã„ã‚„ã™ãã€Dockerå¯¾å¿œã§CI/CDã«ã‚‚å®¹æ˜“ã«çµ±åˆã§ãã¾ã™ã€‚

## åŸºæœ¬æƒ…å ±

| é …ç›® | å†…å®¹ |
|------|------|
| **å…¬å¼ã‚µã‚¤ãƒˆ** | https://stoplight.io/open-source/prism |
| **æ–™é‡‘** | ğŸŸ¢ å®Œå…¨ç„¡æ–™ |
| **ãƒ©ã‚¤ã‚»ãƒ³ã‚¹** | Apache License 2.0 |
| **å¯¾å¿œä»•æ§˜** | OpenAPI 2.0 (Swagger)ã€OpenAPI 3.x |
| **å‹•ä½œç’°å¢ƒ** | Node.jsã€Dockerã€ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ãƒã‚¤ãƒŠãƒª |
| **é–‹ç™ºå…ƒ** | Stoplight |
| **åˆç‰ˆãƒªãƒªãƒ¼ã‚¹** | 2017å¹´ |
| **æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³** | 5.xï¼ˆ2024å¹´æ™‚ç‚¹ï¼‰ |

## ä¸»ãªæ©Ÿèƒ½

### 1. OpenAPIä»•æ§˜ãƒ™ãƒ¼ã‚¹ã®ãƒ¢ãƒƒã‚¯
- **è‡ªå‹•ãƒ¢ãƒƒã‚¯ç”Ÿæˆ**: OpenAPIå®šç¾©ã‹ã‚‰å³åº§ã«ãƒ¢ãƒƒã‚¯ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
- **Examplesåˆ©ç”¨**: OpenAPIå†…ã®examplesã‚’ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¨ã—ã¦è¿”å´
- **å‹•çš„ç”Ÿæˆ**: ã‚¹ã‚­ãƒ¼ãƒã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ãªãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’è‡ªå‹•ç”Ÿæˆ
- **è¤‡æ•°ãƒ¬ã‚¹ãƒãƒ³ã‚¹**: è¤‡æ•°ã®exampleã‚’åˆ‡ã‚Šæ›¿ãˆã¦è¿”å´

### 2. ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- **ã‚¹ã‚­ãƒ¼ãƒæ¤œè¨¼**: ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒOpenAPIä»•æ§˜ã«æº–æ‹ ã—ã¦ã„ã‚‹ã‹æ¤œè¨¼
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒã‚§ãƒƒã‚¯**: ãƒ‘ã‚¹ã€ã‚¯ã‚¨ãƒªã€ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ¤œè¨¼
- **ãƒœãƒ‡ã‚£æ¤œè¨¼**: JSON Schemaã«åŸºã¥ããƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã®æ¤œè¨¼
- **ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹**: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å¤±æ•—æ™‚ã«è©³ç´°ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”å´

### 3. ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ¢ãƒ¼ãƒ‰
- **Static Mode**: examplesã‚’å›ºå®šã§è¿”ã™
- **Dynamic Mode**: ã‚¹ã‚­ãƒ¼ãƒã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆ
- **Example Selection**: è¤‡æ•°ã®exampleã‹ã‚‰é¸æŠã—ã¦è¿”å´ï¼ˆpreferæŒ‡å®šï¼‰
- **Status Code Selection**: ä»»æ„ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’é¸æŠ

### 4. ã‚¨ãƒ©ãƒ¼ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- **400ç•ªå°ã‚¨ãƒ©ãƒ¼**: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ã€èªè¨¼ã‚¨ãƒ©ãƒ¼
- **500ç•ªå°ã‚¨ãƒ©ãƒ¼**: ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- **ä»»æ„ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰**: OpenAPIã§å®šç¾©ã•ã‚ŒãŸä»»æ„ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”å´
- **ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ**: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’æ¤œè¨¼

### 5. ãƒ—ãƒ­ã‚­ã‚·ãƒ¢ãƒ¼ãƒ‰
- **ãƒªã‚¯ã‚¨ã‚¹ãƒˆè»¢é€**: å®ŸAPIã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä¸­ç¶™
- **ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯**: ãƒ¢ãƒƒã‚¯ã«ãªã„ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯å®ŸAPIã¸
- **ãƒ˜ãƒƒãƒ€ãƒ¼è»¢é€**: èªè¨¼æƒ…å ±ãªã©ã®ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’å®ŸAPIã«è»¢é€
- **ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º**: ä¸€éƒ¨ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ã¿ãƒ¢ãƒƒã‚¯ã€æ®‹ã‚Šã¯å®ŸAPI

### 6. ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒã‚´ã‚·ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³
- **Acceptå¯¾å¿œ**: Acceptãƒ˜ãƒƒãƒ€ãƒ¼ã«å¿œã˜ãŸãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼ï¼ˆJSONã€XMLç­‰ï¼‰
- **è¤‡æ•°å½¢å¼**: OpenAPIã§å®šç¾©ã•ã‚ŒãŸè¤‡æ•°ã®content typeã«å¯¾å¿œ
- **å„ªå…ˆåº¦**: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®è¦æ±‚ã«å¿œã˜ãŸæœ€é©ãªå½¢å¼ã‚’è¿”å´

### 7. CORSå¯¾å¿œ
- **è‡ªå‹•è¨­å®š**: CORS ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’è‡ªå‹•çš„ã«è¿½åŠ 
- **ã‚¯ãƒ­ã‚¹ã‚ªãƒªã‚¸ãƒ³**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºã§ã®ã‚¯ãƒ­ã‚¹ã‚ªãƒªã‚¸ãƒ³å•é¡Œã‚’è§£æ±º
- **ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º**: CORSè¨­å®šã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒå¯èƒ½

## åˆ©ç”¨æ–¹æ³•

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

#### 1. npm/yarnï¼ˆNode.jsç’°å¢ƒï¼‰
```bash
# npmã§ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g @stoplight/prism-cli

# yarnã®å ´åˆ
yarn global add @stoplight/prism-cli
```

#### 2. Docker
```bash
# Dockerã‚³ãƒ³ãƒ†ãƒŠã§èµ·å‹•
docker run --rm -it -p 4010:4010 \
  -v $(pwd)/openapi.yaml:/tmp/openapi.yaml \
  stoplight/prism:latest mock /tmp/openapi.yaml
```

#### 3. ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ãƒã‚¤ãƒŠãƒª
```bash
# GitHubã‹ã‚‰ãƒã‚¤ãƒŠãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
# https://github.com/stoplightio/prism/releases
curl -L https://github.com/stoplightio/prism/releases/download/v5.x.x/prism-cli-linux -o prism
chmod +x prism

# å®Ÿè¡Œ
./prism mock openapi.yaml
```

### åŸºæœ¬çš„ãªä½¿ã„æ–¹

#### 1. OpenAPIå®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã®æº–å‚™
```yaml
# openapi.yaml
openapi: 3.0.0
info:
  title: Sample API
  version: 1.0.0
paths:
  /users/{userId}:
    get:
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string
                  email:
                    type: string
              examples:
                alice:
                  value:
                    id: 1
                    name: Alice
                    email: alice@example.com
                bob:
                  value:
                    id: 2
                    name: Bob
                    email: bob@example.com
        '404':
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚‰ãªã„
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
```

#### 2. ãƒ¢ãƒƒã‚¯ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•
```bash
# åŸºæœ¬çš„ãªèµ·å‹•ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ãƒˆ4010ï¼‰
prism mock openapi.yaml

# ãƒãƒ¼ãƒˆæŒ‡å®š
prism mock -p 8080 openapi.yaml

# ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ãƒ¢ãƒ¼ãƒ‰ï¼ˆã‚¹ã‚­ãƒ¼ãƒã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ç”Ÿæˆï¼‰
prism mock --dynamic openapi.yaml

# URLã‹ã‚‰ç›´æ¥èµ·å‹•
prism mock https://api.example.com/openapi.json
```

#### 3. ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å®Ÿè¡Œ
```bash
# GET /users/1
curl http://localhost:4010/users/1

# ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆaliceã®exampleï¼‰
{
  "id": 1,
  "name": "Alice",
  "email": "alice@example.com"
}
```

#### 4. Exampleé¸æŠ
```bash
# Prefer ãƒ˜ãƒƒãƒ€ãƒ¼ã§exampleã‚’æŒ‡å®š
curl -H "Prefer: example=bob" http://localhost:4010/users/2

# ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆbobã®exampleï¼‰
{
  "id": 2,
  "name": "Bob",
  "email": "bob@example.com"
}
```

#### 5. ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å–å¾—
```bash
# Preferãƒ˜ãƒƒãƒ€ãƒ¼ã§ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’æŒ‡å®š
curl -H "Prefer: code=404" http://localhost:4010/users/999

# ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆ404ã‚¨ãƒ©ãƒ¼ï¼‰
{
  "error": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚‰ãªã„"
}
```

#### 6. ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
```bash
# ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æœ‰åŠ¹åŒ–ã—ã¦ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
prism mock --validate openapi.yaml

# ä¸æ­£ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆuserIdãŒæ•°å€¤ã§ãªã„ï¼‰
curl http://localhost:4010/users/abc

# ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆ400ã‚¨ãƒ©ãƒ¼ï¼‰
{
  "type": "https://stoplight.io/prism/errors#UNPROCESSABLE_ENTITY",
  "title": "Invalid request",
  "status": 422,
  "detail": "The request doesn't match the schema"
}
```

#### 7. ãƒ—ãƒ­ã‚­ã‚·ãƒ¢ãƒ¼ãƒ‰
```bash
# å®ŸAPIã¸ã®ãƒ—ãƒ­ã‚­ã‚·ã¨ã—ã¦å‹•ä½œ
prism proxy openapi.yaml https://api.example.com

# ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã«ãƒ¢ãƒƒã‚¯ã‚’è¿”ã™
prism proxy --errors openapi.yaml https://api.example.com
```

#### 8. ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ãƒ¢ãƒ¼ãƒ‰
```bash
# ã‚¹ã‚­ãƒ¼ãƒã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆ
prism mock --dynamic openapi.yaml

# ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
curl http://localhost:4010/users/1

# ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆãƒ©ãƒ³ãƒ€ãƒ ç”Ÿæˆã•ã‚ŒãŸãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ï¼‰
{
  "id": 72548392,
  "name": "consectetur dolor",
  "email": "laborum@example.com"
}
```

#### 9. CORSè¨­å®š
```bash
# CORS ã‚’æœ‰åŠ¹åŒ–ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æœ‰åŠ¹ï¼‰
prism mock openapi.yaml

# CORSã‚’ç„¡åŠ¹åŒ–
prism mock --cors=false openapi.yaml
```

#### 10. Docker Composeã§ã®åˆ©ç”¨
```yaml
# docker-compose.yml
version: '3.8'
services:
  prism:
    image: stoplight/prism:latest
    command: mock -h 0.0.0.0 /tmp/openapi.yaml
    ports:
      - "4010:4010"
    volumes:
      - ./openapi.yaml:/tmp/openapi.yaml
```

```bash
docker-compose up
```

#### 11. CI/CDã§ã®åˆ©ç”¨
```yaml
# .github/workflows/test.yml
name: API Tests
on: [push]

jobs:
  test:
    runs-on: ubuntu-latest
    services:
      prism:
        image: stoplight/prism:latest
        ports:
          - 4010:4010
        options: >-
          --entrypoint prism
          mock -h 0.0.0.0 /openapi.yaml
    steps:
      - uses: actions/checkout@v2
      - name: Run tests
        run: npm test
        env:
          API_BASE_URL: http://localhost:4010
```

## ãƒ¡ãƒªãƒƒãƒˆ

### 1. OpenAPIä»•æ§˜ãƒ™ãƒ¼ã‚¹
âœ… APIä»•æ§˜æ›¸ãŒãã®ã¾ã¾ãƒ¢ãƒƒã‚¯ã«ãªã‚‹
âœ… ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ãƒ¢ãƒƒã‚¯ã®ä¹–é›¢ãŒãªã„
âœ… ã‚¹ã‚­ãƒ¼ãƒé§†å‹•é–‹ç™ºï¼ˆSchema-Driven Developmentï¼‰ã‚’ä¿ƒé€²

### 2. å¼·åŠ›ãªãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
âœ… ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒOpenAPIä»•æ§˜ã«æº–æ‹ ã—ã¦ã„ã‚‹ã‹è‡ªå‹•æ¤œè¨¼
âœ… é–‹ç™ºä¸­ã«APIä»•æ§˜é•åã‚’æ—©æœŸç™ºè¦‹
âœ… ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ»ã‚µãƒ¼ãƒãƒ¼é–“ã®å¥‘ç´„ã‚’ä¿è¨¼

### 3. è»½é‡ãƒ»é«˜é€Ÿ
âœ… Node.jsè£½ã§èµ·å‹•ãŒé€Ÿã„
âœ… ãƒ¡ãƒ¢ãƒªæ¶ˆè²»ãŒå°‘ãªã„
âœ… è¿½åŠ ã®è¨­å®šã‚„ã‚³ãƒ¼ãƒ‰ãŒä¸è¦

### 4. æŸ”è»Ÿãªãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ¢ãƒ¼ãƒ‰
âœ… Static/Dynamicãƒ¢ãƒ¼ãƒ‰ã®åˆ‡ã‚Šæ›¿ãˆ
âœ… è¤‡æ•°ã®exampleã‚’ä½¿ã„åˆ†ã‘
âœ… ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

### 5. ãƒ—ãƒ­ã‚­ã‚·ãƒ¢ãƒ¼ãƒ‰
âœ… å®ŸAPIã¨ãƒ¢ãƒƒã‚¯ã‚’ä½µç”¨å¯èƒ½
âœ… æ®µéšçš„ãªé–‹ç™ºã‚’ã‚µãƒãƒ¼ãƒˆ
âœ… æœªå®Ÿè£…ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ã¿ãƒ¢ãƒƒã‚¯

### 6. CI/CDçµ±åˆ
âœ… Dockerã‚³ãƒ³ãƒ†ãƒŠã§ç°¡å˜ã«èµ·å‹•
âœ… GitHub Actionsã€GitLab CIç­‰ã§åˆ©ç”¨ã—ã‚„ã™ã„
âœ… è‡ªå‹•ãƒ†ã‚¹ãƒˆã«çµ„ã¿è¾¼ã¿ã‚„ã™ã„

### 7. è±Šå¯Œãªãƒ„ãƒ¼ãƒ«ãƒã‚§ãƒ¼ãƒ³
âœ… Stoplight Studioã¨çµ±åˆ
âœ… OpenAPIã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã®ä¸€éƒ¨
âœ… ä»–ã®OpenAPIãƒ„ãƒ¼ãƒ«ã¨é€£æº

## ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ

### 1. OpenAPIä¾å­˜
âŒ OpenAPIä»•æ§˜ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¿…é ˆ
âŒ OpenAPIãŒãªã„å ´åˆã¯ä½¿ãˆãªã„
âŒ ä»•æ§˜ä½œæˆã®æ‰‹é–“ãŒå…ˆè¡Œ

### 2. è¤‡é›‘ãªãƒ­ã‚¸ãƒƒã‚¯
âŒ å‹•çš„ãªãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆã«é™ç•Œ
âŒ çŠ¶æ…‹ç®¡ç†ã‚„ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¯å®Ÿè£…ã§ããªã„
âŒ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ã®é€£æºã¯ãªã„

### 3. WebSocket/gRPCéå¯¾å¿œ
âŒ HTTP/REST APIã«ç‰¹åŒ–
âŒ WebSocketã‚„gRPCã¯æœªã‚µãƒãƒ¼ãƒˆ
âŒ åŒæ–¹å‘é€šä¿¡ã®ãƒ¢ãƒƒã‚¯ã«ã¯ä¸å‘ã

### 4. éŒ²ç”»æ©Ÿèƒ½ãªã—
âŒ å®ŸAPIã¨ã®é€šä¿¡ã‚’è¨˜éŒ²ã—ã¦ãƒ¢ãƒƒã‚¯åŒ–ã™ã‚‹æ©Ÿèƒ½ãŒãªã„
âŒ æ—¢å­˜APIã®ãƒ¢ãƒƒã‚¯åŒ–ã«ã¯æ‰‹å‹•ã§OpenAPIå®šç¾©ãŒå¿…è¦
âŒ WireMockã‚„Mountebankã‚ˆã‚Šè‡ªå‹•åŒ–åº¦ãŒä½ã„

### 5. UIãªã—
âŒ ç®¡ç†ç”»é¢ã‚„ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãŒãªã„
âŒ ãƒªã‚¯ã‚¨ã‚¹ãƒˆå±¥æ­´ã®ç¢ºèªã¯ãƒ­ã‚°ã®ã¿
âŒ ãƒ‡ãƒãƒƒã‚°ãŒã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ä¾å­˜

## ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹

### 1. ã‚¹ã‚­ãƒ¼ãƒé§†å‹•é–‹ç™º
- APIä»•æ§˜æ›¸ã‚’å…ˆã«å®šç¾©
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’ä¸¦è¡Œé–‹ç™º
- ä»•æ§˜ã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ãŸã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³

### 2. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™º
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã®é–‹ç™ºã‚’å¾…ãŸãšã«UIå®Ÿè£…
- ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®ãƒ†ã‚¹ãƒˆ
- ãƒ‡ãƒ¢ç’°å¢ƒã®æ§‹ç¯‰

### 3. å¥‘ç´„ãƒ†ã‚¹ãƒˆï¼ˆContract Testingï¼‰
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒAPIä»•æ§˜ã‚’å®ˆã£ã¦ã„ã‚‹ã‹æ¤œè¨¼
- ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- çµ±åˆãƒ†ã‚¹ãƒˆã®ä¿¡é ¼æ€§å‘ä¸Š

### 4. CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
- å¤–éƒ¨APIã«ä¾å­˜ã—ãªã„è‡ªå‹•ãƒ†ã‚¹ãƒˆ
- OpenAPIä»•æ§˜ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- ãƒ†ã‚¹ãƒˆç’°å¢ƒã®ç°¡ç´ åŒ–

### 5. APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ
- OpenAPIå®šç¾©ã®å‹•ä½œç¢ºèª
- ä»•æ§˜æ›¸ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆ
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå‘ã‘ã®ãƒ‡ãƒ¢API

## é¡ä¼¼ãƒ„ãƒ¼ãƒ«ã¨ã®æ¯”è¼ƒ

| ãƒ„ãƒ¼ãƒ« | æ–™é‡‘ | OpenAPIå¯¾å¿œ | ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ | ç‰¹å¾´ |
|--------|------|------------|--------------|------|
| **Prism** | ğŸŸ¢ ç„¡æ–™ | âœ… å°‚ç”¨ | âœ… å¼·åŠ› | OpenAPIç‰¹åŒ–ã€è»½é‡ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ |
| MockServer | ğŸŸ¢ ç„¡æ–™ | âœ… å¼·åŠ› | âœ… ã‚ã‚Š | OpenAPIçµ±åˆã€UIã€WebSocket |
| WireMock | ğŸŸ¢ ç„¡æ–™ | âš ï¸ é™å®šçš„ | âŒ ãªã— | æˆç†Ÿã€æŸ”è»Ÿãªãƒãƒƒãƒãƒ³ã‚° |
| MSW | ğŸŸ¢ ç„¡æ–™ | âš ï¸ æ‰‹å‹• | âŒ ãªã— | JavaScriptç‰¹åŒ–ã€Service Worker |
| Mountebank | ğŸŸ¢ ç„¡æ–™ | âŒ ãªã— | âŒ ãªã— | ãƒãƒ«ãƒãƒ—ãƒ­ãƒˆã‚³ãƒ« |
| Stoplight Studio | ğŸŸ¡ ä¸€éƒ¨æœ‰æ–™ | âœ… å°‚ç”¨ | âœ… ã‚ã‚Š | OpenAPIç·¨é›†ã€Prismçµ±åˆã€GUI |

### Prismã‚’é¸ã¶ã¹ãã‚±ãƒ¼ã‚¹
- OpenAPIä»•æ§˜ãƒ™ãƒ¼ã‚¹ã®é–‹ç™º
- ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¿…è¦
- è»½é‡ã§ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ¢ãƒƒã‚¯ãƒ„ãƒ¼ãƒ«ãŒæ¬²ã—ã„
- ã‚¹ã‚­ãƒ¼ãƒé§†å‹•é–‹ç™ºã‚’å®Ÿè·µã—ãŸã„

### ä»–ãƒ„ãƒ¼ãƒ«ã‚’æ¤œè¨ã™ã¹ãã‚±ãƒ¼ã‚¹
- è¤‡é›‘ãªãƒ­ã‚¸ãƒƒã‚¯ã‚„çŠ¶æ…‹ç®¡ç†ãŒå¿…è¦ â†’ **WireMock**ã€**MockServer**
- JavaScript/TypeScriptä¸­å¿ƒã®é–‹ç™º â†’ **MSW**
- HTTPä»¥å¤–ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚‚å¿…è¦ â†’ **Mountebank**
- GUIç’°å¢ƒã§OpenAPIç·¨é›†ã‚‚è¡Œã„ãŸã„ â†’ **Stoplight Studio**

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 1. OpenAPIå®šç¾©ã®å……å®Ÿ
```yaml
# examplesã‚’è¤‡æ•°å®šç¾©
responses:
  '200':
    content:
      application/json:
        examples:
          success:
            value: {id: 1, name: "Alice"}
          empty:
            value: {id: 0, name: ""}
          largeData:
            value: {id: 9999, name: "Very long name..."}
```

### 2. ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®æ´»ç”¨
```bash
# é–‹ç™ºä¸­ã¯å¸¸ã«ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æœ‰åŠ¹åŒ–
prism mock --validate openapi.yaml

# ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆé–‹ç™ºã§APIä»•æ§˜é•åã‚’æ—©æœŸç™ºè¦‹
```

### 3. ãƒ—ãƒ­ã‚­ã‚·ãƒ¢ãƒ¼ãƒ‰ã§ã®æ®µéšçš„é–‹ç™º
```bash
# å®Ÿè£…æ¸ˆã¿ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯å®ŸAPIã€æœªå®Ÿè£…ã¯ãƒ¢ãƒƒã‚¯
prism proxy openapi.yaml https://staging-api.example.com
```

### 4. CI/CDã§ã®å¥‘ç´„ãƒ†ã‚¹ãƒˆ
```yaml
# package.json
{
  "scripts": {
    "mock": "prism mock --validate openapi.yaml",
    "test": "jest --testEnvironment=node"
  }
}
```

```javascript
// test/contract.test.js
const axios = require('axios');

test('GET /users/:id returns valid response', async () => {
  const response = await axios.get('http://localhost:4010/users/1');
  expect(response.status).toBe(200);
  expect(response.data).toHaveProperty('id');
  expect(response.data).toHaveProperty('name');
});
```

### 5. ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ
```bash
# å„ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ãƒ†ã‚¹ãƒˆ
curl -H "Prefer: code=400" http://localhost:4010/users
curl -H "Prefer: code=401" http://localhost:4010/users
curl -H "Prefer: code=403" http://localhost:4010/users
curl -H "Prefer: code=404" http://localhost:4010/users/999
curl -H "Prefer: code=500" http://localhost:4010/users
```

### 6. Docker Composeã§ã®çµ±åˆ
```yaml
version: '3.8'
services:
  frontend:
    build: ./frontend
    environment:
      API_URL: http://prism:4010
    depends_on:
      - prism

  prism:
    image: stoplight/prism:latest
    command: mock -h 0.0.0.0 /tmp/openapi.yaml
    volumes:
      - ./openapi.yaml:/tmp/openapi.yaml
```

### 7. OpenAPIå®šç¾©ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†
```
âœ… OpenAPIå®šç¾©ã‚’Gitã§ç®¡ç†
âœ… å¤‰æ›´å±¥æ­´ã‚’è¿½è·¡
âœ… Pull Requestã§ã®ä»•æ§˜ãƒ¬ãƒ“ãƒ¥ãƒ¼
âœ… ã‚¿ã‚°ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†
```

## å…¬å¼ãƒªãƒ³ã‚¯

- **å…¬å¼ã‚µã‚¤ãƒˆ**: https://stoplight.io/open-source/prism
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: https://meta.stoplight.io/docs/prism/
- **GitHub**: https://github.com/stoplightio/prism
- **NPM**: https://www.npmjs.com/package/@stoplight/prism-cli
- **Stoplight Studio**: https://stoplight.io/studio (OpenAPIç·¨é›†ãƒ„ãƒ¼ãƒ«)

## é–¢é€£ãƒ„ãƒ¼ãƒ«

- [Swagger (OpenAPI)](./Swagger.md) - OpenAPIä»•æ§˜ãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ
- [MockServer](./MockServer.md) - OpenAPIçµ±åˆãƒ¢ãƒƒã‚¯ã‚µãƒ¼ãƒãƒ¼
- [WireMock](./WireMock.md) - HTTP APIãƒ¢ãƒƒã‚¯ã®å®šç•ª
- [MSW](./MSW.md) - JavaScript/TypeScriptå‘ã‘ãƒ¢ãƒƒã‚¯
- [Postman](./Postman.md) - APIé–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«
- [Stoplight Studio](https://stoplight.io/studio) - OpenAPIç·¨é›†ãƒ„ãƒ¼ãƒ«

## ã¾ã¨ã‚

Prismã¯ã€OpenAPIä»•æ§˜ã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ãŸHTTP APIãƒ¢ãƒƒã‚¯ã‚µãƒ¼ãƒãƒ¼ã®æ±ºå®šç‰ˆã§ã™ã€‚APIä»•æ§˜æ›¸ã‹ã‚‰å³åº§ã«ãƒ¢ãƒƒã‚¯ã‚’ç”Ÿæˆã—ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€è¤‡æ•°ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ¢ãƒ¼ãƒ‰ã€ã‚¨ãƒ©ãƒ¼ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ—ãƒ­ã‚­ã‚·æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚

ã‚¹ã‚­ãƒ¼ãƒé§†å‹•é–‹ç™ºï¼ˆSchema-Driven Developmentï¼‰ã‚’å®Ÿè·µã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ãŠã„ã¦ã€Prismã¯ä»•æ§˜ã¨ãƒ¢ãƒƒã‚¯ã®ä¹–é›¢ã‚’é˜²ãã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ»ã‚µãƒ¼ãƒãƒ¼é–“ã®å¥‘ç´„ã‚’ä¿è¨¼ã™ã‚‹å¼·åŠ›ãªãƒ„ãƒ¼ãƒ«ã§ã™ã€‚è»½é‡ã§èµ·å‹•ãŒé€Ÿãã€CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã«ã‚‚å®¹æ˜“ã«çµ±åˆã§ãã¾ã™ã€‚

OpenAPIä»•æ§˜ãŒæ•´å‚™ã•ã‚Œã¦ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ãŠã„ã¦ã€Prismã¯ç¬¬ä¸€é¸æŠã¨ãªã‚‹ãƒ¢ãƒƒã‚¯ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ä¸¦è¡Œé–‹ç™ºã‚„å¥‘ç´„ãƒ†ã‚¹ãƒˆã®å®Ÿæ–½ã«ãŠã„ã¦ã€é«˜ã„ä¾¡å€¤ã‚’æä¾›ã—ã¾ã™ã€‚
