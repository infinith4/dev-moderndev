# Selenium

## 概要

Selenium はブラウザ自動化の代表的なオープンソースツール群である。長年の実績があり、多言語・多ブラウザに対応しているため、既存資産を活かした E2E テスト基盤を構築しやすい。

## 料金

| プラン | 内容 |
|------|------|
| OSS 版 | 無料（Apache License 2.0） |
| 商用利用 | ライセンス上可能（組織ポリシー確認は必要） |

## 主な特徴

| 項目 | 内容 |
|------|------|
| 実績と汎用性 | Web 自動化の業界標準として採用例が多い |
| 多言語対応 | Java、Python、C#、JavaScript などに対応 |
| 多ブラウザ対応 | Chrome、Firefox、Edge、Safari をサポート |
| グリッド実行 | 複数環境で並列実行が可能 |
| 周辺エコシステム | レポート・BDD・クラウド実行と連携しやすい |

## 主な機能

### 自動操作機能

| 機能 | 説明 |
|------|------|
| ブラウザ操作 | クリック、入力、遷移、スクロールを自動化 |
| 要素特定 | CSS/XPath など複数セレクタに対応 |
| 待機制御 | 明示的待機で安定性を向上 |
| アサーション連携 | 任意テストフレームワークで検証可能 |

### 実行基盤機能

| 機能 | 説明 |
|------|------|
| ローカル実行 | 開発環境で迅速に検証 |
| Selenium Grid | 並列・分散実行に対応 |
| リモート実行 | クラウドサービスと接続可能 |
| ブラウザ管理 | WebDriver で実行環境を統一 |

### 運用機能

| 機能 | 説明 |
|------|------|
| 共通ライブラリ化 | ページオブジェクトで保守性向上 |
| 証跡取得 | 失敗時ログ・スクリーンショット保存 |
| リトライ制御 | 一時不安定への対策が可能 |
| 長期資産化 | 大規模回帰テストに展開しやすい |

## インストールとセットアップ

公式URL:
- [Selenium 公式](https://www.selenium.dev/)
- [Selenium Docs](https://www.selenium.dev/documentation/)
- [Selenium GitHub](https://github.com/SeleniumHQ/selenium)

セットアップの要点:
1. 利用言語の Selenium バインディングを導入する。
2. 対象ブラウザの実行環境を準備する。
3. テストランナーとレポート出力方式を決める。

## 基本的な使い方

1. 主要画面の操作をページオブジェクトで抽象化する。
2. smoke シナリオから開始し、安定確認後に回帰範囲を拡張する。
3. 待機処理は明示的待機で統一し、固定 sleep を避ける。
4. 失敗時証跡を保存して、再現可能な運用を維持する。

最小方針:
- ローカルで単一ブラウザ実行を先に安定化し、その後 Grid 並列へ展開する。

## メリット

- 多言語・多ブラウザで資産を構築しやすい
- エコシステムが大きく情報が豊富
- 既存プロジェクトへの導入実績が多い
- 大規模回帰テストに展開しやすい

## デメリット

- セットアップと保守に一定のコストがかかる
- テスト設計が弱いと flake が増えやすい
- モダンツール比で実装の手間が増える場合がある

## 他ツールとの比較

| ツール | 主な対象 | 特徴 |
|------|------|------|
| Selenium | Web 自動化全般 | 実績・言語対応・拡張性が高い |
| Playwright | Web E2E | 自動待機とデバッグ体験が強い |
| Cypress | Web E2E | フロントエンド運用に強い |
| Appium | モバイル E2E | モバイルアプリ自動化が中心 |

## ベストプラクティス

### 1. ページオブジェクトを徹底

- UI 操作をページクラスに集約する
- テストケースは業務シナリオ記述に集中する

### 2. 待機戦略を統一

- 明示的待機を標準とする
- セレクタと待機条件をセットで管理する

### 3. 実行粒度を分離

- smoke と regression を分けて運用する
- 長時間スイートは並列実行で短縮する

## 公式ドキュメント

- 公式サイト: https://www.selenium.dev/
- ドキュメント: https://www.selenium.dev/documentation/
- GitHub: https://github.com/SeleniumHQ/selenium

## まとめ

1. **導入容易** : 多言語対応と実績のあるエコシステムにより、既存資産を活かして導入しやすい。
2. **標準基盤** : ブラウザ自動化の標準基盤として、長期的な E2E 運用に適している。
3. **安定保守** : ページオブジェクトと待機戦略を標準化すると、テストの安定性と保守性を高められる。
