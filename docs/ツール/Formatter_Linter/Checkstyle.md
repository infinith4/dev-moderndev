# Checkstyle

## 概要

Checkstyle は Java ソースコードのコーディング規約を静的解析で検証するツールである。規約違反を自動検知し、チーム開発での一貫したコード品質維持に役立つ。

## 料金

| 区分 | 内容 |
|------|------|
| Checkstyle 本体 | 無料（OSS） |
| 補足 | CI 実行環境コストは別途 |

## 主な特徴

| 項目 | 内容 |
|------|------|
| 規約検証特化 | 命名、インデント、import などを検査 |
| ルール設定可能 | チーム規約に合わせた細かな制御 |
| CI 連携 | ビルド時に違反を検出可能 |
| IDE 連携 | 開発中に違反を早期確認 |
| 成熟度 | 長期運用実績が豊富 |

## 主な機能

### 解析機能

| 機能 | 説明 |
|------|------|
| スタイル検証 | 命名規則・改行・空白などを検証 |
| 構造検証 | クラス設計ルールのチェック |
| import 検証 | 未使用/順序ルールの検証 |
| suppress 設定 | 例外箇所の制御 |

### 運用機能

| 機能 | 説明 |
|------|------|
| XML 設定 | チーム共通ルールを定義 |
| Maven/Gradle 連携 | ビルド工程へ組み込み |
| レポート出力 | 違反内容を一覧化 |
| ルール拡張 | カスタムチェック追加が可能 |

### 品質支援

| 機能 | 説明 |
|------|------|
| レビュー効率化 | スタイル指摘を自動化 |
| 規約浸透 | 新規参加者でも基準を守りやすい |
| 早期修正 | 開発段階で違反検知 |
| 保守性向上 | コードの読みやすさを維持 |

## インストールとセットアップ

公式URL:
- [Checkstyle 公式](https://checkstyle.org/)
- [Checkstyle GitHub](https://github.com/checkstyle/checkstyle)

セットアップ手順:
1. Maven/Gradle プラグインまたは CLI を導入する。
2. チーム規約に沿った `checkstyle.xml` を作成する。
3. ローカル実行と CI 実行の両方で同じ設定を適用する。

## 基本的な使い方

1. まず標準ルールをベースに最小構成で開始する。
2. プロジェクト事情に合わせて必要ルールのみ調整する。
3. ビルド時に Checkstyle を必須実行して違反を検出する。
4. 違反の例外運用は理由を残して管理する。

最小コマンド:
- Maven 実行: `mvn checkstyle:check`
- Gradle 実行: `./gradlew checkstyleMain`

## メリット

- コード規約の自動徹底ができる
- レビュー負荷を削減できる
- 品質基準をチームで統一しやすい
- CI で継続運用しやすい

## デメリット

- 過剰ルールは開発速度を下げる
- 既存コード導入時に違反が大量発生しやすい
- ルール保守に継続的な見直しが必要

## 他ツールとの比較

| ツール | 主な用途 | 特徴 |
|------|------|------|
| Checkstyle | Java 規約検証 | コーディング規約特化 |
| SpotBugs | Java バグ検出 | 不具合パターン検出に強い |
| PMD | Java 静的解析 | 設計・複雑度観点を含む |
| SonarQube | 品質プラットフォーム | 多言語横断で可視化可能 |

## ベストプラクティス

### 1. ルールは段階導入

- 重大ルールから適用する
- 開発チームの負担を見ながら拡張する

### 2. 例外を可視化

- suppress は最小限にする
- 例外理由を記録して棚卸しする

### 3. CI で強制する

- ローカルだけでなく CI でも必須化する
- ルール違反をリリース前に解消する

## 公式ドキュメント

- 公式: https://checkstyle.org/
- GitHub: https://github.com/checkstyle/checkstyle
- ドキュメント: https://checkstyle.org/documentation.html

## まとめ

1. **自動化** : Checkstyle は Java 規約遵守を自動化する基盤。
2. **段階性** : ルール設計は段階導入が運用安定に有効。
3. **統制力** : CI 強制と例外管理の明確化が成功要因。
