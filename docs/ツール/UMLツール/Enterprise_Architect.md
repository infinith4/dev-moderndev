# Enterprise Architect

## 概要

Enterprise Architect（EA）は、Sparx Systemsが提供するUMLモデリングツールで、ユースケース図、クラス図、シーケンス図など、UMLの全図表タイプに対応しています。エンタープライズレベルの要件管理、トレーサビリティ管理、コード生成機能を備えた本格的なモデリングツールです。

### 主な特徴

- **UML完全対応**: UML 2.5の全ダイアグラムタイプに対応
- **コード生成可能**: モデルからJava、C#、Python等のコードを自動生成
- **トレーサビリティ管理**: 要件から設計、実装までの追跡可能性を管理
- **買い切りライセンス**: サブスクリプションではなく、買い切り型ライセンス
- **エンタープライズ実績**: 大規模プロジェクトでの採用実績が豊富

### 料金プラン

- **Desktop Edition**: $159（買い切り、個人・小規模チーム向け）
- **Professional Edition**: $339（買い切り、拡張機能付き）
- **Corporate Edition**: $449（買い切り、企業向け、高度な協業機能）
- **Unified Edition**: $799（買い切り、全機能搭載）

### メリット・デメリット

**メリット**
- UML 2.5に完全準拠し、厳密なUMLモデリングが可能
- モデルからコード生成、コードからモデル逆生成が可能
- 要件管理とトレーサビリティ機能により、要件から実装までの追跡が容易
- 買い切りライセンスのため、長期的にはコストメリットあり
- エンタープライズ環境での実績が豊富

**デメリット**
- UIが古く、現代的なツールに比べると使いづらい
- 学習曲線が急で、習得に時間がかかる
- Windows中心の設計（MacやLinux版もあるが機能制限あり）
- クラウド協業機能が弱い

## 利用方法

### 1. インストール

1. [Sparx Systems公式サイト](https://sparxsystems.com/)から評価版またはフルバージョンをダウンロード
2. インストーラーを実行してセットアップ
3. ライセンスキーを入力（評価版の場合は30日間の試用）
4. アプリケーションを起動

### 2. プロジェクトの作成

1. Enterprise Architectを起動
2. 「Create New Project」を選択
3. プロジェクト名を入力（例: "ECサイト要件定義"）
4. 保存場所とファイル形式を選択
   - **EAP/EAPX**: スタンドアロンファイル
   - **Cloud**: クラウドリポジトリ
   - **Database**: データベース（SQL Server、MySQL等）
5. 「Create」をクリック

### 3. ユースケースダイアグラムの作成

#### モデル構造の準備

1. 左側の「Project Browser」で右クリック→「Add」→「Package」
2. パッケージ名を入力（例: "ユースケースモデル"）
3. パッケージを右クリック→「Add Diagram」→「Use Case」を選択
4. ダイアグラム名を入力（例: "ECサイト ユースケース図"）

#### ツールボックスの利用

Enterprise Architectのツールボックスには、以下のユースケース図要素があります：

- **Actor**: アクター（システムを利用する外部エンティティ）
- **Use Case**: ユースケース（システムが提供する機能）
- **Association**: 関連（アクターとユースケースの関係）
- **Include**: インクルード関係（必須の関係）
- **Extend**: エクステンド関係（条件付きの関係）
- **Generalization**: 汎化関係（継承）
- **System Boundary**: システム境界

### 4. アクターとユースケースの配置

#### アクターの配置

1. ツールボックスから「Actor」を選択
2. ダイアグラム上でクリックして配置
3. アクター名を入力（例: "顧客"、"管理者"、"配送業者"）

#### ユースケースの配置

1. ツールボックスから「Use Case」を選択
2. ダイアグラム上でクリックして配置
3. ユースケース名を入力（例: "商品を検索する"、"注文する"）

#### システム境界の追加

1. ツールボックスから「System Boundary」を選択
2. ユースケースを囲むようにドラッグして配置
3. システム名を入力（例: "ECサイトシステム"）

### 5. 関連線の設定

#### アクターとユースケースの関連

1. ツールボックスから「Association」を選択
2. アクターをクリック
3. 関連するユースケースまでドラッグして接続

#### Include関係

1. ツールボックスから「Include」を選択
2. 呼び出し元のユースケースをクリック
3. 呼び出し先のユースケースまでドラッグ
4. 自動的に«include»ステレオタイプが付与される

#### Extend関係

1. ツールボックスから「Extend」を選択
2. 拡張先のユースケースをクリック
3. 基本ユースケースまでドラッグ
4. 自動的に«extend»ステレオタイプが付与される

### 6. ユースケース図の具体例

**例: ECサイトのユースケース図**

#### アクター
- **顧客**: ECサイトで商品を購入するエンドユーザー
- **管理者**: 商品やユーザーを管理する管理者
- **配送業者**: 商品を配送する外部システム

#### ユースケース（顧客向け）
- **商品を検索する**: 商品カタログから商品を検索
- **商品詳細を閲覧する**: 商品の詳細情報を閲覧
- **カートに追加する**: 商品をショッピングカートに追加
- **注文する**: 注文を確定する
  - **«include» ログイン**: 注文時に必須のログイン処理
  - **«include» 支払い処理**: 注文時に必須の支払い処理
  - **«extend» クーポン適用**: 条件により適用されるクーポン処理

#### ユースケース（管理者向け）
- **商品を登録する**: 新規商品を登録
- **在庫を管理する**: 在庫数を管理
- **注文を管理する**: 注文状況を確認・管理

#### 作成手順

1. アクター「顧客」「管理者」「配送業者」を配置
2. システム境界「ECサイトシステム」を配置
3. 境界内にユースケースを配置
   - 商品を検索する
   - 商品詳細を閲覧する
   - カートに追加する
   - 注文する
   - ログイン
   - 支払い処理
   - クーポン適用
   - 商品を登録する
   - 在庫を管理する
   - 注文を管理する
4. アクター「顧客」から以下のユースケースへ関連線を引く
   - 商品を検索する
   - 商品詳細を閲覧する
   - カートに追加する
   - 注文する
5. 「注文する」から「ログイン」へ«include»関係を設定
6. 「注文する」から「支払い処理」へ«include»関係を設定
7. 「クーポン適用」から「注文する」へ«extend»関係を設定
8. アクター「管理者」から以下のユースケースへ関連線を引く
   - 商品を登録する
   - 在庫を管理する
   - 注文を管理する

### 7. ユースケース詳細記述の追加

Enterprise Architectでは、ユースケースに詳細な記述を追加できます。

1. ユースケースをダブルクリックして「Properties」ダイアログを開く
2. 「Notes」タブに以下の情報を記述:
   - **概要**: ユースケースの目的
   - **事前条件**: ユースケース実行前に満たすべき条件
   - **事後条件**: ユースケース実行後の状態
   - **基本フロー**: 正常系の処理手順
   - **代替フロー**: 例外系の処理手順
3. 「Requirements」タブで要件を関連付け
4. 「Scenarios」タブでシナリオを追加

#### ユースケース記述の例: 「注文する」

```
【概要】
顧客がショッピングカートの商品を注文し、支払い処理を完了する。

【事前条件】
- 顧客がログイン済みである
- ショッピングカートに1つ以上の商品が入っている
- 配送先住所が登録されている

【事後条件】
- 注文が確定し、注文番号が発行される
- 在庫が減少する
- 顧客に注文確認メールが送信される

【基本フロー】
1. 顧客がカートを確認する
2. 配送先住所を選択する
3. 支払い方法を選択する（クレジットカード/代引き/銀行振込）
4. 注文内容を確認する
5. 「注文確定」ボタンをクリックする
6. システムが支払い処理を実行する
7. システムが注文を確定し、注文番号を発行する
8. システムが注文確認メールを送信する
9. システムが注文完了画面を表示する

【代替フロー】
- 支払い処理が失敗した場合、エラーメッセージを表示し、手順3に戻る
- 在庫が不足している場合、該当商品をカートから削除し、手順1に戻る
```

### 8. トレーサビリティの設定

Enterprise Architectの強力な機能の一つが、要件トレーサビリティです。

1. 「Project Browser」で「Requirements」パッケージを作成
2. 要件を「Requirement」要素として登録
3. ユースケースと要件を「Trace」関係で接続
4. 「Relationship Matrix」で要件とユースケースの対応表を確認

### 9. ドキュメント生成

1. 「Publish」→「Generate Documentation」を選択
2. テンプレートを選択（RTF、HTML、PDF等）
3. 含める要素を選択（ダイアグラム、要素詳細、関係など）
4. 「Generate」をクリック

出力例:
- ユースケース図（画像）
- ユースケース一覧表
- 各ユースケースの詳細記述
- アクター一覧

### 10. コード生成（拡張機能）

Enterprise Architectでは、ユースケースから骨格コードを生成できます。

1. ユースケースを右クリック→「Generate Code」
2. ターゲット言語を選択（Java、C#、Python等）
3. パッケージ構造とクラス名を設定
4. 「Generate」をクリック

生成されるコード例（Java）:
```java
public class 注文処理 {
    /**
     * 顧客がショッピングカートの商品を注文し、支払い処理を完了する
     */
    public void 注文する() {
        // TODO: ユースケース「注文する」の実装
    }
}
```

### 11. チーム協業

#### クラウドリポジトリの利用

1. 「Configure」→「Model」→「Cloud Connections」
2. クラウドサーバーを設定（Sparx Cloud、Azure、AWS等）
3. プロジェクトをクラウドに発行
4. チームメンバーに共有リンクを送信

#### バージョン管理統合

1. 「Configure」→「Model」→「Version Control」
2. Git、SVN、TFS等のリポジトリを設定
3. モデルをバージョン管理下に配置

## 公式ドキュメント

- **公式サイト**: [Sparx Systems](https://sparxsystems.com/)
- **公式チュートリアル**: [Enterprise Architect Tutorials](https://sparxsystems.com/resources/tutorials/)
- **ユースケースダイアグラムガイド**: [Use Case Diagrams](https://sparxsystems.com/resources/tutorials/uml2/use-case-diagram.html)
- **ユーザーガイド**: [Enterprise Architect User Guide](https://sparxsystems.com/enterprise_architect_user_guide/15.2/)
- **ビデオチュートリアル**: [YouTube Channel](https://www.youtube.com/user/SparxSystems)

## 関連リンク

- [UML 2.5 仕様書（OMG公式）](https://www.omg.org/spec/UML/)
- [Sparxコミュニティ](https://sparxsystems.com/resources/forums/)
- [Enterprise Architect無料評価版](https://sparxsystems.com/products/ea/trial/)
