# Litmus

## 概要

Litmus は Kubernetes 向けのカオスエンジニアリングプラットフォームである。障害注入と実験管理を通じて、アプリケーションやインフラの耐障害性を検証し、運用改善に繋げられる。

## 料金

| プラン | 内容 |
|------|------|
| OSS 版 | 無料（Apache License 2.0） |
| 補足 | 実験対象環境と監視基盤の運用コストは別途発生 |

## 主な特徴

| 項目 | 内容 |
|------|------|
| Kubernetes 特化 | CRD ベースで実験を管理 |
| 実験テンプレート | 主要障害シナリオを素早く適用 |
| ワークフロー | 実験の順序と条件を制御可能 |
| 可視化 | 実験結果を追跡しやすい |
| GitOps 連携 | 実験定義をコード管理しやすい |

## 主な機能

### 障害実験機能

| 機能 | 説明 |
|------|------|
| Pod 障害注入 | 停止、削除、再起動の再現 |
| ネットワーク障害 | 遅延、ロス、分断の再現 |
| リソース負荷 | CPU/メモリ負荷試験 |
| スケジュール実験 | 定期実験を自動化 |

### 実験管理機能

| 機能 | 説明 |
|------|------|
| シナリオ管理 | 実験手順を再利用可能 |
| 対象制御 | namespace/label で範囲指定 |
| 中断制御 | 問題発生時に停止可能 |
| 結果記録 | 実験ログと評価を蓄積 |

### 運用強化機能

| 機能 | 説明 |
|------|------|
| 監視連携 | SLO/SLI と合わせた評価 |
| 失敗解析 | 復旧時間・影響範囲を可視化 |
| 改善サイクル | 実験結果を運用改善へ反映 |
| 復旧訓練 | 障害対応手順を実地検証 |

## インストールとセットアップ

公式URL:
- [Litmus 公式](https://litmuschaos.io/)
- [Litmus Docs](https://docs.litmuschaos.io/)
- [Litmus GitHub](https://github.com/litmuschaos/litmus)

セットアップの要点:
1. Litmus を対象クラスタへ導入する。
2. 実験対象サービスと許容影響範囲を定義する。
3. 監視アラートとロールバック手順を事前整備する。

## 基本的な使い方

1. 低リスク領域で単一障害シナリオから開始する。
2. 実験中は SLO 指標とアラートを監視する。
3. 終了後に影響範囲と復旧時間を記録する。
4. 発見事項を運用手順や設定改善へ反映する。

最小コマンド:
- インストール例: `kubectl apply -f https://litmuschaos.github.io/litmus/litmus-operator-v3.0.0.yaml`

## メリット

- 障害耐性を定量的に評価しやすい
- 復旧手順の実効性を検証できる
- カオス実験を継続運用しやすい
- Kubernetes 運用の信頼性向上に寄与する

## デメリット

- 実験設計を誤ると影響が大きくなる
- 監視・復旧体制が未整備だと危険
- 組織運用ルールなしでは継続しにくい

## 他ツールとの比較

| ツール | 主な対象 | 特徴 |
|------|------|------|
| Litmus | Kubernetes カオス実験 | 実験管理と運用サイクルに強い |
| Chaos Mesh | Kubernetes カオス実験 | CRD ベースで柔軟な注入が可能 |
| Gremlin | カオス実験（商用） | 管理機能とサポートが充実 |
| k6 | 負荷試験 | カオスではなく性能評価に特化 |

## ベストプラクティス

### 1. 実験範囲を段階拡大

- 単一サービスから開始する
- 影響を確認しながら範囲を広げる

### 2. 指標で評価

- 事前に評価指標（SLO、MTTR）を決める
- 実験結果を数値で比較する

### 3. 改善アクションを固定

- 実験後レビューを必須化する
- 改善完了までタスク管理する

## 公式ドキュメント

- 公式サイト: https://litmuschaos.io/
- ドキュメント: https://docs.litmuschaos.io/
- GitHub: https://github.com/litmuschaos/litmus

## まとめ

1. ** 継続実験 ** : Kubernetes 環境での障害実験を継続運用するための有効な基盤である。
2. ** 復旧性 ** : 復旧手順の実効性を検証し、運用サイクルを通じて信頼性を向上できる。
3. ** 定量評価 ** : SLO や MTTR を指標にして障害耐性を定量的に評価しやすい。
