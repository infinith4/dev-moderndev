# Rancher

## 概要

Rancher は、複数 Kubernetes クラスタを一元管理するためのプラットフォームである。オンプレミス、クラウド、エッジに分散したクラスタを単一UIで運用し、アクセス制御、アプリ配布、監視を統合できる。

## 料金

| プラン | 内容 |
|------|------|
| OSS 版 | 無料（Rancher Manager / 関連OSSを利用可能） |
| 商用サポート | SUSE サブスクリプションで運用支援やエンタープライズ機能を拡張 |

## 主な特徴

| 項目 | 内容 |
|------|------|
| マルチクラスタ管理 | 複数クラスタを単一コンソールで管理 |
| ディストリ統合 | RKE2、K3s、既存 EKS/GKE/AKS を扱える |
| RBAC 統制 | 組織・プロジェクト単位で権限を分離 |
| アプリ配布 | Helm カタログや GitOps で配布を標準化 |
| 運用可視化 | 監視、ログ、アラート連携を統合しやすい |
| マルチテナント | チーム単位の分離運用を実施しやすい |

## 主な機能

### クラスタ管理機能

| 機能 | 説明 |
|------|------|
| クラスタ作成 | 新規 Kubernetes クラスタを作成 |
| クラスタ取込 | 既存クラスタを Rancher 配下へ登録 |
| アップグレード管理 | Kubernetes バージョン更新を計画実施 |
| ノード管理 | 追加、削除、ラベル管理をGUIで実行 |

### アクセス・セキュリティ機能

| 機能 | 説明 |
|------|------|
| 認証連携 | LDAP、AD、SAML、OIDC などに対応 |
| RBAC | グローバル/クラスタ/プロジェクト権限を制御 |
| 監査ログ | 操作履歴の追跡を支援 |
| ポリシー運用 | 組織ルールに沿った運用統制を実施 |

### アプリ運用機能

| 機能 | 説明 |
|------|------|
| Helm 管理 | チャート導入と更新を一元管理 |
| GitOps 連携 | 宣言的デプロイで環境差分を抑制 |
| プロジェクト分離 | Namespace 単位で利用領域を分離 |
| 監視連携 | Prometheus/Grafana 連携で可視化 |

## インストールとセットアップ

公式URL:
- [Rancher 公式サイト](https://www.rancher.com/)
- [Rancher Documentation](https://ranchermanager.docs.rancher.com/)
- [Rancher GitHub](https://github.com/rancher/rancher)
- [RKE2 Documentation](https://docs.rke2.io/)

セットアップの要点:
1. 導入方式（Docker 単体、既存Kubernetes上の Helm）を決める。
2. TLS 証明書と DNS 名を準備して管理UIを公開する。
3. 初期管理者作成後、認証基盤と RBAC を設定する。
4. 管理対象クラスタを作成またはインポートする。

## 基本的な使い方

1. Rancher 管理画面へログインし、管理対象クラスタを登録する。
2. プロジェクトとネームスペースを作成して責務分離する。
3. RBAC を設定し、チームごとのアクセス範囲を定義する。
4. Helm/GitOps でアプリを配布し、変更を運用手順化する。
5. 監視ダッシュボードとアラートを有効化して継続監視する。

最小運用例:
- 管理対象: 開発クラスタ + 本番クラスタ
- 権限: `platform-admin` / `project-owner` / `read-only`

## メリット

- 複数クラスタを1つの運用基盤で管理しやすい。
- 認証・権限・配布の統制を横断的に適用しやすい。
- GUI と宣言的運用を組み合わせて保守しやすい。

## デメリット

- 基盤構築（証明書、DNS、権限設計）に初期工数がかかる。
- 運用対象が増えるほど監視・更新ポリシー整備が必要。
- GUI 依存運用に寄ると IaC との整合管理が難しくなる。

## Rancher での使用

Rancher は、複数クラスタ運用の「管理面」を統合する用途で効果が高い。クラスタ自体の実行基盤（RKE2/EKS/GKE/AKS）と組み合わせ、ガバナンスと配布の標準化を進めると運用負荷を下げやすい。

## 他ツールとの比較

| ツール | 主な対象 | 特徴 |
|------|------|------|
| Rancher | マルチクラスタ管理 | GUI中心で統制・運用を一元化 |
| Kubernetes Dashboard | 単一クラスタ可視化 | 軽量だが統合管理機能は限定的 |
| OpenShift | エンタープライズ基盤 | 統合機能が広いが導入前提が重い |
| Lens | 開発者向け閲覧 | 操作性は高いが組織統制は弱い |

## ベストプラクティス

### 1. 権限モデルを先に設計

- グローバル、クラスタ、プロジェクトの権限境界を定義する。
- 管理者権限の配布を最小化する。

### 2. クラスタ運用を標準化

- バージョンアップ方針とメンテナンス周期を固定化する。
- 監視・バックアップ・復旧手順をRunbook化する。

### 3. 配布方式を統一

- Helm または GitOps の主運用方式を決める。
- 変更はPRベースで審査し、環境差分を残さない。

## 公式ドキュメント

- 公式サイト: https://www.rancher.com/
- Rancher Docs: https://ranchermanager.docs.rancher.com/
- GitHub: https://github.com/rancher/rancher
- RKE2 Docs: https://docs.rke2.io/

## まとめ

1. ** 一元管理 ** : 複数 Kubernetes クラスタを一元管理し、運用統制を進めやすい。
2. ** 統制力 ** : RBAC と配布標準化により、チーム横断の管理負荷を下げやすい。
3. ** 安定運用 ** : 導入初期に権限・監視・更新方針を固めると、長期運用を安定化しやすい。
