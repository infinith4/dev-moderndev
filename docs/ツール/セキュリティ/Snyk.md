# Snyk

## æ¦‚è¦

Snykã¯ã€é–‹ç™ºè€…å‘ã‘ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã€ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ä¾å­˜é–¢ä¿‚ã€ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã€Infrastructure as Codeï¼ˆIaCï¼‰ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã®è„†å¼±æ€§ã‚’æ¤œå‡ºãƒ»ä¿®æ­£ã—ã¾ã™ã€‚ã€Œé–‹ç™ºè€…ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€ã‚’æ²ã’ã€IDEã‚„CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã«çµ±åˆã—ã¦ã€é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ä¸­ã§ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å•é¡Œã‚’æ—©æœŸç™ºè¦‹ã§ãã¾ã™ã€‚è‡ªå‹•ä¿®æ­£æ©Ÿèƒ½ã«ã‚ˆã‚Šã€è„†å¼±æ€§ã®ä¿®æ­£ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

## æ–™é‡‘ãƒ—ãƒ©ãƒ³

| ãƒ—ãƒ©ãƒ³ | æ–™é‡‘ | ç‰¹å¾´ |
|-------|------|------|
| **Free** | ğŸŸ¢ ç„¡æ–™ | å€‹äººãƒ»å°è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€æœˆ200ãƒ†ã‚¹ãƒˆã€1ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ |
| **Team** | ğŸ’° $52/developer/æœˆ | æœˆ1,000ãƒ†ã‚¹ãƒˆã€ç„¡åˆ¶é™ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€Slackã‚µãƒãƒ¼ãƒˆ |
| **Business** | ğŸ’° $152/developer/æœˆ | ç„¡åˆ¶é™ãƒ†ã‚¹ãƒˆã€SSOã€ã‚«ã‚¹ã‚¿ãƒ ãƒ«ãƒ¼ãƒ«ã€å„ªå…ˆã‚µãƒãƒ¼ãƒˆ |
| **Enterprise** | ğŸ’° è¦‹ç©ã‚‚ã‚Šå¿…è¦ | ã‚ªãƒ³ãƒ—ãƒ¬ãƒŸã‚¹ã€å°‚ç”¨ã‚µãƒãƒ¼ãƒˆã€SLAã€é«˜åº¦ãªçµ±åˆ |

**æ³¨æ„**: ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ç„¡æ–™ãƒ—ãƒ©ãƒ³ã§ç„¡åˆ¶é™ã«åˆ©ç”¨å¯èƒ½ã€‚å€‹äººé–‹ç™ºè€…å‘ã‘ã«ã‚‚ç„¡æ–™æ ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚

## ãƒ¡ãƒªãƒƒãƒˆãƒ»ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ

### ãƒ¡ãƒªãƒƒãƒˆ
- âœ… **é–‹ç™ºè€…ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼**: IDEã€Gitã€CI/CDã«çµ±åˆã€é–‹ç™ºãƒ•ãƒ­ãƒ¼ã‚’å¦¨ã’ãªã„
- âœ… **åŒ…æ‹¬çš„ã‚¹ã‚­ãƒ£ãƒ³**: ä¾å­˜é–¢ä¿‚ã€ã‚³ãƒ³ãƒ†ãƒŠã€IaCã€ã‚³ãƒ¼ãƒ‰ã®4é ˜åŸŸã‚’ã‚«ãƒãƒ¼
- âœ… **è‡ªå‹•ä¿®æ­£**: è„†å¼±æ€§ã®ä¿®æ­£PRã‚’è‡ªå‹•ç”Ÿæˆ
- âœ… **è©³ç´°ãªè„†å¼±æ€§æƒ…å ±**: CVEã€CWEã€ä¿®æ­£æ–¹æ³•ã‚’æä¾›
- âœ… **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–**: æ–°ã—ã„è„†å¼±æ€§ã‚’ç¶™ç¶šçš„ã«ç›£è¦–
- âœ… **å¤šè¨€èªå¯¾å¿œ**: JavaScriptã€Javaã€Pythonã€Goã€Rubyã€PHPã€.NETç­‰
- âœ… **ç„¡æ–™æ **: ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ»å€‹äººé–‹ç™ºè€…å‘ã‘ã«ç„¡æ–™æä¾›
- âœ… **ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ãƒã‚§ãƒƒã‚¯**: ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ç¢ºèª

### ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ
- âŒ **æ–™é‡‘**: å•†ç”¨åˆ©ç”¨ã§ã¯æ¯”è¼ƒçš„é«˜é¡
- âŒ **èª¤æ¤œçŸ¥**: ç‰¹ã«å¤ã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§èª¤æ¤œçŸ¥ãŒç™ºç”Ÿã™ã‚‹å ´åˆã‚‚
- âŒ **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¾å­˜**: ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã®ãŸã‚å¸¸æ™‚æ¥ç¶šãŒå¿…è¦
- âŒ **ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼**: ã‚³ãƒ¼ãƒ‰ã‚’Snykã‚¯ãƒ©ã‚¦ãƒ‰ã«é€ä¿¡ï¼ˆã‚ªãƒ³ãƒ—ãƒ¬ãƒŸã‚¹ç‰ˆã§è§£æ±ºå¯èƒ½ï¼‰
- âŒ **å­¦ç¿’ã‚³ã‚¹ãƒˆ**: é«˜åº¦ãªæ©Ÿèƒ½ã‚’ä½¿ã„ã“ãªã™ã«ã¯æ™‚é–“ãŒå¿…è¦

## åˆ©ç”¨ã§ãã‚‹é–‹ç™ºå·¥ç¨‹

| é–‹ç™ºå·¥ç¨‹ | æ´»ç”¨ã‚·ãƒ¼ãƒ³ | ä¸»ãªæˆæœç‰© |
|---------|----------|-----------|
| **7. å®Ÿè£…ï¼ˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰** | ä¾å­˜é–¢ä¿‚ã®è„†å¼±æ€§ãƒã‚§ãƒƒã‚¯ã€ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ç¢ºèª | è„†å¼±æ€§ãƒ¬ãƒãƒ¼ãƒˆã€ä¿®æ­£PR |
| **8. ã‚¤ãƒ³ãƒ•ãƒ©æ§‹ç¯‰** | IaCã‚³ãƒ¼ãƒ‰ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ | IaCã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ãƒãƒ¼ãƒˆ |
| **8-1. CI/CD** | ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ã®è‡ªå‹•ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ | CI/CDã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚²ãƒ¼ãƒˆ |
| **10. ãƒ†ã‚¹ãƒˆï¼ˆã‚¤ãƒ³ãƒ•ãƒ©ï¼‰** | ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã®è„†å¼±æ€§ã‚¹ã‚­ãƒ£ãƒ³ | ã‚³ãƒ³ãƒ†ãƒŠã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ãƒãƒ¼ãƒˆ |
| **11. å°å…¥** | æœ¬ç•ªç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤å‰ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ¤œè¨¼ | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»çµæœ |

## åŸºæœ¬çš„ãªåˆ©ç”¨æ–¹æ³•

### 1. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# npmï¼ˆã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼‰
npm install -g snyk

# Homebrew (macOS)
brew tap snyk/tap
brew install snyk

# Scoop (Windows)
scoop bucket add snyk https://github.com/snyk/scoop-snyk
scoop install snyk

# Docker
docker pull snyk/snyk

# èªè¨¼
snyk auth

# ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
snyk --version
```

### 2. åŸºæœ¬çš„ãªã‚¹ã‚­ãƒ£ãƒ³

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¾å­˜é–¢ä¿‚ã‚’ã‚¹ã‚­ãƒ£ãƒ³
snyk test

# è©³ç´°æƒ…å ±ä»˜ãã‚¹ã‚­ãƒ£ãƒ³
snyk test --severity-threshold=high

# JSONå½¢å¼ã§å‡ºåŠ›
snyk test --json

# HTMLãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
snyk test --json | snyk-to-html -o snyk-report.html

# ç¶™ç¶šçš„ç›£è¦–ï¼ˆSnykã‚¯ãƒ©ã‚¦ãƒ‰ã«ç™»éŒ²ï¼‰
snyk monitor

# è‡ªå‹•ä¿®æ­£å¯èƒ½ãªè„†å¼±æ€§ã‚’ç¢ºèª
snyk wizard

# Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®ã‚¹ã‚­ãƒ£ãƒ³
snyk container test docker-image:tag

# IaCã‚³ãƒ¼ãƒ‰ã®ã‚¹ã‚­ãƒ£ãƒ³ï¼ˆTerraformã€CloudFormationç­‰ï¼‰
snyk iac test terraform.tf

# ã‚³ãƒ¼ãƒ‰ã®è„†å¼±æ€§ã‚¹ã‚­ãƒ£ãƒ³
snyk code test
```

### 3. IDEçµ±åˆ

```bash
# VS Codeæ‹¡å¼µæ©Ÿèƒ½
# Marketplace ã‹ã‚‰ "Snyk Security" ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

# IntelliJ IDEA / PyCharmç­‰
# Plugins â†’ "Snyk Vulnerability Scanner" ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

# è¨­å®š
# Settings â†’ Snyk â†’ Authenticate â†’ ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å…¥åŠ›
```

## å·¥ç¨‹åˆ¥ã®æ´»ç”¨æ–¹æ³•

### 7. å®Ÿè£…ï¼ˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ã§ã®æ´»ç”¨

**ç›®çš„**: ä¾å­˜é–¢ä¿‚ã®è„†å¼±æ€§ã‚’æ—©æœŸç™ºè¦‹ã€ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ç¢ºèª

**æ´»ç”¨æ–¹æ³•**:
- package.jsonã€requirements.txtç­‰ã®ä¾å­˜é–¢ä¿‚ã‚¹ã‚­ãƒ£ãƒ³
- è„†å¼±æ€§ã®è‡ªå‹•ä¿®æ­£
- ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ãƒãƒªã‚·ãƒ¼é•åã®æ¤œå‡º
- IDEã§ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

**å®Ÿè£…ä¾‹ï¼ˆNode.jsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼‰**:
```bash
# ä¾å­˜é–¢ä¿‚ã®ã‚¹ã‚­ãƒ£ãƒ³
cd /path/to/your/project
snyk test

# å‡ºåŠ›ä¾‹:
# Testing /path/to/your/project...
#
# âœ— High severity vulnerability found in lodash
#   Description: Prototype Pollution
#   Info: https://snyk.io/vuln/SNYK-JS-LODASH-590103
#   Introduced through: lodash@4.17.15
#   From: lodash@4.17.15
#   Fixed in: 4.17.19
#
# Organization: my-org
# Tested 245 dependencies for known issues, found 3 issues, 3 vulnerable paths.

# è‡ªå‹•ä¿®æ­£ã‚’è©¦è¡Œ
snyk wizard

# ä¿®æ­£å¯èƒ½ãªè„†å¼±æ€§ã‚’è‡ªå‹•ã§ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
snyk fix

# ç‰¹å®šã®è„†å¼±æ€§ã‚’ç„¡è¦–ï¼ˆèª¤æ¤œçŸ¥ã®å ´åˆï¼‰
snyk ignore --id=SNYK-JS-LODASH-590103 --reason="Not applicable to our use case"
```

**CI/CDçµ±åˆï¼ˆGitHub Actionsï¼‰**:
```yaml
# .github/workflows/snyk-security.yml
name: Snyk Security Scan

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  security:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: Install dependencies
        run: npm ci

      - name: Run Snyk to check for vulnerabilities
        uses: snyk/actions/node@master
        env:
          SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}
        with:
          args: --severity-threshold=high

      - name: Upload Snyk report
        if: always()
        uses: github/codeql-action/upload-sarif@v2
        with:
          sarif_file: snyk.sarif
```

**package.jsonã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¿½åŠ **:
```json
{
  "scripts": {
    "security:check": "snyk test",
    "security:monitor": "snyk monitor",
    "security:fix": "snyk wizard"
  },
  "snyk": true
}
```

**Python ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®ä½¿ç”¨**:
```bash
# Pythonãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¹ã‚­ãƒ£ãƒ³
cd /path/to/python/project
pip install -r requirements.txt

snyk test --file=requirements.txt

# Pipfileã®ã‚¹ã‚­ãƒ£ãƒ³
snyk test --file=Pipfile

# ç‰¹å®šã®é‡è¦åº¦ä»¥ä¸Šã®ã¿å ±å‘Š
snyk test --severity-threshold=critical

# ä¿®æ­£å¯èƒ½ãªè„†å¼±æ€§ã‚’è‡ªå‹•ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
snyk fix
```

---

### 8. ã‚¤ãƒ³ãƒ•ãƒ©æ§‹ç¯‰ã§ã®æ´»ç”¨

**ç›®çš„**: Infrastructure as Codeã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å•é¡Œæ¤œå‡º

**æ´»ç”¨æ–¹æ³•**:
- Terraformã€CloudFormationã€Kubernetes YAMLã®ã‚¹ã‚­ãƒ£ãƒ³
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹é•åã®æ¤œå‡º
- ãƒªã‚½ãƒ¼ã‚¹è¨­å®šã®èª¤ã‚Šã‚’æ—©æœŸç™ºè¦‹

**å®Ÿè£…ä¾‹ï¼ˆTerraformã‚¹ã‚­ãƒ£ãƒ³ï¼‰**:
```bash
# Terraformãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¹ã‚­ãƒ£ãƒ³
snyk iac test terraform/

# å‡ºåŠ›ä¾‹:
# Testing main.tf...
#
# Infrastructure as code issues:
#   âœ— S3 bucket is not encrypted [High Severity]
#     Path: resource > aws_s3_bucket > my_bucket > encryption
#     File: main.tf:10-15
#
#   âœ— Security group allows ingress from 0.0.0.0/0 [Medium Severity]
#     Path: resource > aws_security_group > my_sg > ingress
#     File: main.tf:30-35

# JSONå½¢å¼ã§å‡ºåŠ›
snyk iac test terraform/ --json > iac-report.json

# SARIFãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§å‡ºåŠ›ï¼ˆGitHubé€£æºç”¨ï¼‰
snyk iac test terraform/ --sarif > snyk-iac.sarif

# ç‰¹å®šã®ãƒ«ãƒ¼ãƒ«ã®ã¿ãƒã‚§ãƒƒã‚¯
snyk iac test --rules=SNYK-CC-TF-1,SNYK-CC-TF-2
```

**Kubernetes YAMLã®ã‚¹ã‚­ãƒ£ãƒ³**:
```bash
# Kubernetesãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®ã‚¹ã‚­ãƒ£ãƒ³
snyk iac test k8s/deployment.yaml

# å‡ºåŠ›ä¾‹:
# âœ— Container is running without root user control [High Severity]
#   Path: spec > containers[0] > securityContext > runAsNonRoot
#
# âœ— Container is running without AppArmor profile [Low Severity]
#   Path: metadata > annotations > container.apparmor.security.beta.kubernetes.io
```

**CI/CDçµ±åˆï¼ˆGitLab CI/CDï¼‰**:
```yaml
# .gitlab-ci.yml
stages:
  - security

snyk-iac-scan:
  stage: security
  image: snyk/snyk:node
  script:
    - snyk auth $SNYK_TOKEN
    - snyk iac test terraform/ --sarif-file-output=snyk-iac.sarif
  artifacts:
    reports:
      sast: snyk-iac.sarif
  only:
    - main
    - develop
```

---

### 10. ãƒ†ã‚¹ãƒˆï¼ˆã‚¤ãƒ³ãƒ•ãƒ©ï¼‰ã§ã®æ´»ç”¨

**ç›®çš„**: ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã®è„†å¼±æ€§æ¤œå‡º

**æ´»ç”¨æ–¹æ³•**:
- Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®ã‚¹ã‚­ãƒ£ãƒ³
- ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ã®è„†å¼±æ€§ãƒã‚§ãƒƒã‚¯
- ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ¥ã®è„†å¼±æ€§åˆ†æ

**å®Ÿè£…ä¾‹ï¼ˆDockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚¹ã‚­ãƒ£ãƒ³ï¼‰**:
```bash
# Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®ã‚¹ã‚­ãƒ£ãƒ³
snyk container test node:18-alpine

# å‡ºåŠ›ä¾‹:
# Testing node:18-alpine...
#
# âœ— High severity vulnerability found in openssl
#   Package manager: apk
#   Vulnerable module: openssl
#   Introduced through: openssl@3.0.7-r0
#   Fixed in: 3.0.7-r2
#
# Organization: my-org
# Tested node:18-alpine for known issues, found 5 vulnerabilities

# ãƒ­ãƒ¼ã‚«ãƒ«ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ã‚¹ã‚­ãƒ£ãƒ³
docker build -t myapp:latest .
snyk container test myapp:latest

# Dockerfileã‚‚ã‚¹ã‚­ãƒ£ãƒ³
snyk container test myapp:latest --file=Dockerfile

# JSONãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
snyk container test myapp:latest --json > container-report.json

# ç¶™ç¶šç›£è¦–
snyk container monitor myapp:latest
```

**ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ã®æ¨å¥¨**:
```dockerfile
# Dockerfile (Snykæ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³)
FROM node:18-alpine AS builder
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

FROM node:18-alpine
WORKDIR /app
# è„†å¼±æ€§ã®ã‚ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å«ã¾ãªã„æœ¬ç•ªç”¨ã‚¤ãƒ¡ãƒ¼ã‚¸
COPY --from=builder /app/node_modules ./node_modules
COPY . .
USER node
CMD ["node", "server.js"]
```

**CI/CDã§ã®ã‚³ãƒ³ãƒ†ãƒŠã‚¹ã‚­ãƒ£ãƒ³ï¼ˆJenkinsï¼‰**:
```groovy
// Jenkinsfile
pipeline {
    agent any

    stages {
        stage('Build Docker Image') {
            steps {
                sh 'docker build -t myapp:${BUILD_NUMBER} .'
            }
        }

        stage('Snyk Container Scan') {
            steps {
                script {
                    sh """
                        snyk container test myapp:${BUILD_NUMBER} \
                        --severity-threshold=high \
                        --json > snyk-container-report.json
                    """
                }
            }
        }

        stage('Push to Registry') {
            when {
                expression {
                    // Snykã‚¹ã‚­ãƒ£ãƒ³é€šéæ™‚ã®ã¿ãƒ—ãƒƒã‚·ãƒ¥
                    return currentBuild.result == null || currentBuild.result == 'SUCCESS'
                }
            }
            steps {
                sh 'docker push myapp:${BUILD_NUMBER}'
            }
        }
    }

    post {
        always {
            archiveArtifacts artifacts: 'snyk-container-report.json'
        }
    }
}
```

---

### 11. å°å…¥ã§ã®æ´»ç”¨

**ç›®çš„**: æœ¬ç•ªç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤å‰ã®æœ€çµ‚ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯

**æ´»ç”¨æ–¹æ³•**:
- ãƒ‡ãƒ—ãƒ­ã‚¤ã‚²ãƒ¼ãƒˆã¨ã—ã¦ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯
- æœ¬ç•ªç’°å¢ƒã®ç¶™ç¶šçš„ç›£è¦–
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼ã®å¼·åˆ¶

**å®Ÿè£…ä¾‹ï¼ˆãƒ‡ãƒ—ãƒ­ã‚¤ã‚²ãƒ¼ãƒˆï¼‰**:
```bash
# ãƒ‡ãƒ—ãƒ­ã‚¤å‰ãƒã‚§ãƒƒã‚¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
#!/bin/bash
# deploy-gate.sh

set -e

echo "Running security checks before deployment..."

# ä¾å­˜é–¢ä¿‚ã‚¹ã‚­ãƒ£ãƒ³
echo "1. Checking dependencies..."
snyk test --severity-threshold=critical || {
    echo "Critical vulnerabilities found in dependencies!"
    exit 1
}

# ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚¹ã‚­ãƒ£ãƒ³
echo "2. Checking container image..."
snyk container test myapp:latest --severity-threshold=high || {
    echo "High severity vulnerabilities found in container!"
    exit 1
}

# IaCã‚¹ã‚­ãƒ£ãƒ³
echo "3. Checking infrastructure code..."
snyk iac test terraform/ --severity-threshold=high || {
    echo "Infrastructure security issues found!"
    exit 1
}

echo "All security checks passed! Proceeding with deployment..."
exit 0
```

**Snykãƒãƒªã‚·ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ.snykï¼‰**:
```yaml
# .snyk
# Snyk (https://snyk.io) policy file

version: v1.25.0

# ç„¡è¦–ã™ã‚‹è„†å¼±æ€§
ignore:
  'SNYK-JS-LODASH-590103':
    - '*':
        reason: Not applicable to our use case
        expires: 2025-12-31T00:00:00.000Z

# ãƒ‘ãƒƒãƒé©ç”¨
patch:
  'SNYK-JS-MINIMIST-559764':
    - '*':
        patched: '2024-01-15T10:30:00.000Z'

# ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ãƒãƒªã‚·ãƒ¼
license:
  allowed:
    - MIT
    - Apache-2.0
    - BSD-3-Clause
  disallowed:
    - GPL-3.0
    - AGPL-3.0
```

**ç¶™ç¶šçš„ç›£è¦–ï¼ˆSnyk Monitorï¼‰**:
```bash
# æœ¬ç•ªç’°å¢ƒã®ç¶™ç¶šçš„ç›£è¦–ã‚’æœ‰åŠ¹åŒ–
snyk monitor --project-name=production-app

# ç‰¹å®šã®ã‚¿ã‚°ã§ç›£è¦–
snyk monitor --project-tags=env=production,team=backend

# å®šæœŸå®Ÿè¡Œï¼ˆcronï¼‰
# æ¯æ—¥åˆå‰2æ™‚ã«ã‚¹ã‚­ãƒ£ãƒ³å®Ÿè¡Œ
0 2 * * * cd /path/to/project && snyk monitor
```

## å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [Snyk å…¬å¼ã‚µã‚¤ãƒˆ](https://snyk.io/)
- [Snyk Documentation](https://docs.snyk.io/)
- [Snyk CLI Reference](https://docs.snyk.io/snyk-cli)
- [Snyk API Documentation](https://snyk.docs.apiary.io/)
- [Snyk GitHub Repository](https://github.com/snyk)
- [Snyk Vulnerability Database](https://security.snyk.io/)

## å­¦ç¿’ãƒªã‚½ãƒ¼ã‚¹

### ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«
- [Getting Started with Snyk](https://docs.snyk.io/getting-started)
- [Snyk Learn](https://learn.snyk.io/) - ç„¡æ–™ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å­¦ç¿’ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 
- [Snyk CLI Tutorial](https://docs.snyk.io/snyk-cli/getting-started-with-the-cli)

### æ›¸ç±ãƒ»ã‚³ãƒ¼ã‚¹
- "Securing DevOps" by Julien Vehent (O'Reilly)
- Snyk Academy - å…¬å¼ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚³ãƒ¼ã‚¹

### å‹•ç”»
- [Snyk YouTube Channel](https://www.youtube.com/c/Snyksec)
- [Snyk Tutorial for Beginners](https://www.youtube.com/results?search_query=snyk+tutorial)
- [DevSecOps with Snyk](https://www.youtube.com/results?search_query=devsecops+snyk)

### ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£
- [Snyk Community](https://community.snyk.io/)
- [Snyk GitHub Discussions](https://github.com/snyk/cli/discussions)
- [Stack Overflow - Snyk](https://stackoverflow.com/questions/tagged/snyk)

## é–¢é€£ãƒªãƒ³ã‚¯

### çµ±åˆãƒ„ãƒ¼ãƒ«
- [Snyk for VS Code](https://marketplace.visualstudio.com/items?itemName=snyk-security.snyk-vulnerability-scanner)
- [Snyk for IntelliJ](https://plugins.jetbrains.com/plugin/10972-snyk-vulnerability-scanner)
- [Snyk GitHub Action](https://github.com/snyk/actions)
- [Snyk Jenkins Plugin](https://plugins.jenkins.io/snyk-security-scanner/)

### é–¢é€£ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ„ãƒ¼ãƒ«
- [Dependabot](https://github.com/dependabot) - GitHubä¾å­˜é–¢ä¿‚ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
- [Trivy](https://github.com/aquasecurity/trivy) - ã‚³ãƒ³ãƒ†ãƒŠã‚¹ã‚­ãƒ£ãƒŠãƒ¼
- [Checkov](https://www.checkov.io/) - IaCã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒŠãƒ¼
- [SonarQube](https://www.sonarqube.org/) - ã‚³ãƒ¼ãƒ‰å“è³ªãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
- [DevSecOps Best Practices](https://snyk.io/learn/devsecops/)
- [Container Security Best Practices](https://snyk.io/learn/container-security/)
- [Shift Left Security](https://snyk.io/learn/shift-left-security/)

---

**æœ€çµ‚æ›´æ–°æ—¥**: 2025å¹´11æœˆ30æ—¥
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0
