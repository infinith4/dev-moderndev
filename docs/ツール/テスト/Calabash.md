# Calabash

## æ¦‚è¦

**Calabash**ã¯ã€iOSãƒ»Androidã‚¢ãƒ—ãƒªã®è‡ªå‹•UIãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚Cucumberçµ±åˆã«ã‚ˆã‚Šã€è‡ªç„¶è¨€èªï¼ˆGherkinï¼‰ã§ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ªã‚’è¨˜è¿°ã§ãã€å®Ÿæ©Ÿãƒ»ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã§ã®ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ãƒ†ã‚¹ãƒˆã‚’å®Ÿç¾ã—ã¾ã™ã€‚

## åŸºæœ¬æƒ…å ±

| é …ç›® | å†…å®¹ |
|------|------|
| **é–‹ç™ºå…ƒ** | Xamarinï¼ˆç¾Microsoftï¼‰ |
| **ç¨®åˆ¥** | ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªUIãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |
| **ãƒ©ã‚¤ã‚»ãƒ³ã‚¹** | Eclipse Public License 1.0ï¼ˆã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ï¼‰ |
| **æ–™é‡‘** | ğŸŸ¢ ç„¡æ–™ |
| **å…¬å¼ã‚µã‚¤ãƒˆ** | http://calaba.sh/ |
| **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ** | https://github.com/calabash |

**æ³¨æ„**: Calabashã¯2020å¹´ã«ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹çµ‚äº†ãŒç™ºè¡¨ã•ã‚Œã¾ã—ãŸã€‚å¾Œç¶™ã¨ã—ã¦ã€Xamarin.UITestã€Appiumç­‰ã¸ã®ç§»è¡ŒãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

## ä¸»ãªç‰¹å¾´

### 1. ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 
- **iOS**: calabash-ios
- **Android**: calabash-android
- åŒä¸€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã§ä¸¡ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å®Ÿè¡Œå¯èƒ½

### 2. Cucumberçµ±åˆ
- Gherkinæ§‹æ–‡ï¼ˆGiven-When-Thenï¼‰
- è‡ªç„¶è¨€èªã§ã‚·ãƒŠãƒªã‚ªè¨˜è¿°
- ã‚¹ãƒ†ãƒƒãƒ—å®šç¾©ã®å†åˆ©ç”¨
- ã‚¿ã‚°ã«ã‚ˆã‚‹ã‚·ãƒŠãƒªã‚ªãƒ•ã‚£ãƒ«ã‚¿

### 3. å®Ÿæ©Ÿãƒ»ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼å¯¾å¿œ
- iOS Simulator
- Android Emulator
- å®Ÿãƒ‡ãƒã‚¤ã‚¹ï¼ˆUSBæ¥ç¶šï¼‰
- ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ†ã‚¹ãƒˆã‚µãƒ¼ãƒ“ã‚¹é€£æº

### 4. ãƒšãƒ¼ã‚¸ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³
- ç”»é¢è¦ç´ ã®æŠ½è±¡åŒ–
- ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®ä¿å®ˆæ€§å‘ä¸Š
- å†åˆ©ç”¨å¯èƒ½ãªãƒ˜ãƒ«ãƒ‘ãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰

## ä½¿ã„æ–¹

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

#### Rubyç’°å¢ƒï¼ˆå…±é€šï¼‰

```bash
# Ruby 2.3+ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæ¨å¥¨: rbenvã¾ãŸã¯rvmï¼‰
rbenv install 2.7.0
rbenv global 2.7.0

# Calabash gemã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
gem install calabash-cucumber
```

#### Android ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# calabash-android ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
gem install calabash-android

# APKãƒªã‚µã‚¤ãƒ³ï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰
calabash-android resign your-app.apk

# ãƒ†ã‚¹ãƒˆã‚µãƒ¼ãƒãƒ¼åŸ‹ã‚è¾¼ã¿ï¼ˆåˆå›ã®ã¿ï¼‰
calabash-android build your-app.apk

# ã“ã‚Œã«ã‚ˆã‚Š your-app-test.apk ãŒç”Ÿæˆã•ã‚Œã‚‹
```

#### iOS ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# calabash-ios ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
gem install calabash-cucumber

# Xcodeãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã« Calabash frameworkè¿½åŠ 
# ã¾ãŸã¯ã€CocoaPodsä½¿ç”¨
```

```ruby
# Podfile
target 'YourAppTests' do
  pod 'Calabash', '~> 0.23'
end
```

```bash
pod install

# Xcodeã§ Calabash-calãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯è¿½åŠ 
# Build Settings â†’ Framework Search Paths
# $(inherited) $(SRCROOT)/Pods/Calabash
```

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ

```bash
# æ–°è¦Calabashãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
calabash-android gen

# ã¾ãŸã¯ã€iOS
calabash-ios gen

# ä»¥ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆãŒç”Ÿæˆã•ã‚Œã‚‹
features/
â”œâ”€â”€ step_definitions/     # ã‚¹ãƒ†ãƒƒãƒ—å®šç¾©
â”œâ”€â”€ support/              # ã‚µãƒãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ app_installation_hooks.rb
â”‚   â”œâ”€â”€ app_life_cycle_hooks.rb
â”‚   â””â”€â”€ env.rb
â””â”€â”€ *.feature            # ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«
```

### ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆGherkinï¼‰

```gherkin
# features/login.feature
Feature: Login
  ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ­ã‚°ã‚¤ãƒ³ã§ãã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹

  Scenario: æ­£å¸¸ãªãƒ­ã‚°ã‚¤ãƒ³
    Given ã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã™ã‚‹
    When ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ "user@example.com" ã‚’å…¥åŠ›ã™ã‚‹
    And ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ "password123" ã‚’å…¥åŠ›ã™ã‚‹
    And "ãƒ­ã‚°ã‚¤ãƒ³" ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹
    Then "ã‚ˆã†ã“ã" ã¨ã„ã†ãƒ†ã‚­ã‚¹ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹

  Scenario: ãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—
    Given ã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã™ã‚‹
    When ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ "invalid@example.com" ã‚’å…¥åŠ›ã™ã‚‹
    And ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ "wrongpassword" ã‚’å…¥åŠ›ã™ã‚‹
    And "ãƒ­ã‚°ã‚¤ãƒ³" ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹
    Then "ãƒ­ã‚°ã‚¤ãƒ³ã«å¤±æ•—ã—ã¾ã—ãŸ" ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹
```

### ã‚¹ãƒ†ãƒƒãƒ—å®šç¾©ï¼ˆRubyï¼‰

```ruby
# features/step_definitions/login_steps.rb

Given(/^ã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã™ã‚‹$/) do
  # ã‚¢ãƒ—ãƒªã¯è‡ªå‹•çš„ã«èµ·å‹•ã•ã‚Œã‚‹
  wait_for_element_exists("* id:'email_field'")
end

When(/^ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ "([^"]*)" ã‚’å…¥åŠ›ã™ã‚‹$/) do |email|
  enter_text("* id:'email_field'", email)
end

When(/^ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ "([^"]*)" ã‚’å…¥åŠ›ã™ã‚‹$/) do |password|
  enter_text("* id:'password_field'", password)
end

When(/^"([^"]*)" ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹$/) do |button_text|
  touch("* marked:'#{button_text}'")
end

Then(/^"([^"]*)" ã¨ã„ã†ãƒ†ã‚­ã‚¹ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹$/) do |text|
  wait_for_element_exists("* marked:'#{text}'")
end

Then(/^"([^"]*)" ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹$/) do |error_text|
  wait_for_element_exists("* marked:'#{error_text}'")
end
```

### Calabash API

```ruby
# è¦ç´ ã®æ“ä½œ

# ã‚¿ãƒƒãƒ—
touch("button")
touch("* id:'login_button'")
touch("* marked:'Login'")

# ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›
enter_text("* id:'email'", "user@example.com")
clear_text("* id:'email'")

# ã‚¹ãƒ¯ã‚¤ãƒ—
swipe(:left)
swipe(:right, query: "* id:'carousel'")

# ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
scroll("scrollView", :down)
scroll_to_mark("Section 3")

# å¾…æ©Ÿ
wait_for_element_exists("* id:'welcome_message'", timeout: 10)
wait_for_elements_do_not_exist("* id:'loading_spinner'")

# ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³
element_exists("* id:'username'")
element_does_not_exist("* id:'error_message'")

# ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ
screenshot_embed(name: "login_screen")
```

### ãƒšãƒ¼ã‚¸ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³

```ruby
# features/support/pages/login_page.rb
class LoginPage
  def initialize(world)
    @world = world
  end

  def email_field
    "* id:'email_field'"
  end

  def password_field
    "* id:'password_field'"
  end

  def login_button
    "* id:'login_button'"
  end

  def enter_email(email)
    @world.enter_text(email_field, email)
  end

  def enter_password(password)
    @world.enter_text(password_field, password)
  end

  def tap_login
    @world.touch(login_button)
  end

  def login(email, password)
    enter_email(email)
    enter_password(password)
    tap_login
  end
end
```

```ruby
# features/step_definitions/login_steps.rbï¼ˆPage Objectä½¿ç”¨ï¼‰
require_relative '../support/pages/login_page'

Given(/^ã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã™ã‚‹$/) do
  @login_page = LoginPage.new(self)
end

When(/^ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ "([^"]*)" ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ "([^"]*)" ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹$/) do |email, password|
  @login_page.login(email, password)
end
```

### Androidå›ºæœ‰ã®æ“ä½œ

```ruby
# Androidã‚­ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆ
press_back_button
press_menu_button
press_enter_button

# ã‚¢ãƒ—ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»èµ·å‹•
reinstall_apps
start_test_server_in_background

# ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±å–å¾—
device_info = device.model_name
puts "Testing on: #{device_info}"
```

### iOSå›ºæœ‰ã®æ“ä½œ

```ruby
# iOSã‚­ãƒ¼ãƒœãƒ¼ãƒ‰
keyboard_enter_text("Hello")
touch("* marked:'Return'")  # Returnã‚­ãƒ¼

# ãƒ‡ãƒã‚¤ã‚¹å›è»¢
rotate(:left)
rotate(:right)

# ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰é·ç§»
send_app_to_background(5)  # 5ç§’é–“ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰
```

### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
# Androidãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
calabash-android run your-app-test.apk

# ç‰¹å®šãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼å®Ÿè¡Œ
calabash-android run your-app-test.apk features/login.feature

# ã‚¿ã‚°ã§ãƒ•ã‚£ãƒ«ã‚¿
calabash-android run your-app-test.apk --tags @smoke

# iOSãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
calabash-ios console
> start_test_server_in_background
> query("*")

# Cucumberã‚ªãƒ—ã‚·ãƒ§ãƒ³
cucumber features/ --format html --out report.html
cucumber features/ --format json --out report.json
```

### CI/CDçµ±åˆ

#### Jenkins

```groovy
// Jenkinsfile
pipeline {
    agent any

    stages {
        stage('Build APK') {
            steps {
                sh './gradlew assembleDebug'
            }
        }

        stage('Resign APK') {
            steps {
                sh 'calabash-android resign app/build/outputs/apk/debug/app-debug.apk'
                sh 'calabash-android build app/build/outputs/apk/debug/app-debug.apk'
            }
        }

        stage('Run Calabash Tests') {
            steps {
                sh 'calabash-android run app/build/outputs/apk/debug/app-debug-test.apk'
            }
        }

        stage('Generate Report') {
            steps {
                cucumber buildStatus: 'SUCCESS',
                         fileIncludePattern: '**/*.json',
                         jsonReportDirectory: 'reports'
            }
        }
    }
}
```

#### GitHub Actions

```yaml
# .github/workflows/calabash-test.yml
name: Calabash Tests

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  android-test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Set up Ruby
        uses: ruby/setup-ruby@v1
        with:
          ruby-version: 2.7
          bundler-cache: true

      - name: Install Calabash
        run: |
          gem install calabash-android
          gem install cucumber

      - name: Build APK
        run: ./gradlew assembleDebug

      - name: Resign APK
        run: |
          calabash-android resign app/build/outputs/apk/debug/app-debug.apk
          calabash-android build app/build/outputs/apk/debug/app-debug.apk

      - name: Start Emulator
        uses: reactivecircus/android-emulator-runner@v2
        with:
          api-level: 29
          script: calabash-android run app/build/outputs/apk/debug/app-debug-test.apk

      - name: Upload Test Results
        uses: actions/upload-artifact@v3
        if: always()
        with:
          name: test-results
          path: reports/
```

### ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ†ã‚¹ãƒˆã‚µãƒ¼ãƒ“ã‚¹é€£æº

```bash
# AWS Device Farmé€£æº
# calabash-android run your-app-test.apk ã‚’
# Device Farmã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ»å®Ÿè¡Œ

# Sauce Labsé€£æº
# Sauce Labs Real Device Cloudã§å®Ÿè¡Œå¯èƒ½
```

## é–‹ç™ºå·¥ç¨‹ã§ã®åˆ©ç”¨

| å·¥ç¨‹ | ç”¨é€” | è©³ç´° |
|------|------|------|
| **å®Ÿè£…** | é–‹ç™ºä¸­ãƒ†ã‚¹ãƒˆ | æ©Ÿèƒ½å®Ÿè£…å¾Œã®å‹•ä½œç¢ºèª |
| **ãƒ†ã‚¹ãƒˆ** | å›å¸°ãƒ†ã‚¹ãƒˆ | UIå¤‰æ›´ã®å½±éŸ¿ç¢ºèª |
| **ãƒ†ã‚¹ãƒˆ** | å—ã‘å…¥ã‚Œãƒ†ã‚¹ãƒˆ | ãƒ“ã‚¸ãƒã‚¹è¦ä»¶ã®æ¤œè¨¼ |
| **CI/CD** | è‡ªå‹•ãƒ†ã‚¹ãƒˆ | ãƒ—ãƒƒã‚·ãƒ¥æ¯ã®è‡ªå‹•å®Ÿè¡Œ |

## ãƒ¡ãƒªãƒƒãƒˆ

- **ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: iOSãƒ»Androidå…±é€šã‚³ãƒ¼ãƒ‰
- **è‡ªç„¶è¨€èª**: Gherkinã§éã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚‚ç†è§£å¯èƒ½
- **å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆ**: ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ãƒ»å®Ÿãƒ‡ãƒã‚¤ã‚¹å¯¾å¿œ
- **Cucumberçµ±åˆ**: BDDï¼ˆæŒ¯ã‚‹èˆã„é§†å‹•é–‹ç™ºï¼‰
- **ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹**: ç„¡æ–™ã€ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½
- **ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£**: è±Šå¯Œãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»ã‚µãƒ³ãƒ—ãƒ«

## ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ

- **ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹çµ‚äº†**: 2020å¹´çµ‚äº†ã€å¾Œç¶™ãƒ„ãƒ¼ãƒ«æ¨å¥¨
- **ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—è¤‡é›‘**: APKãƒªã‚µã‚¤ãƒ³ã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯è¿½åŠ å¿…è¦
- **å®Ÿè¡Œé€Ÿåº¦**: å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆã¯æ™‚é–“ãŒã‹ã‹ã‚‹
- **ãƒ‡ãƒãƒƒã‚°å›°é›£**: ã‚¨ãƒ©ãƒ¼ç®‡æ‰€ã®ç‰¹å®šãŒé›£ã—ã„
- **æœ€æ–°OSéå¯¾å¿œ**: iOS 14+ã€Android 11+ã§å•é¡Œ
- **ä»£æ›¿ãƒ„ãƒ¼ãƒ«æ¨å¥¨**: Appiumã€Espressoã€XCUITest

## é¡ä¼¼ãƒ„ãƒ¼ãƒ«ã¨ã®æ¯”è¼ƒ

| ãƒ„ãƒ¼ãƒ« | ç‰¹å¾´ | æ–™é‡‘ | é©ç”¨å ´é¢ |
|--------|------|------|----------|
| **Calabash** | Cucumberçµ±åˆã€BDD | ç„¡æ–™ï¼ˆéæ¨å¥¨ï¼‰ | ãƒ¬ã‚¬ã‚·ãƒ¼ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ |
| **Appium** | å¤šè¨€èªå¯¾å¿œã€W3Cæ¨™æº– | ç„¡æ–™ | ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ  |
| **Espresso** | Androidå…¬å¼ã€é«˜é€Ÿ | ç„¡æ–™ | Androidå°‚ç”¨ |
| **XCUITest** | iOSå…¬å¼ã€Swift | ç„¡æ–™ | iOSå°‚ç”¨ |

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 1. ãƒšãƒ¼ã‚¸ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³

```ruby
# ç”»é¢è¦ç´ ã‚’æŠ½è±¡åŒ–
class HomePage
  def search_field; "* id:'search'"; end
  def search(query)
    enter_text(search_field, query)
    press_enter_button
  end
end
```

### 2. å¾…æ©Ÿæˆ¦ç•¥

```ruby
# è¦ç´ ãŒç¾ã‚Œã‚‹ã¾ã§å¾…æ©Ÿ
wait_for_element_exists("* id:'result'", timeout: 10)

# ã‚¹ãƒ”ãƒŠãƒ¼æ¶ˆå¤±ã¾ã§å¾…æ©Ÿ
wait_for_elements_do_not_exist("* id:'loading'")
```

### 3. ã‚¿ã‚°ã«ã‚ˆã‚‹ã‚·ãƒŠãƒªã‚ªåˆ†é¡

```gherkin
@smoke @login
Scenario: æ­£å¸¸ãªãƒ­ã‚°ã‚¤ãƒ³

@regression @payment
Scenario: æ±ºæ¸ˆå‡¦ç†
```

```bash
# ã‚¹ãƒ¢ãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆã®ã¿å®Ÿè¡Œ
cucumber --tags @smoke

# ã‚¹ãƒ¢ãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆä»¥å¤–
cucumber --tags ~@smoke
```

### 4. ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆæ´»ç”¨

```ruby
# å¤±æ•—æ™‚ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ
After do |scenario|
  if scenario.failed?
    screenshot_embed(name: "failure_#{scenario.name}")
  end
end
```

## å…¬å¼ãƒªã‚½ãƒ¼ã‚¹

- **å…¬å¼ã‚µã‚¤ãƒˆ**: http://calaba.sh/
- **GitHub**: https://github.com/calabash
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: https://github.com/calabash/calabash-android/wiki
- **ç§»è¡Œã‚¬ã‚¤ãƒ‰**: https://github.com/calabash/calabash/wiki/Calabash-EOL

## ã¾ã¨ã‚

Calabashã¯ã€iOSãƒ»Androidã‚¢ãƒ—ãƒªã®ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ UIãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚Cucumberçµ±åˆã«ã‚ˆã‚Šã€è‡ªç„¶è¨€èªã§ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ªã‚’è¨˜è¿°ã§ãã€BDDé–‹ç™ºã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚ãŸã ã—ã€2020å¹´ã«ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹çµ‚äº†ãŒç™ºè¡¨ã•ã‚Œã¦ãŠã‚Šã€æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯Appiumã€Espressoã€XCUITestç­‰ã®å¾Œç¶™ãƒ„ãƒ¼ãƒ«ã®ä½¿ç”¨ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

---

**æœ€çµ‚æ›´æ–°**: 2025-12-06
**ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹çŠ¶æ³**: çµ‚äº†ï¼ˆ2020å¹´ï¼‰
**æ¨å¥¨ä»£æ›¿ãƒ„ãƒ¼ãƒ«**: Appiumã€Espressoï¼ˆAndroidï¼‰ã€XCUITestï¼ˆiOSï¼‰
