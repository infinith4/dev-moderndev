# Codecov

## æ¦‚è¦

**Codecov**ã¯ã€ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸å¯è¦–åŒ–ãƒ»åˆ†æãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚CI/CDçµ±åˆã€ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¸ã®ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚³ãƒ¡ãƒ³ãƒˆã€ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æã«ã‚ˆã‚Šã€ãƒãƒ¼ãƒ å…¨ä½“ã§ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’ç¶™ç¶šçš„ã«ç›£è¦–ãƒ»æ”¹å–„ã§ãã¾ã™ã€‚

## åŸºæœ¬æƒ…å ±

| é …ç›® | å†…å®¹ |
|------|------|
| **é–‹ç™ºå…ƒ** | Codecovï¼ˆSentryç¤¾å‚˜ä¸‹ï¼‰ |
| **ç¨®åˆ¥** | ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸å¯è¦–åŒ–ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ï¼ˆSaaSï¼‰ |
| **ãƒ©ã‚¤ã‚»ãƒ³ã‚¹** | ãƒ—ãƒ­ãƒ—ãƒ©ã‚¤ã‚¨ã‚¿ãƒªï¼ˆä¸€éƒ¨ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ï¼‰ |
| **æ–™é‡‘** | ğŸŸ¡ Freeï¼ˆã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ï¼‰/ æœ‰æ–™ãƒ—ãƒ©ãƒ³ |
| **å…¬å¼ã‚µã‚¤ãƒˆ** | https://about.codecov.io/ |
| **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ** | https://docs.codecov.com/ |

## ä¸»ãªç‰¹å¾´

### 1. CI/CDçµ±åˆ
- **GitHub Actions**: å…¬å¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
- **GitLab CI/CD**: ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³çµ±åˆ
- **CircleCI**: Orbsã‚µãƒãƒ¼ãƒˆ
- **Jenkins**: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³å¯¾å¿œ

### 2. ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆé€£æº
- **ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚³ãƒ¡ãƒ³ãƒˆ**: PRç”»é¢ã«è‡ªå‹•æŠ•ç¨¿
- **å·®åˆ†è¡¨ç¤º**: å¤‰æ›´ç®‡æ‰€ã®ã‚«ãƒãƒ¬ãƒƒã‚¸
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒã‚§ãƒƒã‚¯**: ãƒãƒ¼ã‚¸åˆ¤å®šåŸºæº–
- **ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒãƒƒã‚¸**: README.mdè¡¨ç¤º

### 3. å¤šè¨€èªå¯¾å¿œ
- **ä¸»è¦è¨€èª**: Pythonã€JavaScriptã€Javaã€Goã€Rubyç­‰
- **ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**: JaCoCoã€lcovã€Coberturaã€gcovç­‰
- **è¤‡æ•°ãƒ¬ãƒãƒ¼ãƒˆ**: ãƒ¢ãƒãƒ¬ãƒå¯¾å¿œ
- **ãƒãƒ¼ã‚¸æ©Ÿèƒ½**: è¤‡æ•°CIçµæœçµ±åˆ

### 4. åˆ†æãƒ»å¯è¦–åŒ–
- **ãƒˆãƒ¬ãƒ³ãƒ‰ã‚°ãƒ©ãƒ•**: æ™‚ç³»åˆ—ã‚«ãƒãƒ¬ãƒƒã‚¸æ¨ç§»
- **ãƒ•ã‚¡ã‚¤ãƒ«å˜ä½**: è©³ç´°ãªã‚«ãƒãƒ¬ãƒƒã‚¸è¡¨ç¤º
- **ã‚µãƒ³ãƒãƒ¼ã‚¹ãƒˆå›³**: ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸éšå±¤å¯è¦–åŒ–
- **ãƒ•ãƒ©ã‚°æ©Ÿèƒ½**: ãƒ†ã‚¹ãƒˆã‚¿ã‚¤ãƒ—åˆ¥åˆ†æ

## ä½¿ã„æ–¹

### ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç™»éŒ²

1. **Codecovã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—**: https://about.codecov.io/
2. **GitHubé€£æº**: GitHub OAuthèªè¨¼
3. **ãƒªãƒã‚¸ãƒˆãƒªè¿½åŠ **: Organization â†’ ãƒªãƒã‚¸ãƒˆãƒªé¸æŠ
4. **ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—**: Settings â†’ Upload Token

### GitHub Actionsçµ±åˆ

```yaml
# .github/workflows/test.yml
name: Test Coverage

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3

      - name: Set up Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: Install dependencies
        run: npm ci

      - name: Run tests with coverage
        run: npm test -- --coverage

      - name: Upload coverage to Codecov
        uses: codecov/codecov-action@v3
        with:
          token: ${{ secrets.CODECOV_TOKEN }}
          files: ./coverage/lcov.info
          flags: unittests
          name: codecov-umbrella
          fail_ci_if_error: true
```

### Node.js ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

```json
// package.json
{
  "scripts": {
    "test": "jest",
    "test:coverage": "jest --coverage"
  },
  "jest": {
    "collectCoverage": true,
    "coverageDirectory": "coverage",
    "coverageReporters": ["lcov", "text", "html"]
  }
}
```

```bash
# ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬
npm run test:coverage

# Codecovã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰
bash <(curl -s https://codecov.io/bash) -t <CODECOV_TOKEN>
```

### Python ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

```yaml
# .github/workflows/test.yml
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: |
          pip install pytest pytest-cov

      - name: Run tests with coverage
        run: |
          pytest --cov=myproject --cov-report=xml

      - name: Upload coverage to Codecov
        uses: codecov/codecov-action@v3
        with:
          token: ${{ secrets.CODECOV_TOKEN }}
          files: ./coverage.xml
          flags: unittests
```

```bash
# ãƒ­ãƒ¼ã‚«ãƒ«ã§ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬
pytest --cov=myproject --cov-report=xml

# Codecovã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
codecov -t <CODECOV_TOKEN>
```

### Java ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆJaCoCoï¼‰

```xml
<!-- pom.xml -->
<build>
  <plugins>
    <plugin>
      <groupId>org.jacoco</groupId>
      <artifactId>jacoco-maven-plugin</artifactId>
      <version>0.8.10</version>
      <executions>
        <execution>
          <goals>
            <goal>prepare-agent</goal>
          </goals>
        </execution>
        <execution>
          <id>report</id>
          <phase>test</phase>
          <goals>
            <goal>report</goal>
          </goals>
        </execution>
      </executions>
    </plugin>
  </plugins>
</build>
```

```yaml
# .github/workflows/test.yml
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Set up JDK 17
        uses: actions/setup-java@v3
        with:
          java-version: '17'
          distribution: 'temurin'

      - name: Run tests with coverage
        run: mvn clean test

      - name: Upload coverage to Codecov
        uses: codecov/codecov-action@v3
        with:
          token: ${{ secrets.CODECOV_TOKEN }}
          files: ./target/site/jacoco/jacoco.xml
          flags: unittests
```

### Go ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

```yaml
# .github/workflows/test.yml
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Set up Go
        uses: actions/setup-go@v4
        with:
          go-version: '1.21'

      - name: Run tests with coverage
        run: go test -v -coverprofile=coverage.txt -covermode=atomic ./...

      - name: Upload coverage to Codecov
        uses: codecov/codecov-action@v3
        with:
          token: ${{ secrets.CODECOV_TOKEN }}
          files: ./coverage.txt
          flags: unittests
```

### GitLab CI/CD

```yaml
# .gitlab-ci.yml
test:
  stage: test
  image: node:18
  script:
    - npm ci
    - npm run test:coverage
    - bash <(curl -s https://codecov.io/bash) -t $CODECOV_TOKEN
  coverage: '/Lines\s*:\s*(\d+\.\d+)%/'
  artifacts:
    reports:
      coverage_report:
        coverage_format: cobertura
        path: coverage/cobertura-coverage.xml
```

### CircleCI

```yaml
# .circleci/config.yml
version: 2.1

orbs:
  codecov: codecov/codecov@3.2

jobs:
  test:
    docker:
      - image: cimg/node:18.17
    steps:
      - checkout
      - run: npm ci
      - run: npm run test:coverage
      - codecov/upload:
          file: ./coverage/lcov.info
          flags: unittests

workflows:
  test_and_coverage:
    jobs:
      - test
```

### codecov.yml è¨­å®š

```yaml
# codecov.yml
coverage:
  status:
    project:
      default:
        target: auto
        threshold: 1%  # 1%ä»¥ä¸Šã®ä½ä¸‹ã§NG
        base: auto
    patch:
      default:
        target: 80%  # æ–°è¦ã‚³ãƒ¼ãƒ‰80%ä»¥ä¸Šå¿…é ˆ

comment:
  layout: "reach, diff, flags, files"
  behavior: default
  require_changes: false

ignore:
  - "tests/**"
  - "**/__tests__/**"
  - "**/node_modules/**"
  - "**/*.test.js"
  - "**/*.spec.js"
```

### ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒãƒƒã‚¸

```markdown
<!-- README.md -->
# My Project

[![codecov](https://codecov.io/gh/username/repo/branch/main/graph/badge.svg)](https://codecov.io/gh/username/repo)

![Coverage](https://img.shields.io/codecov/c/github/username/repo)
```

### ãƒ•ãƒ©ã‚°æ©Ÿèƒ½

```yaml
# .github/workflows/test.yml
- name: Upload coverage - Unit Tests
  uses: codecov/codecov-action@v3
  with:
    files: ./coverage/unit.lcov
    flags: unittests
    name: unit-tests

- name: Upload coverage - Integration Tests
  uses: codecov/codecov-action@v3
  with:
    files: ./coverage/integration.lcov
    flags: integration
    name: integration-tests
```

```yaml
# codecov.yml
flags:
  unittests:
    paths:
      - src/
  integration:
    paths:
      - src/
```

### ãƒ¢ãƒãƒ¬ãƒå¯¾å¿œ

```yaml
# codecov.yml
coverage:
  status:
    project:
      frontend:
        target: 80%
        paths:
          - "packages/frontend/**"
      backend:
        target: 85%
        paths:
          - "packages/backend/**"
```

```yaml
# .github/workflows/test.yml
- name: Upload coverage - Frontend
  uses: codecov/codecov-action@v3
  with:
    files: ./packages/frontend/coverage/lcov.info
    flags: frontend
    name: frontend-coverage

- name: Upload coverage - Backend
  uses: codecov/codecov-action@v3
  with:
    files: ./packages/backend/coverage/lcov.info
    flags: backend
    name: backend-coverage
```

### CLIä½¿ç”¨

```bash
# Codecov CLI ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install codecov

# ã¾ãŸã¯ npm
npm install -g codecov

# ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
codecov -t <CODECOV_TOKEN>

# ç‰¹å®šãƒ•ã‚¡ã‚¤ãƒ«æŒ‡å®š
codecov -t <CODECOV_TOKEN> -f ./coverage/lcov.info

# ãƒ•ãƒ©ã‚°ä»˜ã
codecov -t <CODECOV_TOKEN> -f ./coverage/lcov.info --flags unittests
```

### ã‚»ãƒ«ãƒ•ãƒ›ã‚¹ãƒˆï¼ˆCodecov Enterpriseï¼‰

```yaml
# .github/workflows/test.yml
- name: Upload to Codecov Enterprise
  uses: codecov/codecov-action@v3
  with:
    url: https://codecov.company.com
    token: ${{ secrets.CODECOV_TOKEN }}
    files: ./coverage/lcov.info
```

## é–‹ç™ºå·¥ç¨‹ã§ã®åˆ©ç”¨

| å·¥ç¨‹ | ç”¨é€” | è©³ç´° |
|------|------|------|
| **å®Ÿè£…** | PR ãƒ¬ãƒ“ãƒ¥ãƒ¼ | ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚³ãƒ¡ãƒ³ãƒˆç¢ºèª |
| **ãƒ†ã‚¹ãƒˆ** | ã‚«ãƒãƒ¬ãƒƒã‚¸ç›£è¦– | ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ |
| **ãƒ†ã‚¹ãƒˆ** | å“è³ªã‚²ãƒ¼ãƒˆ | ãƒãƒ¼ã‚¸åŸºæº–è¨­å®š |
| **CI/CD** | ç¶™ç¶šçš„å“è³ªç›£è¦– | è‡ªå‹•ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬ |

## ãƒ¡ãƒªãƒƒãƒˆ

- **PRçµ±åˆ**: å¤‰æ›´ç®‡æ‰€ã®ã‚«ãƒãƒ¬ãƒƒã‚¸è‡ªå‹•è¡¨ç¤º
- **å¤šè¨€èªå¯¾å¿œ**: ä¸»è¦è¨€èªãƒ»ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚µãƒãƒ¼ãƒˆ
- **CI/CDçµ±åˆ**: ä¸»è¦CI/CDãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ
- **ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ**: æ™‚ç³»åˆ—ã‚«ãƒãƒ¬ãƒƒã‚¸æ¨ç§»
- **ç„¡æ–™ãƒ—ãƒ©ãƒ³**: ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
- **è¦–è¦šåŒ–**: ã‚µãƒ³ãƒãƒ¼ã‚¹ãƒˆå›³ã€ãƒ•ã‚¡ã‚¤ãƒ«å˜ä½è¡¨ç¤º
- **ãƒ•ãƒ©ã‚°æ©Ÿèƒ½**: ãƒ†ã‚¹ãƒˆã‚¿ã‚¤ãƒ—åˆ¥åˆ†æ

## ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ

- **æ–™é‡‘**: ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã¯æœ‰æ–™
- **å¤–éƒ¨ä¾å­˜**: SaaSä¾å­˜ã€ãƒ€ã‚¦ãƒ³æ™‚å½±éŸ¿
- **ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**: ãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†å¿…è¦
- **ãƒ¬ãƒãƒ¼ãƒˆå½¢å¼**: å„è¨€èªã§ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ„ãƒ¼ãƒ«å¿…é ˆ
- **ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼**: ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ä¸€éƒ¨ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- **åˆ¶é™**: ç„¡æ–™ãƒ—ãƒ©ãƒ³ã¯5ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¾ã§

## é¡ä¼¼ãƒ„ãƒ¼ãƒ«ã¨ã®æ¯”è¼ƒ

| ãƒ„ãƒ¼ãƒ« | ç‰¹å¾´ | æ–™é‡‘ | é©ç”¨å ´é¢ |
|--------|------|------|----------|
| **Codecov** | PRçµ±åˆã€å¤šè¨€èªã€ãƒˆãƒ¬ãƒ³ãƒ‰ | ç„¡æ–™/æœ‰æ–™ | CI/CDçµ±åˆ |
| **Coveralls** | GitHubçµ±åˆã€ã‚·ãƒ³ãƒ—ãƒ« | ç„¡æ–™/æœ‰æ–™ | ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ |
| **SonarCloud** | å“è³ªåˆ†æã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ | ç„¡æ–™/æœ‰æ–™ | ç·åˆå“è³ªç®¡ç† |
| **JaCoCoï¼ˆå˜ä½“ï¼‰** | Javaå°‚ç”¨ã€ãƒ­ãƒ¼ã‚«ãƒ« | ç„¡æ–™ | Javaé–‹ç™º |

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 1. codecov.yml ã§é–¾å€¤è¨­å®š

```yaml
coverage:
  status:
    project:
      default:
        target: 80%
        threshold: 1%
```

### 2. ãƒ•ãƒ©ã‚°ã§è©³ç´°åˆ†æ

```yaml
flags:
  unittests:
    paths:
      - src/
  integration:
    paths:
      - src/
```

### 3. PR ãƒ–ãƒ­ãƒƒã‚¯è¨­å®š

```yaml
comment:
  require_changes: true

coverage:
  status:
    patch:
      default:
        target: 80%
```

### 4. ãƒãƒƒã‚¸è¡¨ç¤º

```markdown
[![codecov](https://codecov.io/gh/user/repo/branch/main/graph/badge.svg)](https://codecov.io/gh/user/repo)
```

## å…¬å¼ãƒªã‚½ãƒ¼ã‚¹

- **å…¬å¼ã‚µã‚¤ãƒˆ**: https://about.codecov.io/
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: https://docs.codecov.com/
- **GitHub Action**: https://github.com/codecov/codecov-action
- **CLI**: https://github.com/codecov/codecov-cli
- **ã‚µãƒãƒ¼ãƒˆ**: https://codecov.io/support

## ã¾ã¨ã‚

Codecovã¯ã€ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸å¯è¦–åŒ–ãƒ»åˆ†æãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚CI/CDçµ±åˆã€ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¸ã®ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚³ãƒ¡ãƒ³ãƒˆã€ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æã«ã‚ˆã‚Šã€ãƒãƒ¼ãƒ å…¨ä½“ã§ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’ç¶™ç¶šçš„ã«ç›£è¦–ãƒ»æ”¹å–„ã§ãã¾ã™ã€‚å¤šè¨€èªå¯¾å¿œã€è±Šå¯Œãªçµ±åˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚Šã€ãƒ¢ãƒ€ãƒ³ãªé–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’æ”¯æ´ã—ã¾ã™ã€‚

---

**æœ€çµ‚æ›´æ–°**: 2025-12-10
**å¯¾è±¡ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: Codecov Action v3
