# ERDPlus

## 概要

ERDPlusは、完全無料のオンラインER図（Entity-Relationship Diagram）作成ツールで、教育機関や小規模プロジェクトに適しています。ブラウザベースで動作し、概念モデリング、論理モデリング、物理モデリングに対応し、SQL自動生成機能も備えています。

### 主な特徴

- **完全無料**: すべての機能が無料で利用可能
- **ブラウザベース**: インストール不要で、Webブラウザから利用可能
- **シンプルで使いやすい**: 直感的なUIで学習が容易
- **SQL自動生成**: ER図からDDL（CREATE TABLE文）を自動生成
- **学習容易**: 教育向けに設計されており、初心者にも優しい

### 料金プラン

- **完全無料**: すべての機能が無料

### メリット・デメリット

**メリット**
- 完全無料で広告なし
- ブラウザベースでインストール不要
- シンプルで直感的なUIで学習コストが低い
- ER図からSQL（DDL）を自動生成できる
- 教育目的に最適

**デメリット**
- 機能が基本的で、複雑なモデリングには不向き
- エンタープライズ向けの機能（バージョン管理、チーム協業等）がない
- リアルタイム協業機能がない
- エクスポート形式が限定的（PNG、SQL）

## 利用方法

### 1. ERDPlusへのアクセス

1. [ERDPlus公式サイト](https://erdplus.com/)にアクセス
2. アカウント作成（オプション、匿名でも利用可能）
3. 「Create ER Diagram」をクリック

### 2. 新規ER図の作成

1. トップページで「New Diagram」をクリック
2. ダイアグラムタイプを選択:
   - **ER Diagram**: 概念ER図（Chen記法）
   - **Relational Schema**: 関係スキーマ（論理モデル）
   - **Star Schema**: スタースキーマ（データウェアハウス）
3. 「Create」をクリック

### 3. エンティティの追加

#### エンティティの配置

1. 左側のツールボックスから「Entity」をクリック
2. キャンバス上でクリックして配置
3. エンティティ名を入力（例: "顧客"、"注文"、"商品"）

#### 属性の追加

1. エンティティをダブルクリック
2. 「Attributes」セクションで「+」ボタンをクリック
3. 属性名を入力（例: "顧客ID"、"顧客名"、"メールアドレス"）
4. 属性のタイプを設定:
   - **Key**: 主キー（キーアイコンをクリック）
   - **Multivalued**: 多値属性
   - **Derived**: 導出属性

#### 属性の例（顧客エンティティ）

- 顧客ID（主キー）
- 顧客名
- メールアドレス
- 電話番号
- 住所

### 4. リレーションシップの設定

#### リレーションシップの追加

1. ツールボックスから「Relationship」をクリック
2. キャンバス上でクリックして配置
3. リレーションシップ名を入力（例: "注文する"、"含まれる"）

#### エンティティとリレーションシップの接続

1. ツールボックスから「Connect」（線）をクリック
2. エンティティからリレーションシップへ線を引く
3. カーディナリティを設定:
   - **1**: 1対1
   - **N**: 1対多
   - **M**: 多対多

### 5. ER図の具体例

**例: ECサイトの概念ER図**

#### エンティティの定義

**顧客エンティティ**
- 顧客ID（主キー）
- 顧客名
- メールアドレス
- 電話番号
- 住所

**注文エンティティ**
- 注文ID（主キー）
- 注文日
- 合計金額
- 配送先住所

**商品エンティティ**
- 商品ID（主キー）
- 商品名
- 価格
- 在庫数
- カテゴリ

**注文明細エンティティ**（多対多を解消するための中間エンティティ）
- 注文明細ID（主キー）
- 数量
- 小計

#### リレーションシップの定義

1. **顧客** - 注文する - **注文**
   - カーディナリティ: 1:N（1人の顧客が複数の注文を行う）

2. **注文** - 含む - **注文明細**
   - カーディナリティ: 1:N（1つの注文に複数の明細がある）

3. **商品** - 含まれる - **注文明細**
   - カーディナリティ: 1:N（1つの商品が複数の明細に含まれる）

#### 作成手順

1. 「顧客」エンティティを配置し、属性（顧客ID、顧客名等）を追加
2. 「注文」エンティティを配置し、属性（注文ID、注文日等）を追加
3. 「商品」エンティティを配置し、属性（商品ID、商品名等）を追加
4. 「注文明細」エンティティを配置し、属性（注文明細ID、数量等）を追加
5. 「注文する」リレーションシップを配置し、顧客と注文を接続（1:N）
6. 「含む」リレーションシップを配置し、注文と注文明細を接続（1:N）
7. 「含まれる」リレーションシップを配置し、商品と注文明細を接続（1:N）

### 6. 関係スキーマへの変換

ERDPlusでは、概念ER図から関係スキーマ（テーブル定義）へ自動変換できます。

1. 上部メニューの「Convert」をクリック
2. 「To Relational Schema」を選択
3. 自動的に関係スキーマが生成される
4. 各テーブルに主キー、外部キーが設定される

#### 変換結果の例

**顧客テーブル**
- 顧客ID（PK）
- 顧客名
- メールアドレス
- 電話番号
- 住所

**注文テーブル**
- 注文ID（PK）
- 注文日
- 合計金額
- 配送先住所
- 顧客ID（FK → 顧客.顧客ID）

**商品テーブル**
- 商品ID（PK）
- 商品名
- 価格
- 在庫数
- カテゴリ

**注文明細テーブル**
- 注文明細ID（PK）
- 数量
- 小計
- 注文ID（FK → 注文.注文ID）
- 商品ID（FK → 商品.商品ID）

### 7. SQL自動生成

ERDPlusでは、関係スキーマからSQL（DDL）を自動生成できます。

1. 関係スキーマ画面で、上部メニューの「Export」をクリック
2. 「SQL」を選択
3. データベースを選択:
   - **MySQL**
   - **PostgreSQL**
   - **Oracle**
   - **SQL Server**
4. 「Generate SQL」をクリック

#### 生成されるSQL例（MySQL）

```sql
CREATE TABLE 顧客 (
    顧客ID INT PRIMARY KEY,
    顧客名 VARCHAR(100) NOT NULL,
    メールアドレス VARCHAR(100),
    電話番号 VARCHAR(20),
    住所 VARCHAR(200)
);

CREATE TABLE 注文 (
    注文ID INT PRIMARY KEY,
    注文日 DATE NOT NULL,
    合計金額 DECIMAL(10, 2),
    配送先住所 VARCHAR(200),
    顧客ID INT,
    FOREIGN KEY (顧客ID) REFERENCES 顧客(顧客ID)
);

CREATE TABLE 商品 (
    商品ID INT PRIMARY KEY,
    商品名 VARCHAR(100) NOT NULL,
    価格 DECIMAL(10, 2),
    在庫数 INT,
    カテゴリ VARCHAR(50)
);

CREATE TABLE 注文明細 (
    注文明細ID INT PRIMARY KEY,
    数量 INT NOT NULL,
    小計 DECIMAL(10, 2),
    注文ID INT,
    商品ID INT,
    FOREIGN KEY (注文ID) REFERENCES 注文(注文ID),
    FOREIGN KEY (商品ID) REFERENCES 商品(商品ID)
);
```

### 8. エクスポート

#### PNG画像として出力

1. 上部メニューの「Export」をクリック
2. 「Image (PNG)」を選択
3. ファイルがダウンロードされる

#### SQLスクリプトの出力

1. 「Export」→「SQL」を選択
2. データベースタイプを選択
3. SQLファイルをダウンロード

### 9. 用語集の作成

概念モデリングでは、用語集（データディクショナリ）も重要です。ERDPlusでは直接作成できませんが、別途Excelやスプレッドシートで管理します。

#### 用語集の項目

| 用語 | 定義 | 同義語 | データ型 | 備考 |
|------|------|--------|---------|------|
| 顧客ID | 顧客を一意に識別する番号 | Customer ID | INT | 主キー |
| 顧客名 | 顧客の氏名または会社名 | - | VARCHAR(100) | 必須 |
| 注文ID | 注文を一意に識別する番号 | Order ID | INT | 主キー |
| 注文日 | 注文が行われた日付 | - | DATE | 必須 |

### 10. 正規化

ERDPlusで作成したER図は、自動的に第3正規形（3NF）に近い形になりますが、手動で確認・調整が必要です。

#### 正規化のチェックポイント

1. **第1正規形（1NF）**: すべての属性が原子値（多値属性がない）
2. **第2正規形（2NF）**: 部分関数従属がない
3. **第3正規形（3NF）**: 推移的関数従属がない

#### 正規化の例

**正規化前（注文テーブル）**
- 注文ID（PK）
- 顧客名 ← 顧客IDに関数従属（推移的従属）
- 顧客住所 ← 顧客IDに関数従属（推移的従属）

**正規化後**
- 顧客テーブルを分離し、注文テーブルには顧客ID（FK）のみを保持

### 11. サンプルデータの定義

ERDPlusではサンプルデータの定義機能はありませんが、生成したSQLにINSERT文を追加できます。

```sql
-- サンプルデータ
INSERT INTO 顧客 (顧客ID, 顧客名, メールアドレス, 電話番号, 住所) VALUES
(1, '山田太郎', 'yamada@example.com', '090-1234-5678', '東京都渋谷区...'),
(2, '佐藤花子', 'sato@example.com', '090-2345-6789', '大阪府大阪市...');

INSERT INTO 商品 (商品ID, 商品名, 価格, 在庫数, カテゴリ) VALUES
(1, 'ノートパソコン', 120000, 50, '電化製品'),
(2, 'マウス', 2000, 200, '周辺機器');

INSERT INTO 注文 (注文ID, 注文日, 合計金額, 配送先住所, 顧客ID) VALUES
(1, '2025-01-15', 122000, '東京都渋谷区...', 1);

INSERT INTO 注文明細 (注文明細ID, 数量, 小計, 注文ID, 商品ID) VALUES
(1, 1, 120000, 1, 1),
(2, 1, 2000, 1, 2);
```

### 12. ベストプラクティス

#### 命名規則

- **エンティティ名**: 単数形、日本語または英語（統一）
- **属性名**: わかりやすい名前、略語は避ける
- **リレーションシップ名**: 動詞を使用（例: "注文する"、"所属する"）

#### ER図の整理

- エンティティを論理的にグループ化して配置
- リレーションシップの線が交差しないように配置
- 主要なエンティティを中央に配置

## 公式ドキュメント

- **公式サイト**: [ERDPlus](https://erdplus.com/)
- **ドキュメント**: [ERDPlus Documentation](https://erdplus.com/documentation)
- **チュートリアル**: [Getting Started Guide](https://erdplus.com/documentation)
- **FAQ**: [ERDPlus FAQ](https://erdplus.com/faq)

## 学習リソース

- **ER図の基礎**: [Entity-Relationship Diagram Tutorial](https://www.guru99.com/er-diagram-tutorial-dbms.html)
- **データベース正規化**: [Normalization Tutorial](https://www.studytonight.com/dbms/database-normalization.php)

## 関連リンク

- [Chen記法（ER図記法）](https://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model)
- [データベース設計の基礎](https://www.lucidchart.com/pages/database-diagram/database-design)
- [ユーザのための要件定義ガイド（データモデル編） - IPA](https://www.ipa.go.jp/archive/digital/iot-en-ci/jyouryuu/index.html)
