# CodeRabbit

## 概要

CodeRabbit は、Pull Request 上で AI によるコードレビュー支援を行うツールである。変更差分を解析し、バグ候補、設計上の懸念、テスト不足などをコメントとして提示し、レビュー速度と品質の向上を支援する。

## 料金

| プラン | 内容 |
|------|------|
| 無料枠/トライアル | 提供条件に応じて利用可能 |
| 有料プラン | チーム運用、利用量拡張、管理機能を提供 |

## 主な特徴

| 項目 | 内容 |
|------|------|
| PRレビュー支援 | 差分に対して指摘コメントを自動生成 |
| 早期検出 | バグ・可読性・設計リスクを早めに把握 |
| GitHub連携 | PR画面で指摘確認と修正ループが可能 |
| 文脈理解 | 変更内容を踏まえた提案を提示 |
| レビュー補助 | 人間レビューの観点漏れを補完 |
| チーム導入容易 | 既存PRフローへ追加しやすい |

## 主な機能

### PR解析機能

| 機能 | 説明 |
|------|------|
| 差分解析 | 変更行を中心に問題候補を抽出 |
| リスク検知 | 不具合・回帰リスクを示唆 |
| テスト観点提案 | 追加テスト観点を提案 |
| 可読性指摘 | 命名や構造上の改善点を提示 |

### コラボレーション機能

| 機能 | 説明 |
|------|------|
| PRコメント連携 | 指摘をそのままPRに表示 |
| スレッド議論 | 開発者との対話で精査可能 |
| 再レビュー | 修正後の再確認を促進 |
| 運用ルール適用 | チーム方針に合わせた利用が可能 |

### 運用管理機能

| 機能 | 説明 |
|------|------|
| 対象範囲制御 | 対象リポジトリ/PR条件を制御 |
| ノイズ低減 | 指摘方針を調整して過剰通知を抑制 |
| レビュー効率化 | 重点確認箇所の洗い出しを支援 |
| 品質改善 | 指摘傾向を学習に活用 |

## インストールとセットアップ

公式URL:
- [CodeRabbit 公式サイト](https://www.coderabbit.ai/)
- [Documentation](https://docs.coderabbit.ai/)
- [GitHub App](https://github.com/apps/coderabbit)

セットアップの要点:
1. GitHub App を対象リポジトリへインストールする。
2. PR運用ルール（必須レビュー、適用対象）を定義する。
3. 通知範囲とコメント方針を調整する。
4. 人間レビューとの役割分担を明確化する。

## 基本的な使い方

1. PR を作成して差分を提出する。
2. CodeRabbit の指摘コメントを確認する。
3. 妥当な指摘を修正して再プッシュする。
4. 再レビュー結果を確認し、未解決項目を整理する。
5. 最終的に人間レビューで承認判断を行う。

最小運用例:
- 対象: `main` 向け PR
- 運用: CodeRabbit 指摘確認 → 修正 → 人間レビュー

## メリット

- レビュー初動を早め、見落としを減らしやすい。
- 人間レビューの負荷を下げ、重点確認へ集中しやすい。
- テスト観点や設計観点の補助で品質改善を進めやすい。

## デメリット

- 文脈依存の判断は誤検知が発生する場合がある。
- 指摘量が多いとノイズになり運用調整が必要。
- 最終判断は人間レビューが前提になる。

## CI/CD での使用

PRゲートに組み込み、CodeRabbit 指摘の確認完了をレビュー条件に含める運用が有効である。CIテスト結果と合わせて確認すると、回帰リスクの早期発見につながりやすい。

## 他ツールとの比較

| ツール | 主な対象 | 特徴 |
|------|------|------|
| CodeRabbit | AIコードレビュー | PR差分への指摘生成に強い |
| Reviewdog | Lint結果コメント化 | 静的解析結果の通知に強い |
| Danger | PRルール自動化 | レビュー手続きの強制に強い |
| SonarQube | コード品質分析 | 継続的品質指標の管理に強い |

## ベストプラクティス

### 1. 役割分担を定義

- AIは一次検出、人間は設計判断に集中する。
- 重要領域は必ず人間が最終確認する。

### 2. ノイズを抑制

- 指摘対象の範囲を段階的に広げる。
- チームに不要な指摘は運用で除外する。

### 3. 指摘を学習資産化

- 反復指摘をコーディング規約へ反映する。
- テスト不足指摘をテンプレート化する。

## 公式ドキュメント

- 公式サイト: https://www.coderabbit.ai/
- Documentation: https://docs.coderabbit.ai/
- GitHub App: https://github.com/apps/coderabbit

## まとめ

1. ** 自動検出 ** : PR差分の一次レビューを自動化し、初動を早めやすい。
2. ** 品質補完 ** : 人間レビューの観点漏れを補完し、品質向上につなげやすい。
3. ** 運用調整 ** : 運用ルールを整えることで、ノイズを抑えて活用しやすい。
