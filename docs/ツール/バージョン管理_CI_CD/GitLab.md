# GitLab

## 概要

GitLab は Git リポジトリ管理に加え、CI/CD、課題管理、セキュリティ機能を統合した DevOps プラットフォームである。クラウド利用とセルフマネージド運用の両方に対応し、単一基盤で開発からデプロイまでを管理しやすい。

## 料金

| プラン | 内容 |
|------|------|
| Free | 基本機能を利用可能 |
| Premium | チーム管理・高度機能を拡張 |
| Ultimate | セキュリティ/コンプライアンス機能を強化 |
| Self-Managed | 自社環境での運用が可能 |

## 主な特徴

| 項目 | 内容 |
|------|------|
| オールインワン | SCM、CI/CD、Issue 管理を一体提供 |
| マージリクエスト運用 | コードレビューと承認フローを標準化 |
| パイプライン統合 | `.gitlab-ci.yml` で自動化を管理 |
| セルフホスト対応 | ネットワーク要件に合わせて導入可能 |
| DevSecOps機能 | SAST/DAST などのセキュリティ機能を提供 |
| 環境管理 | 開発・検証・本番環境を分けて管理可能 |

## 主な機能

### リポジトリ/レビュー機能

| 機能 | 説明 |
|------|------|
| Merge Request | 差分レビュー、承認、ディスカッション |
| Branch Protection | 保護ブランチへの直接更新を制御 |
| CODEOWNERS | レビュー責任者を明示 |
| Releases / Tags | リリース単位の履歴管理 |

### 計画/運用機能

| 機能 | 説明 |
|------|------|
| Issues | バグ・タスク管理 |
| Milestones | 期限・リリース管理 |
| Boards | カンバン運用 |
| Wiki | ドキュメント管理 |

### CI/CD・セキュリティ機能

| 機能 | 説明 |
|------|------|
| GitLab CI/CD | ビルド・テスト・デプロイ自動化 |
| Runner | Shared/Specific Runner 実行 |
| Container Registry | イメージ管理 |
| Security Scanning | 脆弱性検出とレポート化 |

## インストールとセットアップ

公式URL:
- [GitLab](https://about.gitlab.com/)
- [GitLab Docs](https://docs.gitlab.com/)
- [GitLab Pricing](https://about.gitlab.com/pricing/)

セットアップの要点:
1. GitLab.com か Self-Managed の導入形態を決める。
2. プロジェクト作成後、保護ブランチと MR ルールを設定する。
3. 必要に応じて Runner と Container Registry を有効化する。
4. `.gitlab-ci.yml` を追加して基本パイプラインを定義する。

## 基本的な使い方

1. リポジトリへ push し、機能ブランチを作成する。
2. Merge Request を作成し、レビューと CI 結果を確認する。
3. 承認後に `main` へマージし、タグでリリースを管理する。
4. Issues と Boards で作業進捗を追跡する。
5. セキュリティスキャン結果を定期確認する。

最小運用例:
- 運用: `feature/*` → MR → `main` マージ
- 必須条件: パイプライン成功 + 承認

## メリット

- 開発運用を単一基盤へ集約しやすい。
- セルフホスト対応で組織要件に合わせやすい。
- CI/CD とセキュリティを同一フローで管理しやすい。

## デメリット

- 機能範囲が広く初期設計が複雑になりやすい。
- セルフホストでは運用・保守負荷が増える。
- 高度機能は上位プラン前提になる場合がある。

## CI/CD での使用

GitLab では `.gitlab-ci.yml` を中心に、マージ前検証とマージ後デプロイを一元運用しやすい。環境機能と手動承認ジョブを組み合わせると、本番デプロイの統制を強化できる。

詳細は [GitLab CI/CD](./GitLab_CI_CD.md) を参照。

## 他ツールとの比較

| ツール | 強み | 特徴 |
|------|------|------|
| GitLab | DevOps統合 | SCM〜CI/CD〜セキュリティを一元化 |
| GitHub | コミュニティ/連携 | PR文化と外部エコシステムが強い |
| Bitbucket | Jira連携 | Atlassian 製品群と親和性が高い |
| Azure DevOps | 組織統制 | 大規模組織の管理機能が豊富 |

## ベストプラクティス

### 1. MR品質ゲートを標準化

- 承認者と必須 CI を明確化する。
- テンプレートでレビュー観点を統一する。

### 2. パイプラインを段階設計

- Build/Test/Deploy を分離し責務を整理する。
- キャッシュ・アーティファクトで実行効率を上げる。

### 3. セキュリティを早期組込

- SAST/Dependency Scanning を初期から有効化する。
- 重大度別の対応フローを定義する。

## 公式ドキュメント

- 公式サイト: https://about.gitlab.com/
- Docs: https://docs.gitlab.com/
- Pricing: https://about.gitlab.com/pricing/

## まとめ

1. **一体管理** : GitLab は開発から運用までを一体管理しやすい DevOps 基盤である。
2. **品質両立** : MR と CI/CD を標準化することで、品質とリードタイムを両立しやすい。
3. **柔軟構築** : セルフホストとセキュリティ機能を活用すると、組織要件に合わせた運用を構築しやすい。
