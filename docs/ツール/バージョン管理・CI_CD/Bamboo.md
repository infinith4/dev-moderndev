# Bamboo

## æ¦‚è¦

**Bamboo**ã¯ã€Atlassianç¤¾ãŒæä¾›ã™ã‚‹ç¶™ç¶šçš„ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆCIï¼‰ãƒ»ç¶™ç¶šçš„ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆCDï¼‰ã‚µãƒ¼ãƒãƒ¼ã§ã™ã€‚Jiraãƒ»Bitbucketãƒ»Confluenceã¨ã®ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ãªçµ±åˆã€å¼·åŠ›ãªãƒ“ãƒ«ãƒ‰ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æ©Ÿèƒ½ã«ã‚ˆã‚Šã€ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºå‘ã‘ã®è‡ªå‹•åŒ–ã•ã‚ŒãŸã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãƒ‡ãƒªãƒãƒªãƒ¼ã‚’å®Ÿç¾ã—ã¾ã™ã€‚

## åŸºæœ¬æƒ…å ±

| é …ç›® | å†…å®¹ |
|------|------|
| **é–‹ç™ºå…ƒ** | Atlassian |
| **ç¨®åˆ¥** | CI/CDã‚µãƒ¼ãƒãƒ¼ |
| **ãƒ©ã‚¤ã‚»ãƒ³ã‚¹** | ãƒ—ãƒ­ãƒ—ãƒ©ã‚¤ã‚¨ã‚¿ãƒªï¼ˆå•†ç”¨ï¼‰ |
| **æ–™é‡‘** | ðŸŸ¡ æœ‰æ–™ï¼ˆã‚µãƒ¼ãƒãƒ¼ç‰ˆãƒ»Data Centerç‰ˆï¼‰ |
| **å…¬å¼ã‚µã‚¤ãƒˆ** | https://www.atlassian.com/software/bamboo |
| **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ** | https://confluence.atlassian.com/bamboo/ |

## ä¸»ãªç‰¹å¾´

### 1. Atlassianè£½å“çµ±åˆ
- **Jira**: ãƒ“ãƒ«ãƒ‰çŠ¶æ³ã‚’èª²é¡Œã«è‡ªå‹•åæ˜ 
- **Bitbucket**: ãƒ—ãƒƒã‚·ãƒ¥ãƒˆãƒªã‚¬ãƒ¼ã€ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆé€£æº
- **Confluence**: ãƒ“ãƒ«ãƒ‰ãƒ¬ãƒãƒ¼ãƒˆåŸ‹ã‚è¾¼ã¿
- **HipChat/Stride**: é€šçŸ¥é€£æº

### 2. ãƒ“ãƒ«ãƒ‰ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
- **Plans**: ãƒ“ãƒ«ãƒ‰å®šç¾©ï¼ˆè¤‡æ•°ã‚¹ãƒ†ãƒ¼ã‚¸ï¼‰
- **Stages**: ä¸¦åˆ—å®Ÿè¡Œå¯èƒ½ãªã‚¸ãƒ§ãƒ–ã‚°ãƒ«ãƒ¼ãƒ—
- **Jobs**: å€‹åˆ¥ãƒ“ãƒ«ãƒ‰ã‚¿ã‚¹ã‚¯
- **Tasks**: ãƒ“ãƒ«ãƒ‰ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã€ãƒ†ã‚¹ãƒˆã€ãƒ‡ãƒ—ãƒ­ã‚¤ï¼‰

### 3. ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ
- **Deployment Projects**: ç’°å¢ƒåˆ¥ãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®š
- **Environments**: é–‹ç™ºã€ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ã€æœ¬ç•ªç’°å¢ƒ
- **ãƒªãƒªãƒ¼ã‚¹**: ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã•ã‚ŒãŸãƒ‡ãƒ—ãƒ­ã‚¤
- **æ‰¿èªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼**: æ‰‹å‹•æ‰¿èªã‚²ãƒ¼ãƒˆ

### 4. ä¸¦åˆ—ãƒ“ãƒ«ãƒ‰ãƒ»ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£
- ãƒªãƒ¢ãƒ¼ãƒˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
- Elastic Bambooï¼ˆAWSé€£æºã§å‹•çš„ã‚¹ã‚±ãƒ¼ãƒ«ï¼‰
- ãƒžãƒˆãƒªãƒƒã‚¯ã‚¹ãƒ“ãƒ«ãƒ‰ï¼ˆè¤‡æ•°ç’°å¢ƒä¸¦åˆ—ï¼‰
- åˆ†æ•£ãƒ“ãƒ«ãƒ‰

## ä½¿ã„æ–¹

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

#### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆLinuxï¼‰

```bash
# Java 11ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo apt update
sudo apt install openjdk-11-jdk

# Bambooãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
wget https://www.atlassian.com/software/bamboo/downloads/binary/atlassian-bamboo-9.2.0.tar.gz
tar -xzf atlassian-bamboo-9.2.0.tar.gz
cd atlassian-bamboo-9.2.0

# è¨­å®š
vi atlassian-bamboo/WEB-INF/classes/bamboo-init.properties
# bamboo.home=/var/atlassian/application-data/bamboo

# èµ·å‹•
./bin/start-bamboo.sh

# ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹
# http://localhost:8085

# ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰
# - ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã‚­ãƒ¼å…¥åŠ›
# - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®šï¼ˆPostgreSQL/MySQLæŽ¨å¥¨ï¼‰
# - ç®¡ç†è€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
```

#### Docker ã§ã®èµ·å‹•

```bash
# Docker Compose
cat > docker-compose.yml <<EOF
version: '3.8'

services:
  bamboo:
    image: atlassian/bamboo-server:9.2
    ports:
      - "8085:8085"
      - "54663:54663"  # Remote Agent Port
    environment:
      - JVM_MINIMUM_MEMORY=2048m
      - JVM_MAXIMUM_MEMORY=4096m
      - ATL_JDBC_URL=jdbc:postgresql://db:5432/bamboo
      - ATL_JDBC_USER=bamboo
      - ATL_JDBC_PASSWORD=bamboo_password
      - ATL_DB_TYPE=postgresql
    volumes:
      - bamboo-data:/var/atlassian/application-data/bamboo
    depends_on:
      - db

  db:
    image: postgres:13
    environment:
      - POSTGRES_DB=bamboo
      - POSTGRES_USER=bamboo
      - POSTGRES_PASSWORD=bamboo_password
    volumes:
      - postgres-data:/var/lib/postgresql/data

volumes:
  bamboo-data:
  postgres-data:
EOF

docker-compose up -d
```

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ»ãƒ—ãƒ©ãƒ³ä½œæˆ

```text
# Bamboo Web UI ã§ã®æ“ä½œ

1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
   Create â†’ Create Project
   - Project name: MyWebApp
   - Project key: WEBAPP

2. ãƒ—ãƒ©ãƒ³ä½œæˆ
   Create â†’ Create Plan
   - Plan name: Build and Test
   - Plan key: WEBAPP-BUILD
   - ãƒªãƒã‚¸ãƒˆãƒªè¨­å®šï¼ˆBitbucket/GitHub/GitLabï¼‰

3. ã‚¹ãƒ†ãƒ¼ã‚¸è¨­å®š
   Default Stage (ä¸¦åˆ—å®Ÿè¡Œå¯èƒ½ãªã‚¸ãƒ§ãƒ–)
   â””â”€â”€ Default Job

4. ã‚¸ãƒ§ãƒ–è¨­å®š
   - Source Code Checkout
   - Build Tasks
   - Test Tasks
```

### ãƒ“ãƒ«ãƒ‰è¨­å®šï¼ˆJava/Mavenï¼‰

```yaml
# Bamboo Specs (as Code)
# bamboo-specs/bamboo.yaml
---
version: 2
plan:
  project-key: WEBAPP
  key: BUILD
  name: Build and Test

stages:
  - Build:
      manual: false
      final: false
      jobs:
        - Build:
            key: BUILD
            tasks:
              - checkout:
                  force-clean-build: false
                  description: Checkout Default Repository
              - script:
                  interpreter: SHELL
                  scripts:
                    - |-
                      mvn clean compile
                  description: Maven Compile
              - script:
                  interpreter: SHELL
                  scripts:
                    - |-
                      mvn test
                  description: Run Tests
              - junit:
                  test-results: target/surefire-reports/*.xml
                  description: Parse JUnit Test Results
            artifacts:
              - name: WAR file
                pattern: target/*.war
                shared: true
                required: false

  - Deploy to Staging:
      manual: false
      final: false
      jobs:
        - Deploy:
            key: DEPLOY
            tasks:
              - clean
              - artifact-download:
                  artifacts:
                    - name: WAR file
              - script:
                  interpreter: SHELL
                  scripts:
                    - |-
                      scp target/*.war user@staging-server:/opt/tomcat/webapps/
                  description: Deploy to Staging

triggers:
  - polling:
      period: '180'

branches:
  create: for-pull-request
  delete:
    after-deleted-days: 7
    after-inactive-days: 30

notifications:
  - events:
      - plan-completed
    recipients:
      - emails:
          - team@example.com
```

### Node.js ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

```yaml
# bamboo.yaml
---
version: 2
plan:
  project-key: WEBAPP
  key: FRONTEND
  name: Frontend Build

stages:
  - Build:
      jobs:
        - Build:
            key: BUILD
            docker:
              image: node:18
              volumes:
                ${bamboo.working.directory}: /opt/bamboo
            tasks:
              - checkout
              - script:
                  scripts:
                    - npm ci
                  description: Install Dependencies
              - script:
                  scripts:
                    - npm run build
                  description: Build
              - script:
                  scripts:
                    - npm test
                  description: Run Tests
            artifacts:
              - name: Build Output
                pattern: dist/**
                shared: true

  - Deploy:
      jobs:
        - Deploy to S3:
            key: S3
            tasks:
              - artifact-download:
                  artifacts:
                    - name: Build Output
              - script:
                  scripts:
                    - aws s3 sync dist/ s3://my-website-bucket/ --delete
                  description: Deploy to S3
```

### Docker ãƒ“ãƒ«ãƒ‰

```yaml
# bamboo.yaml
---
version: 2
plan:
  project-key: WEBAPP
  key: DOCKER
  name: Docker Build and Push

stages:
  - Build:
      jobs:
        - Docker Build:
            key: BUILD
            tasks:
              - checkout
              - script:
                  scripts:
                    - docker build -t myapp:${bamboo.buildNumber} .
                    - docker tag myapp:${bamboo.buildNumber} myregistry.com/myapp:${bamboo.buildNumber}
                    - docker tag myapp:${bamboo.buildNumber} myregistry.com/myapp:latest
                  description: Build Docker Image
              - script:
                  scripts:
                    - docker login -u $DOCKER_USERNAME -p $DOCKER_PASSWORD myregistry.com
                    - docker push myregistry.com/myapp:${bamboo.buildNumber}
                    - docker push myregistry.com/myapp:latest
                  description: Push Docker Image

variables:
  DOCKER_USERNAME: admin
  DOCKER_PASSWORD: ${bamboo.DOCKER_PASSWORD}  # Bamboo Variables (æš—å·åŒ–)
```

### ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

```text
# Deployment Project ä½œæˆ

1. Deploy â†’ Create Deployment Project
   - Name: MyWebApp Deployment
   - Plan: WEBAPP-BUILD

2. ç’°å¢ƒè¨­å®š
   - Development
   - Staging
   - Production

3. ç’°å¢ƒåˆ¥ã‚¿ã‚¹ã‚¯è¨­å®šï¼ˆStagingï¼‰
   Tasks:
   - Artifact Download
   - SSH Task: Deploy to Server
   - Script: Health Check

4. ãƒˆãƒªã‚¬ãƒ¼è¨­å®š
   - After successful build plan: WEBAPP-BUILD
   - Manual approval for Production

5. å¤‰æ•°è¨­å®šï¼ˆç’°å¢ƒåˆ¥ï¼‰
   Staging:
   - SERVER_HOST: staging.example.com
   - DB_CONNECTION: jdbc:postgresql://db-staging/webapp

   Production:
   - SERVER_HOST: prod.example.com
   - DB_CONNECTION: jdbc:postgresql://db-prod/webapp
```

### Jira é€£æº

```yaml
# Jiraèª²é¡Œã¨ã®é€£æº

# ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«èª²é¡Œã‚­ãƒ¼å«ã‚ã‚‹
git commit -m "WEBAPP-123 ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ã®å®Ÿè£…"

# Bamboo â†’ Jira è‡ªå‹•é€£æº
# - ãƒ“ãƒ«ãƒ‰çŠ¶æ³ãŒJiraèª²é¡Œã«è¡¨ç¤º
# - ãƒ‡ãƒ—ãƒ­ã‚¤çŠ¶æ³ã‚‚è¿½è·¡
# - ãƒªãƒªãƒ¼ã‚¹ãƒŽãƒ¼ãƒˆè‡ªå‹•ç”Ÿæˆ

# Jira Issue Collectorï¼ˆBambooè¨­å®šï¼‰
Settings â†’ Jira Integration
- Jira URL: https://jira.example.com
- Application Linkè¨­å®š
```

### ãƒªãƒ¢ãƒ¼ãƒˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ

```bash
# ãƒªãƒ¢ãƒ¼ãƒˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

# 1. Bambooã‚µãƒ¼ãƒãƒ¼ã§ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ä½œæˆ
# Settings â†’ Agents â†’ Remote Agents â†’ Install Remote Agent

# 2. ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒžã‚·ãƒ³ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
wget https://bamboo.example.com/agentServer/agentInstaller/atlassian-bamboo-agent-installer-9.2.0.jar
java -jar atlassian-bamboo-agent-installer-9.2.0.jar https://bamboo.example.com/agentServer/

# 3. ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹•
cd bamboo-agent-home/bin
./bamboo-agent.sh start

# 4. Bambooã‚µãƒ¼ãƒãƒ¼ã§æ‰¿èª
# Settings â†’ Agents â†’ Remote Agents â†’ Approve Agent

# 5. Capabilityè¨­å®šï¼ˆè‡ªå‹•æ¤œå‡º or æ‰‹å‹•è¿½åŠ ï¼‰
# - JDK 11
# - Maven 3.8
# - Node.js 18
# - Docker
```

### Elastic Bambooï¼ˆAWSé€£æºï¼‰

```text
# AWS EC2ã§ã‚ªãƒ³ãƒ‡ãƒžãƒ³ãƒ‰ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹•

1. Elastic Bambooæœ‰åŠ¹åŒ–
   Settings â†’ Elastic Bamboo
   - AWS Credentialsè¨­å®š
   - AMIé¸æŠžï¼ˆBamboo Agent AMIï¼‰
   - Instance Type: t3.medium

2. è¨­å®š
   - æœ€å°ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹æ•°: 0
   - æœ€å¤§ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹æ•°: 10
   - ã‚¢ã‚¤ãƒ‰ãƒ«ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³: 10åˆ†

3. è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒ«
   - ãƒ“ãƒ«ãƒ‰ã‚­ãƒ¥ãƒ¼ãŒæºœã¾ã‚‹ã¨EC2èµ·å‹•
   - ãƒ“ãƒ«ãƒ‰å®Œäº†å¾Œã€ã‚¢ã‚¤ãƒ‰ãƒ«æ™‚é–“çµŒéŽã§è‡ªå‹•åœæ­¢
   - ã‚³ã‚¹ãƒˆæœ€é©åŒ–
```

### REST API

```python
# bamboo_api.py
import requests
from requests.auth import HTTPBasicAuth

BAMBOO_URL = "https://bamboo.example.com"
USERNAME = "admin"
API_TOKEN = "your-api-token"

auth = HTTPBasicAuth(USERNAME, API_TOKEN)

def get_build_status(plan_key):
    """ãƒ“ãƒ«ãƒ‰ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å–å¾—"""
    url = f"{BAMBOO_URL}/rest/api/latest/result/{plan_key}"
    response = requests.get(url, auth=auth)
    return response.json()

def trigger_build(plan_key):
    """ãƒ“ãƒ«ãƒ‰å®Ÿè¡Œ"""
    url = f"{BAMBOO_URL}/rest/api/latest/queue/{plan_key}"
    response = requests.post(url, auth=auth)
    return response.json()

def get_deployment_status(deployment_id):
    """ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å–å¾—"""
    url = f"{BAMBOO_URL}/rest/api/latest/deploy/environment/{deployment_id}/results"
    response = requests.get(url, auth=auth)
    return response.json()

# ä½¿ç”¨ä¾‹
status = get_build_status("WEBAPP-BUILD")
print(f"Build: {status['results']['result'][0]['buildNumber']}")
print(f"State: {status['results']['result'][0]['state']}")
```

## é–‹ç™ºå·¥ç¨‹ã§ã®åˆ©ç”¨

| å·¥ç¨‹ | ç”¨é€” | è©³ç´° |
|------|------|------|
| **å®Ÿè£…** | CIï¼ˆç¶™ç¶šçš„ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ | ã‚³ãƒŸãƒƒãƒˆæ¯Žã®è‡ªå‹•ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ†ã‚¹ãƒˆ |
| **ãƒ†ã‚¹ãƒˆ** | è‡ªå‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ | ãƒ¦ãƒ‹ãƒƒãƒˆãƒ»çµ±åˆãƒ†ã‚¹ãƒˆè‡ªå‹•åŒ– |
| **å°Žå…¥** | CDï¼ˆç¶™ç¶šçš„ãƒ‡ãƒ—ãƒ­ã‚¤ï¼‰ | ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ãƒ»æœ¬ç•ªç’°å¢ƒè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ |
| **é‹ç”¨** | ç›£è¦–ãƒ»é€šçŸ¥ | ãƒ“ãƒ«ãƒ‰å¤±æ•—é€šçŸ¥ã€ãƒ¬ãƒãƒ¼ãƒˆ |

## ãƒ¡ãƒªãƒƒãƒˆ

- **Atlassiançµ±åˆ**: Jiraãƒ»Bitbucketãƒ»Confluenceã¨ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹é€£æº
- **å¼·åŠ›ãªãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³**: ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ»ã‚¸ãƒ§ãƒ–ãƒ»ã‚¿ã‚¹ã‚¯ã®éšŽå±¤æ§‹é€ 
- **ä¸¦åˆ—ãƒ“ãƒ«ãƒ‰**: ãƒªãƒ¢ãƒ¼ãƒˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§é«˜é€ŸåŒ–
- **Elastic Bamboo**: AWSé€£æºã§ã‚ªãƒ³ãƒ‡ãƒžãƒ³ãƒ‰ã‚¹ã‚±ãƒ¼ãƒ«
- **ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºå‘ã‘**: æ¨©é™ç®¡ç†ã€ç›£æŸ»ãƒ­ã‚°
- **Bamboo Specs**: YAML/Javaã§ãƒ“ãƒ«ãƒ‰å®šç¾©ã‚’ã‚³ãƒ¼ãƒ‰åŒ–
- **ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ**: ç’°å¢ƒåˆ¥ãƒ‡ãƒ—ãƒ­ã‚¤ã€æ‰¿èªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

## ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ

- **æœ‰æ–™**: ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ç‰ˆãªã—ã€ãƒ©ã‚¤ã‚»ãƒ³ã‚¹è²»ç”¨ãŒé«˜é¡
- **å­¦ç¿’æ›²ç·š**: è¨­å®šãŒè¤‡é›‘ã€åˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã«æ™‚é–“
- **ãƒªã‚½ãƒ¼ã‚¹æ¶ˆè²»**: Java VMã§å‹•ä½œã€ãƒ¡ãƒ¢ãƒªæ¶ˆè²»å¤§
- **ã‚¯ãƒ©ã‚¦ãƒ‰ç‰ˆçµ‚äº†**: Bamboo Cloudã¯2022å¹´ã«çµ‚äº†ã€ã‚µãƒ¼ãƒãƒ¼ç‰ˆã®ã¿
- **ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£å°**: Jenkinsãƒ»GitLab CIã«æ¯”ã¹ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ™ãƒ¼ã‚¹å°
- **ãƒ—ãƒ©ã‚°ã‚¤ãƒ³å°‘**: Jenkinsç¨‹ã®æ‹¡å¼µæ€§ã¯ãªã„

## é¡žä¼¼ãƒ„ãƒ¼ãƒ«ã¨ã®æ¯”è¼ƒ

| ãƒ„ãƒ¼ãƒ« | ç‰¹å¾´ | æ–™é‡‘ | é©ç”¨å ´é¢ |
|--------|------|------|----------|
| **Bamboo** | Atlassiançµ±åˆ | æœ‰æ–™ | Atlassianç’°å¢ƒ |
| **Jenkins** | ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã€é«˜æ‹¡å¼µæ€§ | ç„¡æ–™ | æ±Žç”¨CI/CD |
| **GitLab CI** | Gitçµ±åˆã€YAMLå®šç¾© | ç„¡æ–™ã€œæœ‰æ–™ | GitLabåˆ©ç”¨ç’°å¢ƒ |
| **TeamCity** | JetBrainsè£½ã€å¼·åŠ›IDEçµ±åˆ | ç„¡æ–™ã€œæœ‰æ–™ | JetBrainsç’°å¢ƒ |

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 1. Planæ§‹æˆ

```text
# éšŽå±¤çš„ãªPlanè¨­è¨ˆ

Project: MyWebApp
â”œâ”€â”€ Plan: Build and Test (WEBAPP-BUILD)
â”‚   â”œâ”€â”€ Stage: Build
â”‚   â”‚   â””â”€â”€ Job: Compile & Unit Test
â”‚   â”œâ”€â”€ Stage: Integration Test
â”‚   â”‚   â””â”€â”€ Job: API Tests
â”‚   â””â”€â”€ Stage: Package
â”‚       â””â”€â”€ Job: Create Artifacts
â”‚
â””â”€â”€ Plan: Code Quality (WEBAPP-QUALITY)
    â”œâ”€â”€ Stage: Static Analysis
    â”‚   â”œâ”€â”€ Job: SonarQube Scan
    â”‚   â””â”€â”€ Job: Dependency Check
    â””â”€â”€ Stage: Security Scan
        â””â”€â”€ Job: OWASP ZAP
```

### 2. å¤‰æ•°ç®¡ç†

```text
# ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ï¼ˆSettings â†’ Global Variablesï¼‰
DOCKER_REGISTRY: myregistry.com
SONAR_URL: https://sonar.example.com

# ãƒ—ãƒ©ãƒ³å¤‰æ•°ï¼ˆPlan â†’ Variablesï¼‰
APP_VERSION: 1.2.0

# ç’°å¢ƒå¤‰æ•°ï¼ˆDeployment Environment â†’ Variablesï¼‰
Staging:
  API_ENDPOINT: https://api-staging.example.com
Production:
  API_ENDPOINT: https://api.example.com

# æš—å·åŒ–å¤‰æ•°ï¼ˆPassword/Secretï¼‰
DB_PASSWORD: ******ï¼ˆæš—å·åŒ–ï¼‰
```

### 3. ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆç®¡ç†

```yaml
# ãƒ“ãƒ«ãƒ‰ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã®å…±æœ‰

# Build Job
artifacts:
  - name: Application JAR
    pattern: target/*.jar
    shared: true  # å¾Œç¶šã‚¹ãƒ†ãƒ¼ã‚¸ã§åˆ©ç”¨å¯èƒ½

# Deploy Job
tasks:
  - artifact-download:
      artifacts:
        - name: Application JAR
      source-plan: WEBAPP-BUILD
```

### 4. ä¸¦åˆ—å®Ÿè¡Œ

```yaml
# ãƒžãƒˆãƒªãƒƒã‚¯ã‚¹ãƒ“ãƒ«ãƒ‰ï¼ˆè¤‡æ•°ç’°å¢ƒä¸¦åˆ—ï¼‰

stages:
  - Test:
      jobs:
        - Test Java 11:
            key: TEST11
            docker:
              image: openjdk:11
        - Test Java 17:
            key: TEST17
            docker:
              image: openjdk:17
        - Test Java 21:
            key: TEST21
            docker:
              image: openjdk:21
```

## å…¬å¼ãƒªã‚½ãƒ¼ã‚¹

- **å…¬å¼ã‚µã‚¤ãƒˆ**: https://www.atlassian.com/software/bamboo
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: https://confluence.atlassian.com/bamboo/
- **Bamboo Specs**: https://docs.atlassian.com/bamboo-specs-docs/
- **API**: https://docs.atlassian.com/bamboo/REST/latest/
- **æ–™é‡‘**: https://www.atlassian.com/software/bamboo/pricing

## ã¾ã¨ã‚

Bambooã¯ã€Atlassianç¤¾ãŒæä¾›ã™ã‚‹ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºå‘ã‘CI/CDã‚µãƒ¼ãƒãƒ¼ã§ã™ã€‚Jiraãƒ»Bitbucketãƒ»Confluenceã¨ã®ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ãªçµ±åˆã€å¼·åŠ›ãªãƒ“ãƒ«ãƒ‰ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã€Elastic Bambooã«ã‚ˆã‚‹å‹•çš„ã‚¹ã‚±ãƒ¼ãƒ«ã«ã‚ˆã‚Šã€Atlassianè£½å“ã‚’ä¸­å¿ƒã¨ã—ãŸé–‹ç™ºç’°å¢ƒã«æœ€é©åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚æœ‰æ–™ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ãŒå¿…è¦ã§ã™ãŒã€ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºå‘ã‘ã®æ©Ÿèƒ½ã¨ä¿¡é ¼æ€§ã‚’æä¾›ã—ã¾ã™ã€‚

---

**æœ€çµ‚æ›´æ–°**: 2025-12-06
**å¯¾è±¡ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: Bamboo 9.2+
