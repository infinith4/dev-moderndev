# Maven

## 概要

Maven は Java プロジェクト向けのビルド・依存管理ツールである。標準ライフサイクルに沿ってビルド、テスト、パッケージングを実行でき、チーム開発での再現性を高めやすい。

## 料金

| 区分 | 内容 |
|------|------|
| Maven 本体 | 無料（OSS） |
| 補足 | リポジトリ運用や CI 実行コストは別途 |

## 主な特徴

| 項目 | 内容 |
|------|------|
| 標準ライフサイクル | build/test/package/deploy を統一実行 |
| 依存管理 | Maven Central などから自動取得 |
| 再現性 | `pom.xml` による構成管理 |
| 拡張性 | プラグインで機能追加 |
| 実績 | Java エコシステムで長期利用実績 |

## 主な機能

### ビルド機能

| 機能 | 説明 |
|------|------|
| コンパイル | ソースビルドを標準化 |
| テスト実行 | 単体テストを自動実行 |
| パッケージング | jar/war など成果物を生成 |
| 配布 | リポジトリへ成果物を公開 |

### 依存管理機能

| 機能 | 説明 |
|------|------|
| 依存解決 | 推移依存を含めて取得 |
| バージョン管理 | 依存バージョンを明示管理 |
| スコープ制御 | compile/test/runtime など適用範囲指定 |
| BOM 利用 | バージョン整合を保ちやすい |

### 運用機能

| 機能 | 説明 |
|------|------|
| マルチモジュール | 複数モジュールを一括管理 |
| プロファイル | 環境別ビルド設定を切替 |
| プラグイン統合 | 静的解析や整形と連携 |
| CI 連携 | 標準コマンドで自動実行可能 |

## インストールとセットアップ

公式URL:
- [Apache Maven 公式](https://maven.apache.org/)
- [Maven Docs](https://maven.apache.org/guides/)

セットアップ手順:
1. JDK と Maven をインストールする。
2. `pom.xml` にプロジェクト情報と依存を定義する。
3. リポジトリ設定とプロキシ設定を環境に合わせる。

## 基本的な使い方

1. `pom.xml` を最小構成で作成する。
2. ローカルで `test` と `package` が通ることを確認する。
3. 依存バージョンは固定し、更新は計画的に行う。
4. 共通処理は親 POM に集約する。

最小コマンド:
- ビルド: `mvn clean package`
- テスト: `mvn test`

## メリット

- Java ビルド手順を標準化できる
- 依存管理を明示的に行える
- プラグイン連携で品質工程を統合しやすい
- 長期運用実績があり情報が豊富

## デメリット

- `pom.xml` が大規模化しやすい
- 依存解決トラブル時の調査が複雑になりやすい
- プラグイン設定が多いと保守負荷が上がる

## 他ツールとの比較

| ツール | 主な用途 | 特徴 |
|------|------|------|
| Maven | Java ビルド/依存管理 | 標準ライフサイクルで運用しやすい |
| Gradle | ビルド自動化 | 柔軟性と高速化に強い |
| Bazel | 大規模ビルド | 厳密再現性と高速性に強い |
| Ant | ビルド自動化 | 手続き的で柔軟だが標準化は弱い |

## ベストプラクティス

### 1. 依存を明示管理

- バージョン固定と定期更新を運用する
- 不要依存を削減して軽量化する

### 2. 親 POM で共通化

- ルールやプラグインを集約する
- 子モジュールの重複設定を減らす

### 3. ビルド手順を統一

- 開発・CI で同じコマンドを使う
- キャッシュやリポジトリ設定を標準化する

## 公式ドキュメント

- 公式: https://maven.apache.org/
- ガイド: https://maven.apache.org/guides/
- Central Repository: https://search.maven.org/

## まとめ

1. Maven は Java 開発の標準ビルド基盤として有効。
2. 依存管理と親 POM 共通化で保守性を高められる。
3. 開発環境と CI で同一運用にすることが重要。
