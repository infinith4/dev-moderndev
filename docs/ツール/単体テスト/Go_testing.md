# Go testing

## 概要
Go testing は Go 標準の単体テスト機能です。追加ツールなしでテスト実行、ベンチマーク、カバレッジ確認を行えます。

## 料金
| プラン | 料金 | 備考 |
|---|---:|---|
| 標準機能 | 無料 | Go 本体に含まれる |

## 主な特徴
| 特徴 | 内容 |
|---|---|
| 標準搭載 | 追加依存なしで開始できる |
| 高速実行 | CI で回しやすい |
| 品質指標 | カバレッジとベンチマークを取得できる |

## 主な機能

### コア機能

| 機能 | 用途 | 実務での使いどころ |
|---|---|---|
| 単体テスト実行 | 振る舞い検証 | 変更時の回帰防止 |
| ベンチマーク | 性能比較 | 最適化前後の評価 |
| カバレッジ | 網羅性確認 | テスト不足の把握 |

### 連携機能

| 機能 | 説明 |
|------|------|
| ツール連携 | 既存の開発・運用ツールと連携しやすい |
| 自動実行 | ローカル実行と CI 実行の両方に対応しやすい |

### 運用機能

| 機能 | 説明 |
|------|------|
| 結果管理 | 実行結果を蓄積して比較しやすい |
| 変更追跡 | 設定変更の影響を確認しやすい |

## インストールとセットアップ

公式URL:
- [公式リンク1](https://pkg.go.dev/testing)
- [公式リンク2](https://go.dev/doc/tutorial/add-a-test)

セットアップ手順:
1. Go 開発環境を用意します。
2. パッケージ単位でテストファイル配置ルールを決めます。
3. CI でテスト実行と失敗時通知を設定します。

## 基本的な使い方
1. 正常系と異常系の観点でテストケースを作成します。
2. 変更ごとにテストを実行して回帰を確認します。
3. カバレッジ結果を確認し、重要ロジックを優先して補強します。

最小実行例:
- ローカル環境で Go testing の基本機能を実行
- CI で定期実行し、結果を比較

## メリット
| 観点 | 内容 |
|---|---|
| 導入性 | 標準機能のみで始められる |
| 保守性 | 言語標準に沿って長期運用しやすい |
| 自動化 | CI 連携が容易 |

## デメリット
| 観点 | 内容 |
|---|---|
| 表現力 | 高度なアサーションは追加ライブラリが必要 |
| モック | 複雑な依存の置換は別ツール併用が必要 |
| 運用 | テスト設計方針がないと品質がばらつく |

## 他ツールとの比較
| ツール | 強み | 使い分け |
|---|---|---|
| Go testing | 標準機能で十分な検証が可能 | 基本の単体テスト基盤 |
| GoMock | 依存置換に強い | 外部依存を切った検証 |
| Testify | アサーションが豊富 | 可読性重視の記述 |

## ベストプラクティス
1. テスト対象を小さく分割し、失敗原因を特定しやすくします。
2. テーブル駆動でケースを整理し、抜け漏れを防ぎます。
3. 外部依存は抽象化し、再現性の高いテストを優先します。

## 公式ドキュメント
- https://pkg.go.dev/testing
- https://go.dev/doc/tutorial/add-a-test

## まとめ

1. ** 導入容易 ** : Go testing は追加コストなしで単体テスト運用を開始できる実用的な基盤です。
2. ** 自動運用 ** : 回帰防止の効果を高めるには、ケース設計と継続実行の運用が重要です。
3. ** 検証効率 ** : 依存置換や高度な検証は GoMock などと組み合わせると効果的です。

