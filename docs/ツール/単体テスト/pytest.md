# pytest

## 概要
pytest は Python 向けの単体テストフレームワークです。簡潔な記述と豊富な拡張により、小規模から大規模まで運用しやすいのが特徴です。

## 料金
| プラン | 料金 | 備考 |
|---|---:|---|
| OSS | 無料 | Python テストの代表的選択肢 |

## 主な特徴
| 特徴 | 内容 |
|---|---|
| 記述の簡潔さ | 可読性の高いテストを書きやすい |
| 拡張性 | プラグインで用途拡張が可能 |
| 実行柔軟性 | マーカーや絞り込み実行に対応 |

## 主な機能

### コア機能

| 機能 | 用途 | 実務での使いどころ |
|---|---|---|
| 単体テスト | ロジック検証 | 回帰防止 |
| fixture | 前提データ管理 | 重複排除と保守性向上 |
| パラメータ化 | ケース展開 | 境界値・異常系網羅 |

### 連携機能

| 機能 | 説明 |
|------|------|
| ツール連携 | 既存の開発・運用ツールと連携しやすい |
| 自動実行 | ローカル実行と CI 実行の両方に対応しやすい |

### 運用機能

| 機能 | 説明 |
|------|------|
| 結果管理 | 実行結果を蓄積して比較しやすい |
| 変更追跡 | 設定変更の影響を確認しやすい |

## インストールとセットアップ

公式URL:
- [公式リンク1](https://docs.pytest.org/)
- [公式リンク2](https://github.com/pytest-dev/pytest)

セットアップ手順:
1. Python バージョンと依存管理方式を統一します。
2. テストディレクトリと命名規約を決めます。
3. CI で実行・レポート収集を設定します。

## 基本的な使い方
1. 機能単位でテストを作成します。
2. fixture で共通準備を管理します。
3. 結果を確認し、失敗原因を修正して再実行します。

最小実行例:
- ローカル環境で pytest の基本機能を実行
- CI で定期実行し、結果を比較

## メリット
| 観点 | 内容 |
|---|---|
| 生産性 | 少ない記述でケース追加しやすい |
| 拡張性 | プロジェクト要件に合わせて拡張できる |
| 運用性 | 開発サイクルに組み込みやすい |

## デメリット
| 観点 | 内容 |
|---|---|
| ルール未整備 | 自由度が高く品質がばらつきやすい |
| 実行時間 | ケース増加で時間が伸びやすい |
| plugin 依存 | 構成が複雑化しやすい |

## 他ツールとの比較
| ツール | 強み | 使い分け |
|---|---|---|
| pytest | Python での開発効率が高い | Python 全般 |
| unittest | 標準ライブラリで安定 | 追加依存を減らしたい場合 |
| nose2 | 互換性を意識した運用 | 既存資産継続時 |

## ベストプラクティス
1. fixture の責務を限定し、過剰な共通化を避けます。
2. 重要機能はパラメータ化で境界値を網羅します。
3. 長時間テストは分類して実行戦略を分けます。

## 公式ドキュメント
- https://docs.pytest.org/
- https://github.com/pytest-dev/pytest

## まとめ

1. ** 保守性 ** : pytest は Python 単体テストの生産性と保守性を両立しやすいツールです。
2. ** 品質向上 ** : 運用では fixture 設計と実行戦略の整理が品質を左右します。
3. ** 自動運用 ** : CI で継続実行し、回帰を早期検知する体制が重要です。

