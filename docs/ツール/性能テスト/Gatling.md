# Gatling

## 概要
Gatling は、HTTP API や Web アプリ向けの性能テストツールである。シナリオ定義による再現性の高い負荷試験に強く、継続的な性能回帰検知に適している。

## 料金

| 区分 | 内容 |
|------|------|
| OSS | 無料（自己運用） |
| Enterprise/Cloud | 有料（大規模実行・管理機能を拡張） |

## 主な特徴

| 項目 | 内容 |
|------|------|
| 高負荷対応 | 少ないリソースで多数ユーザーを模擬しやすい |
| シナリオ駆動 | ユーザー行動を段階的に定義しやすい |
| レポート分析 | 遅延傾向・失敗率を可視化しやすい |
| 自動化適性 | CLI 実行で CI に組み込みやすい |
| 拡張性 | 小規模検証から大規模試験まで段階導入しやすい |

## 主な機能

### 負荷試験機能

| 機能 | 説明 |
|------|------|
| シナリオ実行 | 同時アクセスや段階負荷を再現 |
| ステップ負荷 | ランプアップ/スパイクの切替に対応 |
| 継続実行 | 同一条件の反復試験で回帰を確認 |

### 品質判定機能

| 機能 | 説明 |
|------|------|
| 閾値判定 | p95・エラー率などで合否判定 |
| 実行結果比較 | 変更前後の劣化有無を把握 |
| 失敗検知 | 条件違反時に早期に異常を検出 |

### 分析・運用機能

| 機能 | 説明 |
|------|------|
| レポート生成 | 応答時間分布と失敗傾向を可視化 |
| ボトルネック把握 | 性能劣化ポイントの特定を支援 |
| 自動運用連携 | CI 実行で継続的な性能監視を実現 |

## インストールとセットアップ

公式URL:
- [Gatling 公式](https://gatling.io/)
- [Gatling Docs](https://gatling.io/docs/)

セットアップ手順:
1. Java 実行環境と Gatling 実行基盤を準備する。
2. テスト対象 URL、認証情報、入力データを整理する。
3. 指標（p95、エラー率、RPS）と合否条件を先に定義する。

## 基本的な使い方
1. 業務トランザクションをシナリオとして分割する。
2. 負荷パターン（一定・段階増加・スパイク）を設定する。
3. 試験を実行し、閾値違反と遅延増加点を確認する。
4. 改善後に同条件で再実行し、回帰有無を比較する。

最小実行例:
- ローカルで試験を実行
- CI で閾値判定を自動実行

## メリット

- シナリオベースで再現性の高い性能試験を行える
- 高負荷条件でも定量的な比較をしやすい
- CI 連携で回帰検知を継続運用しやすい
- 結果レポートで改善優先度を判断しやすい

## デメリット

- シナリオ設計と指標設計に学習コストがかかる
- 初期にテストデータと実行環境の整備が必要
- 分析観点が未整備だと結果解釈を誤りやすい

## 他ツールとの比較

| ツール | 主な用途 | 特徴 |
|------|------|------|
| Gatling | 高負荷性能試験 | 再現性と分析レポートに強い |
| JMeter | GUI ベース試験 | 導入しやすく利用実績が多い |
| k6 | スクリプト自動化 | CI 統合と開発フロー連携が容易 |
| Locust | Python 記述試験 | 業務シナリオの柔軟な表現に強い |

## ベストプラクティス

### 1. 先に判定基準を固定

- 指標と閾値を事前に定義する
- 主観的な合否判断を避ける

### 2. 負荷を段階的に上げる

- 小規模試験から本番想定へ拡張する
- 異常点が出た段階で原因を切り分ける

### 3. 継続比較を標準化

- 同一条件の結果を時系列で保存する
- CI で回帰検知を継続運用する

## 公式ドキュメント

- 公式: https://gatling.io/
- ドキュメント: https://gatling.io/docs/
- GitHub: https://github.com/gatling/gatling

## まとめ

1. ** 再現性 ** : Gatling はシナリオ駆動で再現性の高い性能試験を実施しやすい。
2. ** 判定性 ** : 指標と閾値を固定することで性能品質を明確に判定できる。
3. ** 継続性 ** : CI と時系列比較を併用すると回帰検知を継続運用しやすい。
