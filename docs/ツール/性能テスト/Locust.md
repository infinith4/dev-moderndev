# Locust

## 概要
Locust は、Python でシナリオを定義して負荷試験を行う性能テストツールである。業務フローに沿ったユーザー行動を柔軟に再現しやすく、実運用に近い試験設計に向く。

## 料金

| 区分 | 内容 |
|------|------|
| OSS | 無料（自己運用） |
| マネージド環境 | 有料（提供ベンダー利用時） |

## 主な特徴

| 項目 | 内容 |
|------|------|
| Python 記述 | 既存 Python 資産を活用しやすい |
| 柔軟なシナリオ | 業務特性に合わせて負荷モデルを調整しやすい |
| 分散実行 | 高負荷試験へ段階的に拡張しやすい |
| 可視化UI | 実行状況を確認しながら試験しやすい |
| 運用連携 | CLI 実行で継続試験へ接続しやすい |

## 主な機能

### 負荷試験機能

| 機能 | 説明 |
|------|------|
| 仮想ユーザー生成 | 同時アクセスを再現 |
| 負荷プロファイル設定 | 段階負荷や急増負荷を定義 |
| 分散実行 | 負荷規模を段階的に拡張 |

### シナリオ制御機能

| 機能 | 説明 |
|------|------|
| Python シナリオ定義 | 業務フローを柔軟に表現 |
| ユーザー行動分岐 | 画面/API 遷移の実挙動を再現 |
| データ連携 | 条件別入力で実運用に近づける |

### 分析・運用機能

| 機能 | 説明 |
|------|------|
| 指標取得 | 応答時間・失敗率を可視化 |
| 比較分析 | 改善前後の差分を確認 |
| 自動実行連携 | CI や定期実行に接続しやすい |

## インストールとセットアップ

公式URL:
- [Locust 公式ドキュメント](https://docs.locust.io/)
- [Locust GitHub](https://github.com/locustio/locust)

セットアップ手順:
1. Python 実行環境と Locust を準備する。
2. 試験対象 API、認証方式、試験データを整理する。
3. 負荷プロファイルと合否基準を定義する。

## 基本的な使い方
1. ユーザー種別ごとに行動パターンを定義する。
2. 小規模負荷から段階的に試験を実行する。
3. 遅延増加点と失敗要因を分析して改善する。
4. 同条件で再試験し、改善効果を確認する。

最小実行例:
- ローカルでシナリオを実行
- CI で定期試験を実施

## メリット

- Python ベースで業務シナリオを柔軟に記述しやすい
- 分散実行で負荷規模を調整しやすい
- 開発チームがテスト資産を保守しやすい
- 継続実行へ接続しやすく回帰検知に向く

## デメリット

- Python コーディング前提で導入ハードルがある
- 大規模試験では実行基盤の設計が必要
- 長期運用では結果管理と可視化の整備が必要

## 他ツールとの比較

| ツール | 主な用途 | 特徴 |
|------|------|------|
| Locust | Python 記述性能試験 | 業務シナリオの柔軟性が高い |
| k6 | 開発連携性能試験 | JS ベースで CI 統合しやすい |
| JMeter | GUI 性能試験 | 初学者含むチームで導入しやすい |
| Gatling | 高負荷性能試験 | 再現性と分析に強い |

## ベストプラクティス

### 1. シナリオを業務単位で分割

- 機能ごとに試験責務を明確化する
- 失敗時の影響範囲を特定しやすくする

### 2. 監視指標を同時取得

- アプリ監視と性能結果を同時に収集する
- 原因分析の時間を短縮する

### 3. 比較可能な結果を蓄積

- テストデータを固定化して再現性を担保する
- 時系列比較で劣化兆候を早期に把握する

## 公式ドキュメント

- 公式: https://docs.locust.io/
- GitHub: https://github.com/locustio/locust

## まとめ

1. ** 柔軟性 ** : Locust は Python で業務フローに沿った性能試験を設計しやすい。
2. ** 基盤性 ** : 負荷設計に加えて実行基盤と結果管理の整備が重要になる。
3. ** 継続性 ** : 監視連携と時系列比較で性能課題を継続的に発見しやすい。
