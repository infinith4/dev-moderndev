# k6

## 概要
k6 は JavaScript で性能テストを記述し、API や Web サービスの負荷特性を検証できるツールです。開発フローに組み込みやすく、自動化運用に向いています。

## 料金
| プラン | 料金 | 備考 |
|---|---:|---|
| OSS | 無料 | ローカル/CI で利用可能 |
| k6 Cloud | 有料 | 大規模実行・可視化・共有機能を提供 |

## 主な特徴
| 特徴 | 内容 |
|---|---|
| JavaScript 記述 | 開発者が扱いやすい |
| 自動化適性 | CI/CD パイプラインに統合しやすい |
| 指標設計 | 閾値を明示して合否判定しやすい |

## 主な機能
| 機能 | 用途 | 実務での使いどころ |
|---|---|---|
| 負荷モデル | 段階増加・一定・スパイク負荷 | リリース前検証 |
| 閾値判定 | SLO/SLA 合否評価 | 自動ゲート判定 |
| 結果出力 | 指標可視化と比較 | 回帰分析 |

## インストールとセットアップ
1. k6 実行環境を整えます。
2. 対象 API、認証、テストデータ、目標指標を定義します。
3. 負荷パターンと閾値を設定します。

## 基本的な使い方
1. 想定トラフィックを試験シナリオに反映します。
2. テストを実行して遅延・失敗率を確認します。
3. 閾値超過時は原因を分析し、再試験で改善確認します。

## メリット
| 観点 | 内容 |
|---|---|
| 開発親和性 | JavaScript ベースでチーム導入しやすい |
| 運用性 | CLI で自動化しやすい |
| 判定明確化 | 閾値による機械的判定が可能 |

## デメリット
| 観点 | 内容 |
|---|---|
| 設計依存 | シナリオ品質が結果の妥当性を左右する |
| 環境依存 | 実行基盤差異で結果がぶれやすい |
| 可視化 | OSS 単体では運用可視化を追加設計する場合がある |

## 他ツールとの比較
| ツール | 強み | 使い分け |
|---|---|---|
| k6 | 開発フロー統合が容易 | CI 主体の継続性能検証 |
| JMeter | GUI と情報量が豊富 | 非エンジニア含む運用 |
| Gatling | 大規模負荷と分析力 | 高負荷中心の検証 |
| Locust | Python で柔軟な定義 | Python エコシステム重視 |

## ベストプラクティス
1. 目標指標をテストコードとは別に管理し、変更影響を把握しやすくします。
2. スモールテストから段階的に負荷を増やし、原因切り分けを容易にします。
3. 結果は時系列で保存し、劣化トレンドを定点観測します。

## 公式ドキュメント
- https://grafana.com/docs/k6/latest/
- https://github.com/grafana/k6

## まとめ
1. k6 は自動化しやすく、開発チーム主導の性能テストに適したツールです。
2. 実効性を高めるには、閾値管理と結果の継続比較を運用に組み込むことが重要です。
3. 小規模から始めて段階的に負荷を上げることで、安定した性能改善サイクルを作れます。
