# Draw.io（ユースケース図作成）

## 概要

Draw.io（diagrams.net）は、完全無料のオンライン図作成ツールで、UMLユースケース図、フローチャート、ER図など、様々な図表の作成に対応しています。オープンソースで、ブラウザ版とデスクトップ版の両方が利用可能です。

### 主な特徴

- **完全無料**: すべての機能が無料で利用可能
- **オープンソース**: ソースコードが公開されており、透明性が高い
- **UMLテンプレート**: ユースケース図を含むUMLテンプレートを提供
- **クラウドストレージ統合**: Google Drive、OneDrive、Dropboxとの連携
- **軽量**: ブラウザベースで軽快に動作

### メリット・デメリット

**メリット**
- 完全無料で広告なし
- オープンソースで透明性が高く、セキュリティ面でも安心
- ブラウザ版とデスクトップ版の両方が利用可能
- Google Drive、OneDrive等との統合により、ファイル管理が容易
- オフラインでも利用可能（デスクトップ版）

**デメリット**
- リアルタイム協業機能が弱い（同時編集は不可）
- UML検証機能がない（記法の誤りをチェックしない）
- テンプレートが他のツールに比べて少ない
- 高度な機能（コード生成、トレーサビリティ管理等）は限定的

## 利用方法

### 1. アクセス方法

#### Web版（ブラウザ）

1. [diagrams.net](https://www.diagrams.net/)にアクセス
2. ブラウザで直接利用可能（アカウント登録不要）

#### デスクトップ版

1. [Draw.io Desktop](https://github.com/jgraph/drawio-desktop/releases)からダウンロード
2. インストーラーを実行してセットアップ
3. アプリケーションを起動

### 2. 保存先の選択

1. Draw.ioを開くと、保存先選択画面が表示される
2. 保存先を選択:
   - **Device**: ローカルストレージ
   - **Google Drive**: Googleドライブ
   - **OneDrive**: OneDrive
   - **Dropbox**: Dropbox
   - **GitHub**: GitHubリポジトリ

推奨: チームで共有する場合は「Google Drive」や「OneDrive」を選択

### 3. 新規ユースケース図の作成

1. 保存先を選択後、「Create New Diagram」をクリック
2. 「UML」カテゴリを選択
3. 「UML Use Case」テンプレートを選択（または「Blank Diagram」）
4. ファイル名を入力（例: "レンタルシステム_ユースケース図"）
5. 「Create」ボタンをクリック

### 4. UMLライブラリの有効化

1. 左側のパネルで「More Shapes...」をクリック
2. 「Software」カテゴリを展開
3. **UML 2.5**にチェックを入れる
4. 「Apply」をクリック

これで、UMLユースケース図の図形が利用可能になります。

### 5. アクターとユースケースの配置

#### アクターの配置

1. 左側のパネルで「UML 2.5」ライブラリを展開
2. 「Use Case」セクションから「Actor」（人型アイコン）を選択
3. キャンバス上にドラッグ&ドロップ
4. アクター名をダブルクリックして編集（例: "会員"、"スタッフ"）

#### ユースケースの配置

1. 「UML 2.5」ライブラリから「Use Case」（楕円形）を選択
2. キャンバス上にドラッグ&ドロップ
3. ユースケース名を入力（例: "DVDを借りる"、"DVDを返却する"）

#### システム境界の追加

1. 「UML 2.5」ライブラリから「Subsystem」または「Package」を選択
2. ユースケースを囲むようにドラッグして配置
3. サイズを調整
4. システム名を入力（例: "DVDレンタルシステム"）

### 6. コネクタの利用

#### アクターとユースケースの関連

方法1: ドラッグ接続
1. アクターをクリックすると、四方に青い矢印アイコンが表示される
2. 青い矢印をクリックして、関連するユースケースまでドラッグ
3. 自動的に関連線（実線）が作成される

方法2: Waypoint接続
1. アクターの端にマウスを持っていくと、緑の×印が表示される
2. 緑の×印をクリックして、ユースケースの緑の×印までドラッグ
3. 関連線が作成される

#### Include関係

1. 左パネルの「UML 2.5」から「Dependency」（破線矢印）を選択
2. 呼び出し元のユースケースから呼び出し先のユースケースへドラッグ
3. 矢印をダブルクリック→ラベルに «include» と入力

#### Extend関係

1. 「Dependency」を選択
2. 拡張元のユースケースから基本ユースケースへドラッグ
3. 矢印をダブルクリック→ラベルに «extend» と入力

### 7. ユースケース図の具体例

**例: DVDレンタルシステムのユースケース図**

#### アクター
- **会員**: DVDをレンタルする顧客
- **スタッフ**: 店舗スタッフ
- **システム管理者**: システムを管理する管理者

#### ユースケース（会員向け）
- **DVDを検索する**: DVDカタログから作品を検索
- **DVDを予約する**: レンタル中のDVDを予約
- **DVDを借りる**: DVDをレンタルする
  - **«include» 会員認証**: レンタル時に必須の会員確認
  - **«include» 在庫確認**: 在庫の確認処理
  - **«extend» 延滞料金支払い**: 延滞がある場合のみ実行
- **DVDを返却する**: DVDを返却する
- **レンタル履歴を確認する**: 過去のレンタル履歴を閲覧

#### ユースケース（スタッフ向け）
- **DVDを登録する**: 新規DVDを在庫に登録
- **DVDを棚卸しする**: 在庫の棚卸し
- **返却処理**: 会員からの返却を処理
- **延滞管理**: 延滞者の管理

#### ユースケース（システム管理者向け）
- **会員情報管理**: 会員アカウントの管理
- **料金設定**: レンタル料金の設定

#### 作成手順

1. **キャンバス準備**
   - グリッド表示をオンにする（View → Grid）

2. **アクターの配置**
   - 左側に「会員」「スタッフ」「システム管理者」を縦に配置

3. **システム境界の作成**
   - 中央に「Subsystem」を配置
   - 名前を「DVDレンタルシステム」に変更
   - サイズを調整して、すべてのユースケースを含められるようにする

4. **ユースケースの配置**（システム境界内）
   - DVDを検索する
   - DVDを予約する
   - DVDを借りる
   - 会員認証
   - 在庫確認
   - 延滞料金支払い
   - DVDを返却する
   - レンタル履歴を確認する
   - DVDを登録する
   - DVDを棚卸しする
   - 返却処理
   - 延滞管理
   - 会員情報管理
   - 料金設定

5. **関連線の接続**
   - 会員 → DVDを検索する（関連線）
   - 会員 → DVDを予約する（関連線）
   - 会員 → DVDを借りる（関連線）
   - DVDを借りる → 会員認証（«include»、破線矢印）
   - DVDを借りる → 在庫確認（«include»、破線矢印）
   - 延滞料金支払い → DVDを借りる（«extend»、破線矢印）
   - 会員 → DVDを返却する（関連線）
   - 会員 → レンタル履歴を確認する（関連線）
   - スタッフ → DVDを登録する（関連線）
   - スタッフ → DVDを棚卸しする（関連線）
   - スタッフ → 返却処理（関連線）
   - スタッフ → 延滞管理（関連線）
   - システム管理者 → 会員情報管理（関連線）
   - システム管理者 → 料金設定（関連線）

### 8. スタイル設定

#### 図形のスタイル変更

1. 図形をクリックして選択
2. 右側のプロパティパネルで設定:
   - **Fill**: 塗りつぶし色
   - **Line**: 線の色・太さ
   - **Font**: フォント、文字サイズ
   - **Align**: 整列

#### 色分けの例

- **アクター**: デフォルト（黒線）
- **ユースケース（会員向け）**: ライトブルー
- **ユースケース（スタッフ向け）**: ライトグリーン
- **ユースケース（管理者向け）**: ライトイエロー
- **システム境界**: 白（黒線のみ）

### 9. ノートの追加

1. 左パネルの「General」ライブラリから「Note」を選択
2. キャンバスに配置
3. ノート内容を入力（例: "延滞料金は1日あたり100円"）
4. ノートを関連するユースケースに破線で接続

### 10. レイアウトの整理

#### 自動整列

1. 複数の図形を選択（Ctrl + クリック）
2. 「Arrange」メニュー→「Align」→「Left/Center/Right」
3. または「Distribute」→「Horizontally/Vertically」で均等配置

#### グリッドスナップ

1. 「View」メニュー→「Grid」をオンにする
2. 図形を移動すると、グリッドにスナップして整列

### 11. ユースケース詳細の記述

Draw.ioでは、各ユースケースに詳細情報を追加できます。

#### 方法1: ノートを使用

1. ユースケースの近くに「Note」を配置
2. 詳細情報を記述（事前条件、事後条件、フロー等）

#### 方法2: メタデータを使用

1. ユースケースを右クリック→「Edit Data」
2. カスタムプロパティを追加:
   - ID: UC-001
   - 概要: DVDをレンタルする
   - 事前条件: 会員がログイン済み
   - 事後条件: レンタル記録が作成される

**例: 「DVDを借りる」ユースケースの詳細**

```
【ID】UC-003

【概要】
会員がDVDをレンタルする

【事前条件】
- 会員がログイン済みである（会員認証完了）
- 借りたいDVDが在庫にある
- 会員のレンタル数が上限に達していない
- 延滞料金が未払いでない

【事後条件】
- レンタル記録が作成される
- DVDの在庫が減少する
- 会員のレンタル数が増加する
- 返却期限が設定される

【基本フロー】
1. 会員が借りたいDVDをカウンターに持参する
2. スタッフが会員カードをスキャンする（«include» 会員認証）
3. スタッフがDVDのバーコードをスキャンする
4. システムが在庫を確認する（«include» 在庫確認）
5. システムが会員のレンタル状況を確認する
6. システムがレンタル記録を作成する
7. システムが返却期限を計算・表示する
8. スタッフがDVDと返却期限票を会員に渡す

【代替フロー】
- 在庫がない場合: エラーメッセージを表示し、予約を提案
- レンタル上限に達している場合: エラーメッセージを表示
- 延滞料金がある場合: 延滞料金支払い画面を表示（«extend» 延滞料金支払い）
```

### 12. エクスポート

#### 画像・PDF出力

1. 「File」→「Export as」を選択
2. 形式を選択:
   - **PNG**: 画像形式（プレゼンテーション用）
   - **JPEG**: 画像形式（圧縮率高）
   - **SVG**: ベクター形式（再編集可能）
   - **PDF**: ドキュメント形式
3. オプションを設定:
   - **Zoom**: 拡大率
   - **Border Width**: 余白
   - **Transparent Background**: 透明背景（PNG/SVGの場合）
4. 「Export」をクリック

#### XML形式（再編集用）

1. 「File」→「Save as」を選択
2. 形式を「XML」に設定
3. 保存先を選択
4. 後で「File」→「Open」で再編集可能

### 13. Google Drive/OneDriveでの共有

#### Google Driveで保存した場合

1. 図を保存後、Google Driveの共有機能を使用
2. 共有相手のメールアドレスを入力
3. 権限を設定（閲覧のみ/編集可能）
4. 「送信」をクリック

**注意**: Draw.ioはリアルタイム同時編集には非対応。ファイルは1人ずつ編集する必要があります。

### 14. テンプレートとして保存

頻繁に使用するユースケース図のベースを作成した場合:

1. 「File」→「Save as」を選択
2. 「Template」オプションをオンにする
3. テンプレート名を入力（例: "標準ユースケース図テンプレート"）
4. 保存

次回、新規作成時にこのテンプレートを選択可能

## 公式ドキュメント

- **公式サイト**: [diagrams.net](https://www.diagrams.net/)
- **UMLユースケース図チュートリアル**: [UML Use Case Diagrams in draw.io](https://www.drawio.com/blog/uml-use-case-diagrams)
- **ユーザーマニュアル**: [Draw.io User Manual](https://www.drawio.com/doc/)
- **FAQ**: [Draw.io FAQ](https://www.drawio.com/doc/faq/)
- **Getting Started**: [Getting Started with draw.io](https://www.drawio.com/blog/getting-started-with-drawio)

## ビデオチュートリアル

- **UML図作成ガイド**: [UML Diagrams with draw.io](https://www.youtube.com/watch?v=lAtCySGDD48)
- **draw.io Basics**: [draw.io YouTube Channel](https://www.youtube.com/c/drawio)

## 関連リンク

- [Draw.io GitHub Repository](https://github.com/jgraph/drawio)
- [Draw.io Desktop Releases](https://github.com/jgraph/drawio-desktop/releases)
- [UML 2.5 仕様書（OMG公式）](https://www.omg.org/spec/UML/)
- [Draw.io テンプレート集](https://www.diagrams.net/example-diagrams)
- [ユーザのための要件定義ガイド - IPA](https://www.ipa.go.jp/archive/digital/iot-en-ci/jyouryuu/youkenteigi20190912.html)

## 関連ドキュメント

このツールは他の開発工程でも使用されます：

- [要件定義/業務分析でのDraw.io](../../2_業務分析/Draw.io/Draw.io.md) - BPMNプロセス図作成
- [要件定義/システム方針検討でのDraw.io](../../10_システム方針検討（機能要件定義）/Draw.io/Draw.io.md) - システム構成図作成
- [基本設計（アプリケーション）/画面設計でのDraw.io](../../../開発工程_3_基本設計_アプリケーション/2_画面設計/Draw.io/Draw.io.md) - ワイヤーフレーム、画面遷移図
- [基本設計（アプリケーション）/データベース論理設計でのDraw.io](../../../開発工程_3_基本設計_アプリケーション/5_データベース論理設計/Draw.io/Draw.io.md) - ER図、テーブル関連図
- [基本設計（アプリケーション）/バッチ設計でのDraw.io](../../../開発工程_3_基本設計_アプリケーション/7_バッチ設計/Draw.io/Draw.io.md) - バッチ処理フロー図
- [基本設計（インフラ）/ネットワーク構成図でのDraw.io](../../../開発工程_4_基本設計_インフラ/1_ネットワーク構成図/Draw.io/Draw.io.md) - ネットワーク構成図、VLAN設計

全ツールの一覧については[ツール索引](../../../ツール索引.md)を参照してください。
