# Figma（画面設計）

## 概要

Figmaは、クラウドベースのUI/UXデザインツールで、基本設計フェーズでは画面仕様書の作成に活用します。画面レイアウト、画面項目定義、入力チェック仕様、画面処理フローの可視化に対応し、開発者への詳細な仕様伝達が可能です。

### 基本設計フェーズでの活用

- **画面レイアウト**: 詳細な画面配置と項目配置
- **画面項目定義**: 各入力項目の属性（型、桁数、必須/任意等）
- **入力チェック仕様**: バリデーションルールの可視化
- **画面処理フロー**: ボタンクリック時の処理フローを図解
- **画面遷移図**: 詳細な画面間の遷移関係

### メリット・デメリット

**メリット**
- 詳細な画面仕様を視覚的に表現できる
- デベロッパーハンドオフ機能で開発者に正確な仕様を伝達
- コンポーネントとバリアントで状態管理（通常/無効/エラー等）
- プラグインで画面仕様書を自動生成可能

**デメリット**
- 画面項目の詳細定義は別途Excelやスプレッドシートで管理が必要
- 複雑な業務ロジックの記述には不向き

## 利用方法

### 1. 画面仕様書用のファイル構成

基本設計では、画面ごとにページを作成し、詳細仕様を記載します。

#### ページ構成例

```
プロジェクト: ECサイト基本設計
├── 📄 画面一覧
├── 📄 01_ログイン画面
│   ├── レイアウト
│   ├── 項目定義
│   ├── 入力チェック仕様
│   └── 処理フロー
├── 📄 02_商品一覧画面
│   ├── レイアウト
│   ├── 項目定義
│   └── 処理フロー
└── 📄 03_商品詳細画面
    ├── レイアウト
    ├── 項目定義
    └── 処理フロー
```

### 2. 画面レイアウトの詳細設計

#### ログイン画面の例

**1. フレームの作成**

1. Frame (F) を作成: 1440 x 1024 (Desktop)
2. Frame名: "01_ログイン画面_レイアウト"

**2. グリッドシステムの設定**

1. Frameを選択→右パネル「Layout grid」で「+」をクリック
2. Columns: 12カラム、Gutter: 20px、Margin: 40px
3. グリッドに沿って要素を配置

**3. 画面要素の配置**

| 要素 | 配置 | サイズ | 備考 |
|------|------|--------|------|
| ヘッダー | 上部 | 1440 x 80 | ロゴ、サイトタイトル |
| ログインフォーム | 中央 | 400 x 500 | カード形式 |
| フッター | 下部 | 1440 x 60 | コピーライト |

**4. 詳細な項目配置**

ログインフォーム内：
- タイトル: "ログイン"（32px、Bold）
- メールアドレスラベル: "メールアドレス"（14px）
- メールアドレス入力: Input Field（360 x 48px）
- パスワードラベル: "パスワード"（14px）
- パスワード入力: Input Field（360 x 48px、type=password）
- ログインボタン: Button（360 x 48px、Primary）
- パスワードリマインダー: Link（14px、Blue）

### 3. 画面項目定義の作成

Figma内でテーブルプラグインを使用するか、コメント機能で項目定義を記載します。

#### 項目定義テーブル（プラグイン使用）

1. Plugins → Browse plugins → 「Table」をインストール
2. テーブルを作成し、以下の列を定義:

| 項目ID | 項目名 | 項目タイプ | 桁数 | 必須 | デフォルト値 | DB項目名 | 備考 |
|--------|--------|-----------|------|------|-------------|---------|------|
| email | メールアドレス | text | 100 | ○ | - | email | メール形式チェック |
| password | パスワード | password | 20 | ○ | - | password_hash | 8文字以上 |

#### Auto Layoutでの項目定義表示

1. 各入力フィールドにAuto Layoutを適用
2. プロパティをテキストレイヤーで追加:
   - 「メールアドレス [email, text, 100桁, 必須]」

### 4. 入力チェック仕様の可視化

#### バリデーションルールの表示方法

**方法1: コンポーネントのバリアント**

1. Input Fieldコンポーネントを作成
2. バリアントを追加:
   - State: Default / Error / Success
   - エラー状態では赤い枠線とエラーメッセージを表示

**例: メールアドレスのバリデーション**

バリアント: Email Input / State=Error
- 枠線: Red (#E74C3C)
- エラーメッセージ: "正しいメールアドレスを入力してください"（12px、Red）

**方法2: ノート機能でチェック仕様を記載**

1. 入力フィールドの近くに「Note」図形を配置
2. チェック内容を記載:

```
【入力チェック】
■ メールアドレス
- 必須チェック: 入力されていない場合エラー
- 形式チェック: RFC 5322準拠のメール形式
- 桁数チェック: 最大100文字
- エラーメッセージ: "正しいメールアドレスを入力してください"

■ パスワード
- 必須チェック: 入力されていない場合エラー
- 桁数チェック: 8文字以上、20文字以下
- 複雑性チェック: 英数字混在必須
- エラーメッセージ: "パスワードは8文字以上、英数字を含めてください"
```

### 5. 画面処理フローの作成

#### ボタンクリック時の処理フロー

**ログインボタンクリック時の処理**

1. 新しいFrameを作成: "01_ログイン画面_処理フロー"
2. フローチャートを作成:

```
[ログインボタンクリック]
    ↓
[入力チェック実行]
    ↓
<チェックOK?> ─No→ [エラーメッセージ表示] → [終了]
    ↓ Yes
[認証API呼び出し]
    ↓
<認証成功?> ─No→ [エラーメッセージ表示] → [終了]
    ↓ Yes
[セッション作成]
    ↓
[商品一覧画面へ遷移]
    ↓
[終了]
```

#### Figmaでの作図手順

1. 「Rectangle」で処理ボックスを作成
2. 「Diamond」（菱形）で判定を作成
3. 「Line」で矢印を接続
4. テキストで処理内容を記載

### 6. 画面状態の管理

#### 状態ごとの画面バリアント

**例: 商品詳細画面の状態管理**

1. Frame「商品詳細画面」を作成
2. バリアントを作成:
   - State: Loading（ローディング中）
   - State: Loaded（データ表示）
   - State: Error（エラー表示）
   - State: OutOfStock（在庫切れ）

#### 各状態の表現

**Loading状態**
- スケルトンスクリーン（グレーのプレースホルダー）
- ローディングアニメーション（Spinner）

**Error状態**
- エラーメッセージ: "商品情報の取得に失敗しました"
- リトライボタン

**OutOfStock状態**
- 「在庫切れ」バッジ（赤背景）
- 「購入する」ボタンが無効（グレーアウト）

### 7. レスポンシブデザインの定義

#### ブレークポイントの設定

基本設計では、複数デバイス対応の画面レイアウトを定義します。

1. Desktop: 1440 x 1024
2. Tablet: 768 x 1024
3. Mobile: 375 x 812

各ブレークポイントで画面レイアウトを作成し、要素の配置変更を明示します。

#### Auto Layoutでのレスポンシブ対応

1. コンテナにAuto Layoutを適用
2. 「Resizing」を設定:
   - Hug contents: 内容に合わせる
   - Fill container: 親要素いっぱいに広がる
   - Fixed: 固定サイズ

### 8. デベロッパーハンドオフ

開発者に正確な仕様を伝えるために、Inspectモードを活用します。

#### Inspectモードで確認できる情報

1. CSS Properties:
   - 幅・高さ: width: 360px; height: 48px;
   - 色: background-color: #3498DB;
   - フォント: font-family: 'Noto Sans JP'; font-size: 16px;
   - 余白: margin: 16px 0; padding: 12px 24px;

2. コードスニペット:
   - CSS
   - iOS (Swift)
   - Android (XML)

#### 開発者への共有手順

1. 右上「Share」→「Copy link」
2. 権限を「Can view」に設定
3. リンクを開発者に共有
4. 開発者はInspectモードで各要素のスタイルを確認

### 9. 画面仕様書の自動生成

#### プラグインの活用

**Design Docプラグイン**

1. Plugins → Browse plugins → 「Design Doc」をインストール
2. ファイルを開いて実行
3. 出力内容を選択:
   - 画面キャプチャ
   - コンポーネント一覧
   - カラーパレット
   - タイポグラフィ
4. PDF/HTML形式でエクスポート

**Zeplinとの連携**

1. Zeplinアカウントを作成
2. Figma → Zeplinにエクスポート
3. Zeplinで画面仕様書を自動生成
4. スタイルガイド、アセット、コードスニペットを含む

### 10. 画面仕様書テンプレート

#### 画面仕様書の構成

各画面ページに以下のセクションを作成：

**01_ログイン画面**

1. **画面概要**
   - 画面ID: SCR-001
   - 画面名: ログイン画面
   - 目的: ユーザー認証

2. **画面レイアウト**
   - デスクトップ版レイアウト
   - モバイル版レイアウト

3. **画面項目定義**（テーブル）
   - 項目ID、項目名、型、桁数、必須/任意、デフォルト値、DB項目名

4. **入力チェック仕様**
   - 項目ごとのバリデーションルール

5. **画面処理仕様**
   - ボタンクリック時の処理フロー
   - API呼び出し仕様

6. **画面遷移**
   - 遷移元画面、遷移先画面、遷移条件

7. **エラーハンドリング**
   - エラーケースとメッセージ一覧

### 11. コンポーネントライブラリの構築

基本設計では、再利用可能なUIコンポーネントを定義します。

#### 標準コンポーネント

1. **Button**
   - Primary、Secondary、Tertiary
   - Size: Small、Medium、Large
   - State: Default、Hover、Active、Disabled

2. **Input Field**
   - Type: Text、Email、Password、Number
   - State: Default、Focus、Error、Disabled

3. **Dropdown**
   - State: Closed、Open、Selected

4. **Checkbox / Radio Button**
   - State: Unchecked、Checked、Disabled

5. **Alert / Toast**
   - Type: Success、Error、Warning、Info

## 公式ドキュメント

- **公式サイト**: [Figma](https://www.figma.com/)
- **デザインシステム**: [Building Design Systems](https://help.figma.com/hc/en-us/articles/360038662654)
- **デベロッパーハンドオフ**: [Developer Handoff](https://help.figma.com/hc/en-us/articles/360055203533)
- **Auto Layout**: [Auto Layout Guide](https://help.figma.com/hc/en-us/articles/360040451373)
- **Components & Variants**: [Components Guide](https://help.figma.com/hc/en-us/articles/360038662654)

## 関連リンク

- [Figma Community（デザインシステムテンプレート）](https://www.figma.com/community)
- [Material Design 3](https://m3.material.io/)
- [iOS Human Interface Guidelines](https://developer.apple.com/design/human-interface-guidelines/)
